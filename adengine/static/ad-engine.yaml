openapi: 3.0.3
info:
  title: Dolby OptiView Ad Engine
  version: 1.0.0
paths:
  /ad-engine/profile:
    post:
      summary: Create Ad Profile
      tags:
      - Ad Engine
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $id: http://dolbyrasp.com/schemas/apigw/dae.profile.body
              type: object
              properties:
                encode_profile:
                  type: object
                  required:
                  - container
                  properties:
                    container:
                      type: object
                      required:
                      - kind
                      properties:
                        kind:
                          enum:
                          - hls
                          - hls/fmp4
                          - mpegts
                          - mpeg2ts
                          - mp4
                          - m4a
                          - fmp4
                          - m4s
                          - wav
                          - nut
                          description: The type of media container for the output.
                        use_editlist:
                          type: boolean
                          description: This sets the edit list atom (elst) in MP4 files. Read more here https://developer.apple.com/documentation/quicktime-file-format/edit_list_atom. The default is false.
                        mpegts_initial_discontinuity:
                          type: boolean
                          default: false
                        segment_duration_sec:
                          type: number
                          description: The segment duration in seconds for segmented or fragmented streams such as HLS or mp4/MPEG-DASH. Decimal notation (e.g. 5.5) is supported.
                        prefetch_hint_sec:
                          type: number
                          description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                      additionalProperties: false
                    video:
                      anyOf:
                      - type: object
                        properties:
                          width:
                            type: integer
                            description: Width of the output video.
                          height:
                            type: integer
                            description: Height of the output video.
                          bitrate_kb:
                            type: integer
                            description: The video bitrate in kilobits per second. For vbr, this is the average bitrate.
                          frame_rate:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?,?\/?\d+$
                            - type: number
                            description: 'The video frame rate - can be expressed in decimal or fraction notation, examples: 29.97, 30000/1001'
                          codec:
                            enum:
                            - h264
                            - h265
                            description: The desired output video codec.
                          chroma_format:
                            type: string
                            description: The chroma format.
                          color_primaries:
                            enum:
                            - bt601
                            - smpte170m
                            - bt709
                            - bt470m
                            - bt470bg
                            - smpte240m
                            - film
                            - bt2020
                            - smpte428
                            - smpte431
                            - smpte432
                            - jedec-p22
                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                          color_trc:
                            enum:
                            - bt601
                            - smpte170m
                            - bt709
                            - gamma22
                            - bt470m
                            - gamma28
                            - bt470bg
                            - smpte240m
                            - smpte428
                            - linear
                            - log
                            - log_sqrt
                            - bt1361
                            - smpte2084
                            - iec61966_2_1
                            - iec61966_2_4
                            - bt2020_10bit
                            - bt2020_12bit
                            - hlg
                            - arib-std-b67
                            description: Color transfer characteristics. The default determined by video size.
                          color_matrix:
                            enum:
                            - rgb
                            - bt470bg
                            - bt709
                            - smpte170m
                            - smpte240m
                            - ycgco
                            - bt2020c
                            - bt2020nc
                            - smpte2085
                            - chroma-derived-nc
                            - chroma-derived-c
                            - ictcp
                            - fcc
                            description: YUV/YCbCr colorspace type.
                          ire_range_mode:
                            enum:
                            - full
                            - limited
                            - auto
                            description: The IRE range for the source video. The default is auto.
                          range:
                            enum:
                            - sdr
                            - dolby_vision_5
                            - dolby_vision_8.1
                            - hdr10
                            description: The color range of the output video. The default is sdr.
                          sdr_enhancement:
                            type: object
                            properties:
                              mode:
                                enum:
                                - simple
                                - lut_low
                                - lut_med
                                - lut_high
                                default: lut_med
                                description: The conversion stregth of the SDR to HDR conversion 3D LUT.
                              use_metadata_smoothing:
                                type: boolean
                                default: true
                                description: Flag to smooth the HDR metadata between encoding segments.
                            additionalProperties: false
                            description: Object defining SDR to HDR enhancement controls.
                          abr_map:
                            type: object
                            properties:
                              hls_audio_group:
                                type: string
                                description: The HLS group that this layer belongs to.
                              compatibility_group:
                                type: string
                                description: The compatibility group that this layer belongs to.
                            anyOf:
                            - required:
                              - hls_audio_group
                            - required:
                              - compatibility_group
                            additionalProperties: false
                            description: Object with parameters controlling HLS audio layer affinities.
                          ffmpeg_cli_insert:
                            type: string
                            description: The FFmpeg command line arguments to be used. Note that these will override competing settings in the JSON.
                          dar:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?:?\/?\d+$
                            - type: number
                            description: 'The display aspect ratio. May expressed in decimal or fraction notation, examples: 1.33, 4/3'
                          sar:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?:?\/?\d+$
                            - type: number
                            description: The storage aspect ratio. May expressed in decimal or fraction notation. The storage aspect ratio, display aspect ratio, and pixel aspect ratio are related by DAR = SAR x PAR
                          force_original_aspect_ratio:
                            type: boolean
                            description: This will force the output to have the same aspect ratio as the input.
                          profile:
                            type: string
                            description: The profile for your codec. Not all profiles are valid for all codecs.
                          level:
                            type: string
                            description: The codec-dependent level - please reference ISO/IEC 14496-10, ISO/IEC 13818-2 etc.
                          preset:
                            type: string
                            description: Codec preset. See https://trac.ffmpeg.org/wiki/Encode/H.264 for examples.
                          max_bitrate_kb:
                            type: number
                            description: The maximum video bitrate in kilobits per second. Only valid for crf and vbr.
                          min_bitrate_kb:
                            type: number
                            description: The minimum video bitrate in kilobits per second. Only valid for crf and vbr.
                          vbv_buffer_size_kb:
                            type: number
                            description: The vbv buffer size in kilobits.
                          vbv_init_occupancy_kb:
                            type: number
                            description: The vbv init occupancy in kilobits.
                          exact_gop_frames:
                            type: integer
                            description: Use a fixed GOP size of this many frames.
                          idr_interval:
                            type: object
                            properties:
                              seconds:
                                type: number
                                description: Describes IDR frame interval in seconds.
                              frames:
                                type: integer
                                description: Describes IDR frame interval in frames.
                            additionalProperties: false
                            description: Describes a IDR frame interval, as count or seconds.
                          refs:
                            type: integer
                            description: The number of h.264 reference frames to used for future frames. If not set, the profile/level combination will determine the proper number of reference frames.
                          use_scene_detection:
                            type: boolean
                            description: Enable or disable scene change detection. Disabling will come with a steep penalty on video quality.
                          use_closed_gop:
                            type: boolean
                            description: Force use of closed GOPs.
                          bitrate_mode:
                            type: string
                            description: The bitrate mode for the codec. Values include cbr, vbr, and crf.
                          crf:
                            type: number
                            description: If the bitrate mode is crf, then this value must be specified. A Constant Rate Factor setting of 18 is considered excellent. Higher values equal lower quality. A change of +6 should roughly halve the resulting file size. See https://trac.ffmpeg.org/wiki/Encode/H.264
                          use_sequence_header_per_gop:
                            type: boolean
                            description: This will write a sequence header for each GOP.
                          closed_captions:
                            type: object
                            properties:
                              suppress:
                                type: boolean
                                enum:
                                - true
                                description: Suppress including captions in the output.
                            additionalProperties: false
                            description: Object describing the CC parameters for the targeted output.
                          prefetch_hint_sec:
                            type: number
                            description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                          x264_options:
                            type: string
                            description: x.264 specific codec options - please reference https://ffmpeg.org/ffmpeg-codecs.html#toc-libx264_002c-libx264rgb
                          filters:
                            type: array
                            title: Video Filters
                            description: The array of video filters to be applied to the output.
                            items:
                              type: object
                              description: The video filter object with a specific kind and payload format.
                              required:
                              - kind
                              - payload
                              properties:
                                kind:
                                  type: string
                                payload:
                                  type: object
                              anyOf:
                              - title: Image Overlay
                                properties:
                                  kind:
                                    const: image_overlay
                                    description: 'Filter kind: ''image_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the image overlay filter.
                                    properties:
                                      image_url:
                                        type: string
                                        description: Defines the http(-s) of the image to be used.
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                      width:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                      height:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                      opacity:
                                        default: 1
                                        type: number
                                        description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                    additionalProperties: false
                              - title: Video Overlay
                                properties:
                                  kind:
                                    const: video_overlay
                                    description: 'Filter kind: ''video_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the video overlay filter.
                                    properties:
                                      video_url:
                                        description: Defines the http(-s) of the video to be used.
                                        type: string
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                      width:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                      height:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                      opacity:
                                        type: number
                                        default: 1
                                        description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                      repeat_count:
                                        type: integer
                                        description: How many times to repeat the video overlay on the primary video. To repeat indefinitely use "-1".
                                    additionalProperties: false
                              - title: Text Overlay
                                properties:
                                  kind:
                                    const: text_overlay
                                    description: 'Filter kind: ''text_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the text overlay filter.
                                    properties:
                                      text_url:
                                        description: Defines the http(-s) of the text file to be used.
                                        type: string
                                      font_url:
                                        description: Defines the http(-s) of the font file to be used.
                                        type: string
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The x location to start the imprint. Can use expressions such as w-20 (w: width of the video).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The y location to start the imprint. Can use expressions such as h-20 (h: height of the video).'
                                      opacity:
                                        default: 1
                                        type: number
                                        description: Opacity of the text overlay. 0 = fully transparent, 1 = fully opaque.
                                      text:
                                        type: string
                                        description: The text string to be drawn.
                                      font:
                                        type: string
                                        description: 'The font descriptor (compliant with fontconfig). Examples: ''Sans'', ''URW Bookman L:style=Demi Bold Italic''.'
                                      font_color:
                                        default: black
                                        type: string
                                        description: 'The color to be used for drawing fonts. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      font_size:
                                        default: 16
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The font size in points. Can use expressions such as h/10 (w: width of the video, h: height of the video). A font size of 16 is the default. '
                                      tab_size:
                                        minimum: 1
                                        default: 4
                                        type: integer
                                        description: The size of the tab in number of spaces. The \t character is replaced with spaces.
                                      shadow_color:
                                        default: black
                                        type: string
                                        description: 'The color to be used for drawing a shadow behind the drawn text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      shadow_x:
                                        default: 0
                                        type: integer
                                        description: The x offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                      shadow_y:
                                        default: 0
                                        type: integer
                                        description: The y offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                      border_color:
                                        type: string
                                        description: 'The color to be used for drawing border around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      border_size:
                                        default: 0
                                        type: integer
                                        description: The width of the border to be drawn around the text.
                                      background_color:
                                        type: string
                                        description: 'The color to be used for drawing box around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      background_size:
                                        default: 0
                                        type: integer
                                        description: The width of the box to be drawn around the background.
                                      fix_bounds:
                                        default: false
                                        type: boolean
                                        description: Correct text coords to avoid clipping.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                    additionalProperties: false
                              - properties:
                                  kind:
                                    enum:
                                    - color_convert
                                  payload:
                                    type: object
                                    properties:
                                      from:
                                        type: object
                                        properties:
                                          color_primaries:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - bt470m
                                            - bt470bg
                                            - smpte240m
                                            - film
                                            - bt2020
                                            - smpte428
                                            - smpte431
                                            - smpte432
                                            - jedec-p22
                                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                          color_trc:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - gamma22
                                            - bt470m
                                            - gamma28
                                            - bt470bg
                                            - smpte240m
                                            - linear
                                            - log
                                            - log_sqrt
                                            - smpte2084
                                            - iec61966_2_1
                                            - iec61966_2_4
                                            - bt2020_10bit
                                            - bt2020_12bit
                                            - hlg
                                            - arib-std-b67
                                          color_matrix:
                                            enum:
                                            - rgb
                                            - bt470bg
                                            - bt709
                                            - smpte170m
                                            - smpte240m
                                            - fcc
                                            - ycgco
                                            - bt2020c
                                            - bt2020nc
                                            - chroma-derived-nc
                                            - chroma-derived-c
                                            - ictcp
                                          ire_range_mode:
                                            enum:
                                            - full
                                            - limited
                                            - auto
                                            description: The IRE range for the source video. The default is auto.
                                          override_source_metadata:
                                            type: boolean
                                            default: false
                                        additionalProperties: false
                                      to:
                                        type: object
                                        properties:
                                          color_primaries:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - bt470m
                                            - bt470bg
                                            - smpte240m
                                            - film
                                            - bt2020
                                            - smpte428
                                            - smpte431
                                            - smpte432
                                            - jedec-p22
                                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                          color_trc:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - gamma22
                                            - bt470m
                                            - gamma28
                                            - bt470bg
                                            - smpte240m
                                            - linear
                                            - log
                                            - log_sqrt
                                            - smpte2084
                                            - iec61966_2_1
                                            - iec61966_2_4
                                            - bt2020_10bit
                                            - bt2020_12bit
                                            - hlg
                                            - arib-std-b67
                                          color_matrix:
                                            enum:
                                            - rgb
                                            - bt470bg
                                            - bt709
                                            - smpte170m
                                            - smpte240m
                                            - fcc
                                            - ycgco
                                            - bt2020c
                                            - bt2020nc
                                            - chroma-derived-nc
                                            - chroma-derived-c
                                            - ictcp
                                          ire_range_mode:
                                            enum:
                                            - full
                                            - limited
                                            - auto
                                            description: The IRE range for the source video. The default is auto.
                                        additionalProperties: false
                                      nominal_peak_luminance:
                                        type: integer
                                      preset:
                                        enum:
                                        - hdr_hlg_to_sdr
                                        - hdr_hlg_to_sdr_desat_mild
                                        - hdr_hlg_to_sdr_desat_medium
                                        - hdr_pq_to_sdr
                                        - hdr_pq_to_sdr_desat_mild
                                        - hdr_pq_to_sdr_desat_medium
                                        - sdr_to_hdr_pq_200nit
                                        - sdr_to_hdr_pq_300nit
                                      lut_file:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          mime:
                                            type: string
                                        required:
                                        - url
                                        additionalProperties: false
                                    additionalProperties: false
                                additionalProperties: false
                        additionalProperties: false
                        description: The video encoding parameters.
                      - type: array
                        items:
                          type: object
                          properties:
                            width:
                              type: integer
                              description: Width of the output video.
                            height:
                              type: integer
                              description: Height of the output video.
                            bitrate_kb:
                              type: integer
                              description: The video bitrate in kilobits per second. For vbr, this is the average bitrate.
                            frame_rate:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?,?\/?\d+$
                              - type: number
                              description: 'The video frame rate - can be expressed in decimal or fraction notation, examples: 29.97, 30000/1001'
                            codec:
                              enum:
                              - h264
                              - h265
                              description: The desired output video codec.
                            chroma_format:
                              type: string
                              description: The chroma format.
                            color_primaries:
                              enum:
                              - bt601
                              - smpte170m
                              - bt709
                              - bt470m
                              - bt470bg
                              - smpte240m
                              - film
                              - bt2020
                              - smpte428
                              - smpte431
                              - smpte432
                              - jedec-p22
                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                            color_trc:
                              enum:
                              - bt601
                              - smpte170m
                              - bt709
                              - gamma22
                              - bt470m
                              - gamma28
                              - bt470bg
                              - smpte240m
                              - smpte428
                              - linear
                              - log
                              - log_sqrt
                              - bt1361
                              - smpte2084
                              - iec61966_2_1
                              - iec61966_2_4
                              - bt2020_10bit
                              - bt2020_12bit
                              - hlg
                              - arib-std-b67
                              description: Color transfer characteristics. The default determined by video size.
                            color_matrix:
                              enum:
                              - rgb
                              - bt470bg
                              - bt709
                              - smpte170m
                              - smpte240m
                              - ycgco
                              - bt2020c
                              - bt2020nc
                              - smpte2085
                              - chroma-derived-nc
                              - chroma-derived-c
                              - ictcp
                              - fcc
                              description: YUV/YCbCr colorspace type.
                            ire_range_mode:
                              enum:
                              - full
                              - limited
                              - auto
                              description: The IRE range for the source video. The default is auto.
                            range:
                              enum:
                              - sdr
                              - dolby_vision_5
                              - dolby_vision_8.1
                              - hdr10
                              description: The color range of the output video. The default is sdr.
                            sdr_enhancement:
                              type: object
                              properties:
                                mode:
                                  enum:
                                  - simple
                                  - lut_low
                                  - lut_med
                                  - lut_high
                                  default: lut_med
                                  description: The conversion stregth of the SDR to HDR conversion 3D LUT.
                                use_metadata_smoothing:
                                  type: boolean
                                  default: true
                                  description: Flag to smooth the HDR metadata between encoding segments.
                              additionalProperties: false
                              description: Object defining SDR to HDR enhancement controls.
                            abr_map:
                              type: object
                              properties:
                                hls_audio_group:
                                  type: string
                                  description: The HLS group that this layer belongs to.
                                compatibility_group:
                                  type: string
                                  description: The compatibility group that this layer belongs to.
                              anyOf:
                              - required:
                                - hls_audio_group
                              - required:
                                - compatibility_group
                              additionalProperties: false
                              description: Object with parameters controlling HLS audio layer affinities.
                            ffmpeg_cli_insert:
                              type: string
                              description: The FFmpeg command line arguments to be used. Note that these will override competing settings in the JSON.
                            dar:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?:?\/?\d+$
                              - type: number
                              description: 'The display aspect ratio. May expressed in decimal or fraction notation, examples: 1.33, 4/3'
                            sar:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?:?\/?\d+$
                              - type: number
                              description: The storage aspect ratio. May expressed in decimal or fraction notation. The storage aspect ratio, display aspect ratio, and pixel aspect ratio are related by DAR = SAR x PAR
                            force_original_aspect_ratio:
                              type: boolean
                              description: This will force the output to have the same aspect ratio as the input.
                            profile:
                              type: string
                              description: The profile for your codec. Not all profiles are valid for all codecs.
                            level:
                              type: string
                              description: The codec-dependent level - please reference ISO/IEC 14496-10, ISO/IEC 13818-2 etc.
                            preset:
                              type: string
                              description: Codec preset. See https://trac.ffmpeg.org/wiki/Encode/H.264 for examples.
                            max_bitrate_kb:
                              type: number
                              description: The maximum video bitrate in kilobits per second. Only valid for crf and vbr.
                            min_bitrate_kb:
                              type: number
                              description: The minimum video bitrate in kilobits per second. Only valid for crf and vbr.
                            vbv_buffer_size_kb:
                              type: number
                              description: The vbv buffer size in kilobits.
                            vbv_init_occupancy_kb:
                              type: number
                              description: The vbv init occupancy in kilobits.
                            exact_gop_frames:
                              type: integer
                              description: Use a fixed GOP size of this many frames.
                            idr_interval:
                              type: object
                              properties:
                                seconds:
                                  type: number
                                  description: Describes IDR frame interval in seconds.
                                frames:
                                  type: integer
                                  description: Describes IDR frame interval in frames.
                              additionalProperties: false
                              description: Describes a IDR frame interval, as count or seconds.
                            refs:
                              type: integer
                              description: The number of h.264 reference frames to used for future frames. If not set, the profile/level combination will determine the proper number of reference frames.
                            use_scene_detection:
                              type: boolean
                              description: Enable or disable scene change detection. Disabling will come with a steep penalty on video quality.
                            use_closed_gop:
                              type: boolean
                              description: Force use of closed GOPs.
                            bitrate_mode:
                              type: string
                              description: The bitrate mode for the codec. Values include cbr, vbr, and crf.
                            crf:
                              type: number
                              description: If the bitrate mode is crf, then this value must be specified. A Constant Rate Factor setting of 18 is considered excellent. Higher values equal lower quality. A change of +6 should roughly halve the resulting file size. See https://trac.ffmpeg.org/wiki/Encode/H.264
                            use_sequence_header_per_gop:
                              type: boolean
                              description: This will write a sequence header for each GOP.
                            closed_captions:
                              type: object
                              properties:
                                suppress:
                                  type: boolean
                                  enum:
                                  - true
                                  description: Suppress including captions in the output.
                              additionalProperties: false
                              description: Object describing the CC parameters for the targeted output.
                            prefetch_hint_sec:
                              type: number
                              description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                            x264_options:
                              type: string
                              description: x.264 specific codec options - please reference https://ffmpeg.org/ffmpeg-codecs.html#toc-libx264_002c-libx264rgb
                            filters:
                              type: array
                              title: Video Filters
                              description: The array of video filters to be applied to the output.
                              items:
                                type: object
                                description: The video filter object with a specific kind and payload format.
                                required:
                                - kind
                                - payload
                                properties:
                                  kind:
                                    type: string
                                  payload:
                                    type: object
                                anyOf:
                                - title: Image Overlay
                                  properties:
                                    kind:
                                      const: image_overlay
                                      description: 'Filter kind: ''image_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the image overlay filter.
                                      properties:
                                        image_url:
                                          type: string
                                          description: Defines the http(-s) of the image to be used.
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                        width:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                        height:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                        opacity:
                                          default: 1
                                          type: number
                                          description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                      additionalProperties: false
                                - title: Video Overlay
                                  properties:
                                    kind:
                                      const: video_overlay
                                      description: 'Filter kind: ''video_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the video overlay filter.
                                      properties:
                                        video_url:
                                          description: Defines the http(-s) of the video to be used.
                                          type: string
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                        width:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                        height:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                        opacity:
                                          type: number
                                          default: 1
                                          description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                        repeat_count:
                                          type: integer
                                          description: How many times to repeat the video overlay on the primary video. To repeat indefinitely use "-1".
                                      additionalProperties: false
                                - title: Text Overlay
                                  properties:
                                    kind:
                                      const: text_overlay
                                      description: 'Filter kind: ''text_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the text overlay filter.
                                      properties:
                                        text_url:
                                          description: Defines the http(-s) of the text file to be used.
                                          type: string
                                        font_url:
                                          description: Defines the http(-s) of the font file to be used.
                                          type: string
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The x location to start the imprint. Can use expressions such as w-20 (w: width of the video).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The y location to start the imprint. Can use expressions such as h-20 (h: height of the video).'
                                        opacity:
                                          default: 1
                                          type: number
                                          description: Opacity of the text overlay. 0 = fully transparent, 1 = fully opaque.
                                        text:
                                          type: string
                                          description: The text string to be drawn.
                                        font:
                                          type: string
                                          description: 'The font descriptor (compliant with fontconfig). Examples: ''Sans'', ''URW Bookman L:style=Demi Bold Italic''.'
                                        font_color:
                                          default: black
                                          type: string
                                          description: 'The color to be used for drawing fonts. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        font_size:
                                          default: 16
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The font size in points. Can use expressions such as h/10 (w: width of the video, h: height of the video). A font size of 16 is the default. '
                                        tab_size:
                                          minimum: 1
                                          default: 4
                                          type: integer
                                          description: The size of the tab in number of spaces. The \t character is replaced with spaces.
                                        shadow_color:
                                          default: black
                                          type: string
                                          description: 'The color to be used for drawing a shadow behind the drawn text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        shadow_x:
                                          default: 0
                                          type: integer
                                          description: The x offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                        shadow_y:
                                          default: 0
                                          type: integer
                                          description: The y offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                        border_color:
                                          type: string
                                          description: 'The color to be used for drawing border around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        border_size:
                                          default: 0
                                          type: integer
                                          description: The width of the border to be drawn around the text.
                                        background_color:
                                          type: string
                                          description: 'The color to be used for drawing box around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        background_size:
                                          default: 0
                                          type: integer
                                          description: The width of the box to be drawn around the background.
                                        fix_bounds:
                                          default: false
                                          type: boolean
                                          description: Correct text coords to avoid clipping.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                      additionalProperties: false
                                - properties:
                                    kind:
                                      enum:
                                      - color_convert
                                    payload:
                                      type: object
                                      properties:
                                        from:
                                          type: object
                                          properties:
                                            color_primaries:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - bt470m
                                              - bt470bg
                                              - smpte240m
                                              - film
                                              - bt2020
                                              - smpte428
                                              - smpte431
                                              - smpte432
                                              - jedec-p22
                                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                            color_trc:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - gamma22
                                              - bt470m
                                              - gamma28
                                              - bt470bg
                                              - smpte240m
                                              - linear
                                              - log
                                              - log_sqrt
                                              - smpte2084
                                              - iec61966_2_1
                                              - iec61966_2_4
                                              - bt2020_10bit
                                              - bt2020_12bit
                                              - hlg
                                              - arib-std-b67
                                            color_matrix:
                                              enum:
                                              - rgb
                                              - bt470bg
                                              - bt709
                                              - smpte170m
                                              - smpte240m
                                              - fcc
                                              - ycgco
                                              - bt2020c
                                              - bt2020nc
                                              - chroma-derived-nc
                                              - chroma-derived-c
                                              - ictcp
                                            ire_range_mode:
                                              enum:
                                              - full
                                              - limited
                                              - auto
                                              description: The IRE range for the source video. The default is auto.
                                            override_source_metadata:
                                              type: boolean
                                              default: false
                                          additionalProperties: false
                                        to:
                                          type: object
                                          properties:
                                            color_primaries:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - bt470m
                                              - bt470bg
                                              - smpte240m
                                              - film
                                              - bt2020
                                              - smpte428
                                              - smpte431
                                              - smpte432
                                              - jedec-p22
                                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                            color_trc:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - gamma22
                                              - bt470m
                                              - gamma28
                                              - bt470bg
                                              - smpte240m
                                              - linear
                                              - log
                                              - log_sqrt
                                              - smpte2084
                                              - iec61966_2_1
                                              - iec61966_2_4
                                              - bt2020_10bit
                                              - bt2020_12bit
                                              - hlg
                                              - arib-std-b67
                                            color_matrix:
                                              enum:
                                              - rgb
                                              - bt470bg
                                              - bt709
                                              - smpte170m
                                              - smpte240m
                                              - fcc
                                              - ycgco
                                              - bt2020c
                                              - bt2020nc
                                              - chroma-derived-nc
                                              - chroma-derived-c
                                              - ictcp
                                            ire_range_mode:
                                              enum:
                                              - full
                                              - limited
                                              - auto
                                              description: The IRE range for the source video. The default is auto.
                                          additionalProperties: false
                                        nominal_peak_luminance:
                                          type: integer
                                        preset:
                                          enum:
                                          - hdr_hlg_to_sdr
                                          - hdr_hlg_to_sdr_desat_mild
                                          - hdr_hlg_to_sdr_desat_medium
                                          - hdr_pq_to_sdr
                                          - hdr_pq_to_sdr_desat_mild
                                          - hdr_pq_to_sdr_desat_medium
                                          - sdr_to_hdr_pq_200nit
                                          - sdr_to_hdr_pq_300nit
                                        lut_file:
                                          type: object
                                          properties:
                                            url:
                                              type: string
                                            mime:
                                              type: string
                                          required:
                                          - url
                                          additionalProperties: false
                                      additionalProperties: false
                                  additionalProperties: false
                          additionalProperties: false
                          description: The video encoding parameters.
                    audio:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: string
                            description: ID of the audio track.
                          program_name:
                            type: string
                            description: Program name of the audio track.
                          codec:
                            enum:
                            - aac
                            - aac_lc
                            - he_aac1
                            - he_aac2
                            - ac4
                            - ddp_joc
                            description: The audio codec to use for the track.
                          bitrate_kb:
                            type: number
                            description: The audio bitrate in kilobits per second. This is the average bitrate in the case of vbr.
                          channels:
                            type: integer
                            description: The number of audio channels.
                          sample_rate:
                            type: integer
                            description: The audio sample rate in Hz. Typical values are 44100 and 48000. Omit to use the source sample rate.
                          auto_generate_silence_track:
                            type: boolean
                            description: 'This fills the track with silence. '
                          filters:
                            type: array
                            title: Audio Filters
                            description: The array of audio filters to be applied to the output.
                            items:
                              type: object
                              description: The audio filter object with a specific kind and payload format.
                              required:
                              - payload
                              properties:
                                kind:
                                  type: string
                                payload:
                                  type: object
                              anyOf:
                              - title: normalize
                                type: object
                                properties:
                                  kind:
                                    const: normalize
                                  payload:
                                    type: object
                                    description: Specifies parameters for the image overlay filter.
                                    properties:
                                      kind:
                                        const: ebur128
                                      analyze_vurl:
                                        type: string
                                      payload:
                                        type: object
                                        properties:
                                          source:
                                            type: object
                                            properties:
                                              integrated_lufs:
                                                type: number
                                                minimum: -99
                                                maximum: 0
                                              loudness_lra_lufs:
                                                type: number
                                                minimum: 0
                                                maximum: 99
                                              true_peak_dbfs:
                                                type: number
                                                minimum: -99
                                                maximum: 99
                                              integrated_threshold_lufs:
                                                type: number
                                                minimum: -99
                                                maximum: 0
                                              offset:
                                                type: number
                                                minimum: -99
                                                maximum: 99
                                          integrated_lufs:
                                            type: number
                                            minimum: -70
                                            maximum: -5
                                          loudness_lra_lufs:
                                            type: number
                                            minimum: 1
                                            maximum: 50
                                          true_peak_dbfs:
                                            type: number
                                            minimum: -9
                                            maximum: 0
                                          allow_unprecise_mode:
                                            type: boolean
                                            default: false
                                    not:
                                      required:
                                      - analyze_vurl
                                      - payload
                                    required:
                                    - kind
                                    additionalProperties: false
                                required:
                                - kind
                                additionalProperties: false
                          language:
                            type: string
                            description: The audio language code in ISO-639 notation.
                          prefetch_hint_sec:
                            type: number
                            description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                          abr_map:
                            type: object
                            properties:
                              hls_audio_group:
                                type: string
                              is_hls_group_default:
                                type: boolean
                                default: false
                              content:
                                type: string
                              compatibility_group:
                                type: string
                            required:
                            - content
                            anyOf:
                            - required:
                              - hls_audio_group
                            - required:
                              - compatibility_group
                            additionalProperties: false
                          ddp_joc_upmix_mode:
                            enum:
                            - remap
                            - upmix
                            default: upmix
                            description: When upconverting to Dolby Atmos, this specifies the type of upmixing for DD+JOC encoding.
                        additionalProperties: false
                        description: Each audio track is an element of the array.
                  additionalProperties: false
                  examples:
                  - container:
                      kind: hls
                      segment_duration_sec: 2
                    video:
                    - width: 1280
                      height: 720
                      bitrate_kb: 2500
                      frame_rate: 30000/1001
                    audio:
                    - codec: aac
                      bitrate_kb: 128
                qc:
                  type: object
                  properties:
                    pre:
                      type: object
                      properties:
                        conditions:
                          $id: '#/$defs/rasp_shared/definitions/qc/properties/post/properties/conditions'
                      additionalProperties: false
                  additionalProperties: false
                timing_configuration:
                  type: object
                  properties:
                    player_buffer_sec:
                      type: number
                      maximum: 120
                      minimum: 0
                      description: This setting is how long your player's buffer is set to in seconds.
                    expected_player_start_sec:
                      type: number
                      maximum: 120
                      minimum: 0
                      description: 'This is a hint on how soon after the conformance call you expect your player to start. '
                  additionalProperties: false
                  description: 'Optional settings to tune specific timing characteristics for your ad availability. '
                access:
                  type: object
                  properties:
                    allow_public_proxy:
                      type: boolean
                      default: false
                      description: If set to true, allows the conform endpoint to be used in proxy mode via GET requests, unauthenticated.
                  additionalProperties: false
              examples:
              - &id001
                container:
                  kind: hls
                  segment_duration_sec: 2
                video:
                - width: 1280
                  height: 720
                  bitrate_kb: 2500
                  frame_rate: 30000/1001
                audio:
                - codec: aac
                  bitrate_kb: 128
            example: *id001
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      responses:
        '200':
          description: OK
    put:
      summary: Modify Ad Profile
      tags:
      - Ad Engine
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $id: http://dolbyrasp.com/schemas/apigw/dae.profile.body
              type: object
              properties:
                encode_profile:
                  type: object
                  required:
                  - container
                  properties:
                    container:
                      type: object
                      required:
                      - kind
                      properties:
                        kind:
                          enum:
                          - hls
                          - hls/fmp4
                          - mpegts
                          - mpeg2ts
                          - mp4
                          - m4a
                          - fmp4
                          - m4s
                          - wav
                          - nut
                          description: The type of media container for the output.
                        use_editlist:
                          type: boolean
                          description: This sets the edit list atom (elst) in MP4 files. Read more here https://developer.apple.com/documentation/quicktime-file-format/edit_list_atom. The default is false.
                        mpegts_initial_discontinuity:
                          type: boolean
                          default: false
                        segment_duration_sec:
                          type: number
                          description: The segment duration in seconds for segmented or fragmented streams such as HLS or mp4/MPEG-DASH. Decimal notation (e.g. 5.5) is supported.
                        prefetch_hint_sec:
                          type: number
                          description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                      additionalProperties: false
                    video:
                      anyOf:
                      - type: object
                        properties:
                          width:
                            type: integer
                            description: Width of the output video.
                          height:
                            type: integer
                            description: Height of the output video.
                          bitrate_kb:
                            type: integer
                            description: The video bitrate in kilobits per second. For vbr, this is the average bitrate.
                          frame_rate:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?,?\/?\d+$
                            - type: number
                            description: 'The video frame rate - can be expressed in decimal or fraction notation, examples: 29.97, 30000/1001'
                          codec:
                            enum:
                            - h264
                            - h265
                            description: The desired output video codec.
                          chroma_format:
                            type: string
                            description: The chroma format.
                          color_primaries:
                            enum:
                            - bt601
                            - smpte170m
                            - bt709
                            - bt470m
                            - bt470bg
                            - smpte240m
                            - film
                            - bt2020
                            - smpte428
                            - smpte431
                            - smpte432
                            - jedec-p22
                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                          color_trc:
                            enum:
                            - bt601
                            - smpte170m
                            - bt709
                            - gamma22
                            - bt470m
                            - gamma28
                            - bt470bg
                            - smpte240m
                            - smpte428
                            - linear
                            - log
                            - log_sqrt
                            - bt1361
                            - smpte2084
                            - iec61966_2_1
                            - iec61966_2_4
                            - bt2020_10bit
                            - bt2020_12bit
                            - hlg
                            - arib-std-b67
                            description: Color transfer characteristics. The default determined by video size.
                          color_matrix:
                            enum:
                            - rgb
                            - bt470bg
                            - bt709
                            - smpte170m
                            - smpte240m
                            - ycgco
                            - bt2020c
                            - bt2020nc
                            - smpte2085
                            - chroma-derived-nc
                            - chroma-derived-c
                            - ictcp
                            - fcc
                            description: YUV/YCbCr colorspace type.
                          ire_range_mode:
                            enum:
                            - full
                            - limited
                            - auto
                            description: The IRE range for the source video. The default is auto.
                          range:
                            enum:
                            - sdr
                            - dolby_vision_5
                            - dolby_vision_8.1
                            - hdr10
                            description: The color range of the output video. The default is sdr.
                          sdr_enhancement:
                            type: object
                            properties:
                              mode:
                                enum:
                                - simple
                                - lut_low
                                - lut_med
                                - lut_high
                                default: lut_med
                                description: The conversion stregth of the SDR to HDR conversion 3D LUT.
                              use_metadata_smoothing:
                                type: boolean
                                default: true
                                description: Flag to smooth the HDR metadata between encoding segments.
                            additionalProperties: false
                            description: Object defining SDR to HDR enhancement controls.
                          abr_map:
                            type: object
                            properties:
                              hls_audio_group:
                                type: string
                                description: The HLS group that this layer belongs to.
                              compatibility_group:
                                type: string
                                description: The compatibility group that this layer belongs to.
                            anyOf:
                            - required:
                              - hls_audio_group
                            - required:
                              - compatibility_group
                            additionalProperties: false
                            description: Object with parameters controlling HLS audio layer affinities.
                          ffmpeg_cli_insert:
                            type: string
                            description: The FFmpeg command line arguments to be used. Note that these will override competing settings in the JSON.
                          dar:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?:?\/?\d+$
                            - type: number
                            description: 'The display aspect ratio. May expressed in decimal or fraction notation, examples: 1.33, 4/3'
                          sar:
                            oneOf:
                            - type: string
                              pattern: ^\d+\.?:?\/?\d+$
                            - type: number
                            description: The storage aspect ratio. May expressed in decimal or fraction notation. The storage aspect ratio, display aspect ratio, and pixel aspect ratio are related by DAR = SAR x PAR
                          force_original_aspect_ratio:
                            type: boolean
                            description: This will force the output to have the same aspect ratio as the input.
                          profile:
                            type: string
                            description: The profile for your codec. Not all profiles are valid for all codecs.
                          level:
                            type: string
                            description: The codec-dependent level - please reference ISO/IEC 14496-10, ISO/IEC 13818-2 etc.
                          preset:
                            type: string
                            description: Codec preset. See https://trac.ffmpeg.org/wiki/Encode/H.264 for examples.
                          max_bitrate_kb:
                            type: number
                            description: The maximum video bitrate in kilobits per second. Only valid for crf and vbr.
                          min_bitrate_kb:
                            type: number
                            description: The minimum video bitrate in kilobits per second. Only valid for crf and vbr.
                          vbv_buffer_size_kb:
                            type: number
                            description: The vbv buffer size in kilobits.
                          vbv_init_occupancy_kb:
                            type: number
                            description: The vbv init occupancy in kilobits.
                          exact_gop_frames:
                            type: integer
                            description: Use a fixed GOP size of this many frames.
                          idr_interval:
                            type: object
                            properties:
                              seconds:
                                type: number
                                description: Describes IDR frame interval in seconds.
                              frames:
                                type: integer
                                description: Describes IDR frame interval in frames.
                            additionalProperties: false
                            description: Describes a IDR frame interval, as count or seconds.
                          refs:
                            type: integer
                            description: The number of h.264 reference frames to used for future frames. If not set, the profile/level combination will determine the proper number of reference frames.
                          use_scene_detection:
                            type: boolean
                            description: Enable or disable scene change detection. Disabling will come with a steep penalty on video quality.
                          use_closed_gop:
                            type: boolean
                            description: Force use of closed GOPs.
                          bitrate_mode:
                            type: string
                            description: The bitrate mode for the codec. Values include cbr, vbr, and crf.
                          crf:
                            type: number
                            description: If the bitrate mode is crf, then this value must be specified. A Constant Rate Factor setting of 18 is considered excellent. Higher values equal lower quality. A change of +6 should roughly halve the resulting file size. See https://trac.ffmpeg.org/wiki/Encode/H.264
                          use_sequence_header_per_gop:
                            type: boolean
                            description: This will write a sequence header for each GOP.
                          closed_captions:
                            type: object
                            properties:
                              suppress:
                                type: boolean
                                enum:
                                - true
                                description: Suppress including captions in the output.
                            additionalProperties: false
                            description: Object describing the CC parameters for the targeted output.
                          prefetch_hint_sec:
                            type: number
                            description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                          x264_options:
                            type: string
                            description: x.264 specific codec options - please reference https://ffmpeg.org/ffmpeg-codecs.html#toc-libx264_002c-libx264rgb
                          filters:
                            type: array
                            title: Video Filters
                            description: The array of video filters to be applied to the output.
                            items:
                              type: object
                              description: The video filter object with a specific kind and payload format.
                              required:
                              - kind
                              - payload
                              properties:
                                kind:
                                  type: string
                                payload:
                                  type: object
                              anyOf:
                              - title: Image Overlay
                                properties:
                                  kind:
                                    const: image_overlay
                                    description: 'Filter kind: ''image_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the image overlay filter.
                                    properties:
                                      image_url:
                                        type: string
                                        description: Defines the http(-s) of the image to be used.
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                      width:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                      height:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                      opacity:
                                        default: 1
                                        type: number
                                        description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                    additionalProperties: false
                              - title: Video Overlay
                                properties:
                                  kind:
                                    const: video_overlay
                                    description: 'Filter kind: ''video_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the video overlay filter.
                                    properties:
                                      video_url:
                                        description: Defines the http(-s) of the video to be used.
                                        type: string
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                      width:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                      height:
                                        oneOf:
                                        - type: number
                                        - type: string
                                        description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                      opacity:
                                        type: number
                                        default: 1
                                        description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                      repeat_count:
                                        type: integer
                                        description: How many times to repeat the video overlay on the primary video. To repeat indefinitely use "-1".
                                    additionalProperties: false
                              - title: Text Overlay
                                properties:
                                  kind:
                                    const: text_overlay
                                    description: 'Filter kind: ''text_overlay''.'
                                  payload:
                                    type: object
                                    description: Specifies the parameters for the text overlay filter.
                                    properties:
                                      text_url:
                                        description: Defines the http(-s) of the text file to be used.
                                        type: string
                                      font_url:
                                        description: Defines the http(-s) of the font file to be used.
                                        type: string
                                      x:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The x location to start the imprint. Can use expressions such as w-20 (w: width of the video).'
                                      y:
                                        default: 25
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The y location to start the imprint. Can use expressions such as h-20 (h: height of the video).'
                                      opacity:
                                        default: 1
                                        type: number
                                        description: Opacity of the text overlay. 0 = fully transparent, 1 = fully opaque.
                                      text:
                                        type: string
                                        description: The text string to be drawn.
                                      font:
                                        type: string
                                        description: 'The font descriptor (compliant with fontconfig). Examples: ''Sans'', ''URW Bookman L:style=Demi Bold Italic''.'
                                      font_color:
                                        default: black
                                        type: string
                                        description: 'The color to be used for drawing fonts. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      font_size:
                                        default: 16
                                        oneOf:
                                        - type: integer
                                        - type: string
                                        description: 'The font size in points. Can use expressions such as h/10 (w: width of the video, h: height of the video). A font size of 16 is the default. '
                                      tab_size:
                                        minimum: 1
                                        default: 4
                                        type: integer
                                        description: The size of the tab in number of spaces. The \t character is replaced with spaces.
                                      shadow_color:
                                        default: black
                                        type: string
                                        description: 'The color to be used for drawing a shadow behind the drawn text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      shadow_x:
                                        default: 0
                                        type: integer
                                        description: The x offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                      shadow_y:
                                        default: 0
                                        type: integer
                                        description: The y offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                      border_color:
                                        type: string
                                        description: 'The color to be used for drawing border around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      border_size:
                                        default: 0
                                        type: integer
                                        description: The width of the border to be drawn around the text.
                                      background_color:
                                        type: string
                                        description: 'The color to be used for drawing box around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                      background_size:
                                        default: 0
                                        type: integer
                                        description: The width of the box to be drawn around the background.
                                      fix_bounds:
                                        default: false
                                        type: boolean
                                        description: Correct text coords to avoid clipping.
                                      start_sec:
                                        type: number
                                        description: Start point (in seconds) of the overlay.
                                      duration_sec:
                                        type: number
                                        description: Duration (in seconds) of the overlay.
                                      fadein_duration_sec:
                                        type: number
                                        description: Fade-in time (in seconds) of the overlay.
                                      fadeout_duration_sec:
                                        type: number
                                        description: Fade-out time (in seconds) of the overlay.
                                    additionalProperties: false
                              - properties:
                                  kind:
                                    enum:
                                    - color_convert
                                  payload:
                                    type: object
                                    properties:
                                      from:
                                        type: object
                                        properties:
                                          color_primaries:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - bt470m
                                            - bt470bg
                                            - smpte240m
                                            - film
                                            - bt2020
                                            - smpte428
                                            - smpte431
                                            - smpte432
                                            - jedec-p22
                                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                          color_trc:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - gamma22
                                            - bt470m
                                            - gamma28
                                            - bt470bg
                                            - smpte240m
                                            - linear
                                            - log
                                            - log_sqrt
                                            - smpte2084
                                            - iec61966_2_1
                                            - iec61966_2_4
                                            - bt2020_10bit
                                            - bt2020_12bit
                                            - hlg
                                            - arib-std-b67
                                          color_matrix:
                                            enum:
                                            - rgb
                                            - bt470bg
                                            - bt709
                                            - smpte170m
                                            - smpte240m
                                            - fcc
                                            - ycgco
                                            - bt2020c
                                            - bt2020nc
                                            - chroma-derived-nc
                                            - chroma-derived-c
                                            - ictcp
                                          ire_range_mode:
                                            enum:
                                            - full
                                            - limited
                                            - auto
                                            description: The IRE range for the source video. The default is auto.
                                          override_source_metadata:
                                            type: boolean
                                            default: false
                                        additionalProperties: false
                                      to:
                                        type: object
                                        properties:
                                          color_primaries:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - bt470m
                                            - bt470bg
                                            - smpte240m
                                            - film
                                            - bt2020
                                            - smpte428
                                            - smpte431
                                            - smpte432
                                            - jedec-p22
                                            description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                          color_trc:
                                            enum:
                                            - bt601
                                            - smpte170m
                                            - bt709
                                            - gamma22
                                            - bt470m
                                            - gamma28
                                            - bt470bg
                                            - smpte240m
                                            - linear
                                            - log
                                            - log_sqrt
                                            - smpte2084
                                            - iec61966_2_1
                                            - iec61966_2_4
                                            - bt2020_10bit
                                            - bt2020_12bit
                                            - hlg
                                            - arib-std-b67
                                          color_matrix:
                                            enum:
                                            - rgb
                                            - bt470bg
                                            - bt709
                                            - smpte170m
                                            - smpte240m
                                            - fcc
                                            - ycgco
                                            - bt2020c
                                            - bt2020nc
                                            - chroma-derived-nc
                                            - chroma-derived-c
                                            - ictcp
                                          ire_range_mode:
                                            enum:
                                            - full
                                            - limited
                                            - auto
                                            description: The IRE range for the source video. The default is auto.
                                        additionalProperties: false
                                      nominal_peak_luminance:
                                        type: integer
                                      preset:
                                        enum:
                                        - hdr_hlg_to_sdr
                                        - hdr_hlg_to_sdr_desat_mild
                                        - hdr_hlg_to_sdr_desat_medium
                                        - hdr_pq_to_sdr
                                        - hdr_pq_to_sdr_desat_mild
                                        - hdr_pq_to_sdr_desat_medium
                                        - sdr_to_hdr_pq_200nit
                                        - sdr_to_hdr_pq_300nit
                                      lut_file:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          mime:
                                            type: string
                                        required:
                                        - url
                                        additionalProperties: false
                                    additionalProperties: false
                                additionalProperties: false
                        additionalProperties: false
                        description: The video encoding parameters.
                      - type: array
                        items:
                          type: object
                          properties:
                            width:
                              type: integer
                              description: Width of the output video.
                            height:
                              type: integer
                              description: Height of the output video.
                            bitrate_kb:
                              type: integer
                              description: The video bitrate in kilobits per second. For vbr, this is the average bitrate.
                            frame_rate:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?,?\/?\d+$
                              - type: number
                              description: 'The video frame rate - can be expressed in decimal or fraction notation, examples: 29.97, 30000/1001'
                            codec:
                              enum:
                              - h264
                              - h265
                              description: The desired output video codec.
                            chroma_format:
                              type: string
                              description: The chroma format.
                            color_primaries:
                              enum:
                              - bt601
                              - smpte170m
                              - bt709
                              - bt470m
                              - bt470bg
                              - smpte240m
                              - film
                              - bt2020
                              - smpte428
                              - smpte431
                              - smpte432
                              - jedec-p22
                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                            color_trc:
                              enum:
                              - bt601
                              - smpte170m
                              - bt709
                              - gamma22
                              - bt470m
                              - gamma28
                              - bt470bg
                              - smpte240m
                              - smpte428
                              - linear
                              - log
                              - log_sqrt
                              - bt1361
                              - smpte2084
                              - iec61966_2_1
                              - iec61966_2_4
                              - bt2020_10bit
                              - bt2020_12bit
                              - hlg
                              - arib-std-b67
                              description: Color transfer characteristics. The default determined by video size.
                            color_matrix:
                              enum:
                              - rgb
                              - bt470bg
                              - bt709
                              - smpte170m
                              - smpte240m
                              - ycgco
                              - bt2020c
                              - bt2020nc
                              - smpte2085
                              - chroma-derived-nc
                              - chroma-derived-c
                              - ictcp
                              - fcc
                              description: YUV/YCbCr colorspace type.
                            ire_range_mode:
                              enum:
                              - full
                              - limited
                              - auto
                              description: The IRE range for the source video. The default is auto.
                            range:
                              enum:
                              - sdr
                              - dolby_vision_5
                              - dolby_vision_8.1
                              - hdr10
                              description: The color range of the output video. The default is sdr.
                            sdr_enhancement:
                              type: object
                              properties:
                                mode:
                                  enum:
                                  - simple
                                  - lut_low
                                  - lut_med
                                  - lut_high
                                  default: lut_med
                                  description: The conversion stregth of the SDR to HDR conversion 3D LUT.
                                use_metadata_smoothing:
                                  type: boolean
                                  default: true
                                  description: Flag to smooth the HDR metadata between encoding segments.
                              additionalProperties: false
                              description: Object defining SDR to HDR enhancement controls.
                            abr_map:
                              type: object
                              properties:
                                hls_audio_group:
                                  type: string
                                  description: The HLS group that this layer belongs to.
                                compatibility_group:
                                  type: string
                                  description: The compatibility group that this layer belongs to.
                              anyOf:
                              - required:
                                - hls_audio_group
                              - required:
                                - compatibility_group
                              additionalProperties: false
                              description: Object with parameters controlling HLS audio layer affinities.
                            ffmpeg_cli_insert:
                              type: string
                              description: The FFmpeg command line arguments to be used. Note that these will override competing settings in the JSON.
                            dar:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?:?\/?\d+$
                              - type: number
                              description: 'The display aspect ratio. May expressed in decimal or fraction notation, examples: 1.33, 4/3'
                            sar:
                              oneOf:
                              - type: string
                                pattern: ^\d+\.?:?\/?\d+$
                              - type: number
                              description: The storage aspect ratio. May expressed in decimal or fraction notation. The storage aspect ratio, display aspect ratio, and pixel aspect ratio are related by DAR = SAR x PAR
                            force_original_aspect_ratio:
                              type: boolean
                              description: This will force the output to have the same aspect ratio as the input.
                            profile:
                              type: string
                              description: The profile for your codec. Not all profiles are valid for all codecs.
                            level:
                              type: string
                              description: The codec-dependent level - please reference ISO/IEC 14496-10, ISO/IEC 13818-2 etc.
                            preset:
                              type: string
                              description: Codec preset. See https://trac.ffmpeg.org/wiki/Encode/H.264 for examples.
                            max_bitrate_kb:
                              type: number
                              description: The maximum video bitrate in kilobits per second. Only valid for crf and vbr.
                            min_bitrate_kb:
                              type: number
                              description: The minimum video bitrate in kilobits per second. Only valid for crf and vbr.
                            vbv_buffer_size_kb:
                              type: number
                              description: The vbv buffer size in kilobits.
                            vbv_init_occupancy_kb:
                              type: number
                              description: The vbv init occupancy in kilobits.
                            exact_gop_frames:
                              type: integer
                              description: Use a fixed GOP size of this many frames.
                            idr_interval:
                              type: object
                              properties:
                                seconds:
                                  type: number
                                  description: Describes IDR frame interval in seconds.
                                frames:
                                  type: integer
                                  description: Describes IDR frame interval in frames.
                              additionalProperties: false
                              description: Describes a IDR frame interval, as count or seconds.
                            refs:
                              type: integer
                              description: The number of h.264 reference frames to used for future frames. If not set, the profile/level combination will determine the proper number of reference frames.
                            use_scene_detection:
                              type: boolean
                              description: Enable or disable scene change detection. Disabling will come with a steep penalty on video quality.
                            use_closed_gop:
                              type: boolean
                              description: Force use of closed GOPs.
                            bitrate_mode:
                              type: string
                              description: The bitrate mode for the codec. Values include cbr, vbr, and crf.
                            crf:
                              type: number
                              description: If the bitrate mode is crf, then this value must be specified. A Constant Rate Factor setting of 18 is considered excellent. Higher values equal lower quality. A change of +6 should roughly halve the resulting file size. See https://trac.ffmpeg.org/wiki/Encode/H.264
                            use_sequence_header_per_gop:
                              type: boolean
                              description: This will write a sequence header for each GOP.
                            closed_captions:
                              type: object
                              properties:
                                suppress:
                                  type: boolean
                                  enum:
                                  - true
                                  description: Suppress including captions in the output.
                              additionalProperties: false
                              description: Object describing the CC parameters for the targeted output.
                            prefetch_hint_sec:
                              type: number
                              description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                            x264_options:
                              type: string
                              description: x.264 specific codec options - please reference https://ffmpeg.org/ffmpeg-codecs.html#toc-libx264_002c-libx264rgb
                            filters:
                              type: array
                              title: Video Filters
                              description: The array of video filters to be applied to the output.
                              items:
                                type: object
                                description: The video filter object with a specific kind and payload format.
                                required:
                                - kind
                                - payload
                                properties:
                                  kind:
                                    type: string
                                  payload:
                                    type: object
                                anyOf:
                                - title: Image Overlay
                                  properties:
                                    kind:
                                      const: image_overlay
                                      description: 'Filter kind: ''image_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the image overlay filter.
                                      properties:
                                        image_url:
                                          type: string
                                          description: Defines the http(-s) of the image to be used.
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                        width:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                        height:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                        opacity:
                                          default: 1
                                          type: number
                                          description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                      additionalProperties: false
                                - title: Video Overlay
                                  properties:
                                    kind:
                                      const: video_overlay
                                      description: 'Filter kind: ''video_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the video overlay filter.
                                      properties:
                                        video_url:
                                          description: Defines the http(-s) of the video to be used.
                                          type: string
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'X position of the overlay. Can use expressions such as overlay_w-20 (overlay_w: width of the overlay).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'Y position of the overlay. Can use expressions such as overlay_h-20 (overlay_h: height of the overlay).'
                                        width:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Width of the overlay. Can use expressions such as source_w (width of the video source).
                                        height:
                                          oneOf:
                                          - type: number
                                          - type: string
                                          description: Height of the overlay. Can use expressions such as source_h (height of the video source).
                                        opacity:
                                          type: number
                                          default: 1
                                          description: Opacity of the overlay. 0 = fully transparent, 1 = fully opaque.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                        repeat_count:
                                          type: integer
                                          description: How many times to repeat the video overlay on the primary video. To repeat indefinitely use "-1".
                                      additionalProperties: false
                                - title: Text Overlay
                                  properties:
                                    kind:
                                      const: text_overlay
                                      description: 'Filter kind: ''text_overlay''.'
                                    payload:
                                      type: object
                                      description: Specifies the parameters for the text overlay filter.
                                      properties:
                                        text_url:
                                          description: Defines the http(-s) of the text file to be used.
                                          type: string
                                        font_url:
                                          description: Defines the http(-s) of the font file to be used.
                                          type: string
                                        x:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The x location to start the imprint. Can use expressions such as w-20 (w: width of the video).'
                                        y:
                                          default: 25
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The y location to start the imprint. Can use expressions such as h-20 (h: height of the video).'
                                        opacity:
                                          default: 1
                                          type: number
                                          description: Opacity of the text overlay. 0 = fully transparent, 1 = fully opaque.
                                        text:
                                          type: string
                                          description: The text string to be drawn.
                                        font:
                                          type: string
                                          description: 'The font descriptor (compliant with fontconfig). Examples: ''Sans'', ''URW Bookman L:style=Demi Bold Italic''.'
                                        font_color:
                                          default: black
                                          type: string
                                          description: 'The color to be used for drawing fonts. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        font_size:
                                          default: 16
                                          oneOf:
                                          - type: integer
                                          - type: string
                                          description: 'The font size in points. Can use expressions such as h/10 (w: width of the video, h: height of the video). A font size of 16 is the default. '
                                        tab_size:
                                          minimum: 1
                                          default: 4
                                          type: integer
                                          description: The size of the tab in number of spaces. The \t character is replaced with spaces.
                                        shadow_color:
                                          default: black
                                          type: string
                                          description: 'The color to be used for drawing a shadow behind the drawn text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        shadow_x:
                                          default: 0
                                          type: integer
                                          description: The x offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                        shadow_y:
                                          default: 0
                                          type: integer
                                          description: The y offset for the text shadow position with respect to the position of the text. It can be either positive or negative value.
                                        border_color:
                                          type: string
                                          description: 'The color to be used for drawing border around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        border_size:
                                          default: 0
                                          type: integer
                                          description: The width of the border to be drawn around the text.
                                        background_color:
                                          type: string
                                          description: 'The color to be used for drawing box around text. Example: black: opaque black, green@0.8: green with 0.8 alpha.'
                                        background_size:
                                          default: 0
                                          type: integer
                                          description: The width of the box to be drawn around the background.
                                        fix_bounds:
                                          default: false
                                          type: boolean
                                          description: Correct text coords to avoid clipping.
                                        start_sec:
                                          type: number
                                          description: Start point (in seconds) of the overlay.
                                        duration_sec:
                                          type: number
                                          description: Duration (in seconds) of the overlay.
                                        fadein_duration_sec:
                                          type: number
                                          description: Fade-in time (in seconds) of the overlay.
                                        fadeout_duration_sec:
                                          type: number
                                          description: Fade-out time (in seconds) of the overlay.
                                      additionalProperties: false
                                - properties:
                                    kind:
                                      enum:
                                      - color_convert
                                    payload:
                                      type: object
                                      properties:
                                        from:
                                          type: object
                                          properties:
                                            color_primaries:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - bt470m
                                              - bt470bg
                                              - smpte240m
                                              - film
                                              - bt2020
                                              - smpte428
                                              - smpte431
                                              - smpte432
                                              - jedec-p22
                                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                            color_trc:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - gamma22
                                              - bt470m
                                              - gamma28
                                              - bt470bg
                                              - smpte240m
                                              - linear
                                              - log
                                              - log_sqrt
                                              - smpte2084
                                              - iec61966_2_1
                                              - iec61966_2_4
                                              - bt2020_10bit
                                              - bt2020_12bit
                                              - hlg
                                              - arib-std-b67
                                            color_matrix:
                                              enum:
                                              - rgb
                                              - bt470bg
                                              - bt709
                                              - smpte170m
                                              - smpte240m
                                              - fcc
                                              - ycgco
                                              - bt2020c
                                              - bt2020nc
                                              - chroma-derived-nc
                                              - chroma-derived-c
                                              - ictcp
                                            ire_range_mode:
                                              enum:
                                              - full
                                              - limited
                                              - auto
                                              description: The IRE range for the source video. The default is auto.
                                            override_source_metadata:
                                              type: boolean
                                              default: false
                                          additionalProperties: false
                                        to:
                                          type: object
                                          properties:
                                            color_primaries:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - bt470m
                                              - bt470bg
                                              - smpte240m
                                              - film
                                              - bt2020
                                              - smpte428
                                              - smpte431
                                              - smpte432
                                              - jedec-p22
                                              description: Chroma coordinate reference of the source primaries. The default is determined by video size.
                                            color_trc:
                                              enum:
                                              - bt601
                                              - smpte170m
                                              - bt709
                                              - gamma22
                                              - bt470m
                                              - gamma28
                                              - bt470bg
                                              - smpte240m
                                              - linear
                                              - log
                                              - log_sqrt
                                              - smpte2084
                                              - iec61966_2_1
                                              - iec61966_2_4
                                              - bt2020_10bit
                                              - bt2020_12bit
                                              - hlg
                                              - arib-std-b67
                                            color_matrix:
                                              enum:
                                              - rgb
                                              - bt470bg
                                              - bt709
                                              - smpte170m
                                              - smpte240m
                                              - fcc
                                              - ycgco
                                              - bt2020c
                                              - bt2020nc
                                              - chroma-derived-nc
                                              - chroma-derived-c
                                              - ictcp
                                            ire_range_mode:
                                              enum:
                                              - full
                                              - limited
                                              - auto
                                              description: The IRE range for the source video. The default is auto.
                                          additionalProperties: false
                                        nominal_peak_luminance:
                                          type: integer
                                        preset:
                                          enum:
                                          - hdr_hlg_to_sdr
                                          - hdr_hlg_to_sdr_desat_mild
                                          - hdr_hlg_to_sdr_desat_medium
                                          - hdr_pq_to_sdr
                                          - hdr_pq_to_sdr_desat_mild
                                          - hdr_pq_to_sdr_desat_medium
                                          - sdr_to_hdr_pq_200nit
                                          - sdr_to_hdr_pq_300nit
                                        lut_file:
                                          type: object
                                          properties:
                                            url:
                                              type: string
                                            mime:
                                              type: string
                                          required:
                                          - url
                                          additionalProperties: false
                                      additionalProperties: false
                                  additionalProperties: false
                          additionalProperties: false
                          description: The video encoding parameters.
                    audio:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: string
                            description: ID of the audio track.
                          program_name:
                            type: string
                            description: Program name of the audio track.
                          codec:
                            enum:
                            - aac
                            - aac_lc
                            - he_aac1
                            - he_aac2
                            - ac4
                            - ddp_joc
                            description: The audio codec to use for the track.
                          bitrate_kb:
                            type: number
                            description: The audio bitrate in kilobits per second. This is the average bitrate in the case of vbr.
                          channels:
                            type: integer
                            description: The number of audio channels.
                          sample_rate:
                            type: integer
                            description: The audio sample rate in Hz. Typical values are 44100 and 48000. Omit to use the source sample rate.
                          auto_generate_silence_track:
                            type: boolean
                            description: 'This fills the track with silence. '
                          filters:
                            type: array
                            title: Audio Filters
                            description: The array of audio filters to be applied to the output.
                            items:
                              type: object
                              description: The audio filter object with a specific kind and payload format.
                              required:
                              - payload
                              properties:
                                kind:
                                  type: string
                                payload:
                                  type: object
                              anyOf:
                              - title: normalize
                                type: object
                                properties:
                                  kind:
                                    const: normalize
                                  payload:
                                    type: object
                                    description: Specifies parameters for the image overlay filter.
                                    properties:
                                      kind:
                                        const: ebur128
                                      analyze_vurl:
                                        type: string
                                      payload:
                                        type: object
                                        properties:
                                          source:
                                            type: object
                                            properties:
                                              integrated_lufs:
                                                type: number
                                                minimum: -99
                                                maximum: 0
                                              loudness_lra_lufs:
                                                type: number
                                                minimum: 0
                                                maximum: 99
                                              true_peak_dbfs:
                                                type: number
                                                minimum: -99
                                                maximum: 99
                                              integrated_threshold_lufs:
                                                type: number
                                                minimum: -99
                                                maximum: 0
                                              offset:
                                                type: number
                                                minimum: -99
                                                maximum: 99
                                          integrated_lufs:
                                            type: number
                                            minimum: -70
                                            maximum: -5
                                          loudness_lra_lufs:
                                            type: number
                                            minimum: 1
                                            maximum: 50
                                          true_peak_dbfs:
                                            type: number
                                            minimum: -9
                                            maximum: 0
                                          allow_unprecise_mode:
                                            type: boolean
                                            default: false
                                    not:
                                      required:
                                      - analyze_vurl
                                      - payload
                                    required:
                                    - kind
                                    additionalProperties: false
                                required:
                                - kind
                                additionalProperties: false
                          language:
                            type: string
                            description: The audio language code in ISO-639 notation.
                          prefetch_hint_sec:
                            type: number
                            description: This determines how much to encode ahead of the current time during playback. It can be separately determined for the audio and video streams.
                          abr_map:
                            type: object
                            properties:
                              hls_audio_group:
                                type: string
                              is_hls_group_default:
                                type: boolean
                                default: false
                              content:
                                type: string
                              compatibility_group:
                                type: string
                            required:
                            - content
                            anyOf:
                            - required:
                              - hls_audio_group
                            - required:
                              - compatibility_group
                            additionalProperties: false
                          ddp_joc_upmix_mode:
                            enum:
                            - remap
                            - upmix
                            default: upmix
                            description: When upconverting to Dolby Atmos, this specifies the type of upmixing for DD+JOC encoding.
                        additionalProperties: false
                        description: Each audio track is an element of the array.
                  additionalProperties: false
                  examples:
                  - container:
                      kind: hls
                      segment_duration_sec: 2
                    video:
                    - width: 1280
                      height: 720
                      bitrate_kb: 2500
                      frame_rate: 30000/1001
                    audio:
                    - codec: aac
                      bitrate_kb: 128
                qc:
                  type: object
                  properties:
                    pre:
                      type: object
                      properties:
                        conditions:
                          $id: '#/$defs/rasp_shared/definitions/qc/properties/post/properties/conditions'
                      additionalProperties: false
                  additionalProperties: false
                timing_configuration:
                  type: object
                  properties:
                    player_buffer_sec:
                      type: number
                      maximum: 120
                      minimum: 0
                      description: This setting is how long your player's buffer is set to in seconds.
                    expected_player_start_sec:
                      type: number
                      maximum: 120
                      minimum: 0
                      description: 'This is a hint on how soon after the conformance call you expect your player to start. '
                  additionalProperties: false
                  description: 'Optional settings to tune specific timing characteristics for your ad availability. '
                access:
                  type: object
                  properties:
                    allow_public_proxy:
                      type: boolean
                      default: false
                      description: If set to true, allows the conform endpoint to be used in proxy mode via GET requests, unauthenticated.
                  additionalProperties: false
              examples:
              - &id002
                container:
                  kind: hls
                  segment_duration_sec: 2
                video:
                - width: 1280
                  height: 720
                  bitrate_kb: 2500
                  frame_rate: 30000/1001
                audio:
                - codec: aac
                  bitrate_kb: 128
            example: *id002
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      responses:
        '200':
          description: OK
    delete:
      summary: Delete Ad Profile
      tags:
      - Ad Engine
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      responses:
        '200':
          description: OK
    get:
      summary: Get Ad Profile
      tags:
      - Ad Engine
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      responses:
        '200':
          description: OK
  /ad-engine/profiles:
    get:
      summary: List Ad Profiles
      tags:
      - Ad Engine
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      responses:
        '200':
          description: OK
  /ad-engine/conform:
    get:
      summary: Create Conformed Ad
      tags:
      - Ad Engine
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: false
        schema:
          type: string
      - name: player_buffer_sec
        in: query
        required: false
        schema:
          type: number
          maximum: 120
          minimum: 0
          description: This setting is how long your player's buffer is set to in seconds.
        description: This setting is how long your player's buffer is set to in seconds.
      - name: expected_player_start_sec
        in: query
        required: false
        schema:
          type: number
          maximum: 120
          minimum: 0
          description: 'This is a hint on how soon after the conformance call you expect your player to start. '
        description: 'This is a hint on how soon after the conformance call you expect your player to start. '
      - name: url
        in: query
        required: true
        schema:
          type: string
          description: The URL of the ad to be conformed.
          examples:
          - https://ad_server/my_ad.mp4
        description: The URL of the ad to be conformed.
      - name: profile
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      - name: output_format
        in: query
        required: false
        schema:
          enum:
          - media
          - json
          - vast
          description: Output format for the conformed ad. 'media' produces just the media file, 'vast' produces a VAST XML referencing the media file, and 'json' returns a JSON document describing the virtual URL which was created.
        description: Output format for the conformed ad. 'media' produces just the media file, 'vast' produces a VAST XML referencing the media file, and 'json' returns a JSON document describing the virtual URL which was created.
      - name: delivery
        in: query
        required: false
        schema:
          enum:
          - jit
          - files
          description: Delivery type for the conformed ad. 'jit' delivers the ad virtualized, in a proxy fashion, while 'files' delivers it as a file to a cloud storage destination. Note that 'files' delivery requires additional configuration (delivery_root_url and delivery_credentials_key).
        description: Delivery type for the conformed ad. 'jit' delivers the ad virtualized, in a proxy fashion, while 'files' delivers it as a file to a cloud storage destination. Note that 'files' delivery requires additional configuration (delivery_root_url and delivery_credentials_key).
      - name: delivery_root_url
        in: query
        required: false
        schema:
          type: string
          description: Required when 'delivery' is set to 'files'. Specifies the destination root URL for the output files.
        description: Required when 'delivery' is set to 'files'. Specifies the destination root URL for the output files.
      - name: delivery_credentials_key
        in: query
        required: false
        schema:
          type: string
          description: Required when 'delivery' is set to 'files'. Specifies the credentials key to use for accessing the storage destination. The credentials must be pre-configured in the system
        description: Required when 'delivery' is set to 'files'. Specifies the credentials key to use for accessing the storage destination. The credentials must be pre-configured in the system
      responses:
        '200':
          description: OK
  /ad-engine/conform-pod:
    post:
      summary: Create Conformed Ad Pod
      tags:
      - Ad Engine
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: dae conform pod configuration
              properties:
                follow_url_sequence:
                  type: boolean
                  default: true
                  description: If set to true, the urls will be combined in the provided sequence.
                asset_urls:
                  type: array
                  description: array of urls with single asset
                  items:
                    anyOf:
                    - type: object
                      properties:
                        type:
                          _comment: better way to go about this?
                          enum:
                          - vast
                          default: vast
                        url:
                          type: string
                      required:
                      - type
                      - url
                    - type: object
                      properties:
                        type:
                          _comment: better way to go about this?
                          enum:
                          - media
                          default: media
                        url:
                          type: string
                        output_vast_properties:
                          type: object
                          properties:
                            ad_system:
                              type: object
                              description: https://iabtechlab.com/wp-content/uploads/2022/09/VAST_4.3.pdf#page=40&zoom=100,84,521
                              properties:
                                name:
                                  type: string
                                version:
                                  type: string
                              required:
                              - name
                            ad_title:
                              type: string
                              description: https://iabtechlab.com/wp-content/uploads/2022/09/VAST_4.3.pdf#page=40&zoom=100,84,844
                            ad_serving_id:
                              type: string
                              description: https://iabtechlab.com/wp-content/uploads/2022/09/VAST_4.3.pdf#page=41&zoom=100,84,202
                            impression_list:
                              type: array
                              description: https://iabtechlab.com/wp-content/uploads/2022/09/VAST_4.3.pdf#page=41&zoom=100,84,789
                              items:
                                type: object
                                properties:
                                  url:
                                    type: string
                                  id:
                                    type: string
                                required:
                                - url
                            creative_linear:
                              _comment: Rohith 2025 June 23 @ove-dae-question to discuss on details reasonable to get from the consumer, and details that can be filled by RASP based on media this is for example/placeholder
                              type: object
                              description: https://iabtechlab.com/wp-content/uploads/2022/09/VAST_4.3.pdf#page=47&zoom=100,84,245
                              properties:
                                duration:
                                  oneOf:
                                  - type: string
                                  - type: number
                              required: []
                          required: []
                          _comment: lets not make anything mandatory now, need to find out what params not available will actually block the VAST from being played and then we can make those parameters required
                      required:
                      - type
                      - url
              required:
              - asset_urls
              additionalProperties: false
      parameters:
      - name: x-rasp-auth-token
        in: header
        required: true
        schema:
          type: string
      - name: player_buffer_sec
        in: query
        required: false
        schema:
          type: number
          maximum: 120
          minimum: 0
          description: This setting is how long your player's buffer is set to in seconds.
        description: This setting is how long your player's buffer is set to in seconds.
      - name: expected_player_start_sec
        in: query
        required: false
        schema:
          type: number
          maximum: 120
          minimum: 0
          description: 'This is a hint on how soon after the conformance call you expect your player to start. '
        description: 'This is a hint on how soon after the conformance call you expect your player to start. '
      - name: profile
        in: query
        required: true
        schema:
          type: string
          description: Profile key used to register the encode profile.
          examples:
          - ad_profile_1
        description: Profile key used to register the encode profile.
      - name: output_format
        in: query
        required: false
        schema:
          enum:
          - media
          - json
          - vast
      - name: delivery
        in: query
        required: false
        schema:
          enum:
          - jit
          - files
          description: Delivery type for the conformed ad. 'jit' delivers the ad virtualized, in a proxy fashion, while 'files' delivers it as a file to a cloud storage destination. Note that 'files' delivery requires additional configuration (delivery_root_url and delivery_credentials_key).
        description: Delivery type for the conformed ad. 'jit' delivers the ad virtualized, in a proxy fashion, while 'files' delivers it as a file to a cloud storage destination. Note that 'files' delivery requires additional configuration (delivery_root_url and delivery_credentials_key).
      - name: delivery_root_url
        in: query
        required: false
        schema:
          type: string
          description: Required when 'delivery' is set to 'files'. Specifies the destination root URL for the output files.
        description: Required when 'delivery' is set to 'files'. Specifies the destination root URL for the output files.
      - name: delivery_credentials_key
        in: query
        required: false
        schema:
          type: string
          description: Required when 'delivery' is set to 'files'. Specifies the credentials key to use for accessing the storage destination. The credentials must be pre-configured in the system
        description: Required when 'delivery' is set to 'files'. Specifies the credentials key to use for accessing the storage destination. The credentials must be pre-configured in the system
      responses:
        '200':
          description: OK
components:
  schemas: {}
