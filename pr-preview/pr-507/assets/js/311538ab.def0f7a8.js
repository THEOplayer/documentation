"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["36574"],{674309(e,i,t){t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});var n=t(353850),a=t(474848),s=t(28453);let r={title:"OptiView Player SDK",sidebar_position:1},l="Getting started with THEOPlayer for Millicast on Web",o={},c=[{value:"Usage",id:"usage",level:2},{value:"Add a Millicast source",id:"add-a-millicast-source",level:3},{value:"Controlling ABR Strategies",id:"controlling-abr-strategies",level:3},{value:"Additional Player Configuration",id:"additional-player-configuration",level:3},{value:"Recommended Connection Configurations",id:"recommended-connection-configurations",level:3},{value:"ABR Range Control",id:"abr-range-control",level:4},{value:"Playout Delay",id:"playout-delay",level:4},{value:"More information",id:"more-information",level:2}];function d(e){let i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"getting-started-with-theoplayer-for-millicast-on-web",children:"Getting started with THEOPlayer for Millicast on Web"})}),"\n",(0,a.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{children:["Follow ",(0,a.jsx)(i.a,{href:"pathname:///theoplayer/getting-started/sdks/web/getting-started/",children:"our Getting Started guide"})," to set up THEOplayer in your web app or website.\nThe Millicast integration is available in the main ",(0,a.jsx)(i.a,{href:"https://www.npmjs.com/package/theoplayer",children:"theoplayer"})," package on npm."]}),"\n",(0,a.jsx)(i.li,{children:"Add a Millicast source to your player's source."}),"\n"]}),"\n",(0,a.jsx)(i.h3,{id:"add-a-millicast-source",children:"Add a Millicast source"}),"\n",(0,a.jsxs)(i.p,{children:["After setting up your THEOplayer on your web page, set its source to a ",(0,a.jsx)(i.code,{children:"SourceDescription"})," containing a ",(0,a.jsx)(i.code,{children:"MillicastSource"}),".\nYou'll need a Millicast account ID and stream name to identify your Millicast stream:"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"const player = new THEOplayer.Player(element, configuration);\nplayer.source = {\n  sources: {\n    type: 'millicast',\n    src: 'multiview',\n    streamAccountId: 'k9Mwad',\n    subscriberToken: '<token>', // This is only required for subscribing to secure streams and should be omitted otherwise.\n  },\n};\n"})}),"\n",(0,a.jsx)(i.h3,{id:"controlling-abr-strategies",children:"Controlling ABR Strategies"}),"\n",(0,a.jsxs)(i.p,{children:["For greater control over how Adaptive Bitrate (ABR) behaves, applications can set the ABR strategies for WebRTC. This feature provides the ability to choose on a viewer-by-viewer basis how aggressively to apply ABR switching when ABR streaming is used. It is inline with ",(0,a.jsx)(i.a,{href:"https://docs.optiview.dolby.com/theoplayer/v9/api-reference/web/interfaces/ABRStrategyConfiguration.html",children:"OptiView Player's existing strategies"}),". For now, users must set this value when choosing playback to utilize the feature, in the future we will set ",(0,a.jsx)(i.code,{children:"quality"})," to be the default."]}),"\n",(0,a.jsx)(i.p,{children:"The options are:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"quality"}),": This strategy is more aggressive at up-switching and will try to maximize available bandwidth at any given moment. It tries to connect on the highest quality possible and stay there. Recommended for audiences with good networking and where quality is most important."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"bandwidth"}),": This strategy is in between ",(0,a.jsx)(i.code,{children:"quality"})," and ",(0,a.jsx)(i.code,{children:"performance"})," and isn't as aggressive as ",(0,a.jsx)(i.code,{children:"quality"}),". It will more quickly switch down layers in cases of poor network and will attempt to switch back up more conservatively. It is recommended as a balance between ",(0,a.jsx)(i.code,{children:"quality"})," and ",(0,a.jsx)(i.code,{children:"performance"})]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"performance"}),": This strategy will prioritize smooth playback over highest quality. It will start with the lower layer available and will switch up more slowly when network performance is consistent and stable."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.em,{children:"null"}),": Omitting this value will preserve the legacy behavior of our ABR algorithm as it is today"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"As this is a new feature, we welcome customer feedback."}),"\n",(0,a.jsxs)(i.p,{children:["Set this right after initializing your player by configuring the ",(0,a.jsx)(i.code,{children:"abr"})," object and before setting the ",(0,a.jsx)(i.code,{children:"player.source"}),":"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"player.abr.strategy = {\n  type: 'bandwidth',\n};\n"})}),"\n",(0,a.jsxs)(i.p,{children:["For additional control you can specify to the player what estimated bandwidth value the player should start with to avoid auto-detection when the player first loads the source. Add the ",(0,a.jsx)(i.code,{children:"metadata.bitrate"})," value in bits-per-second. This example shows selecting the ",(0,a.jsx)(i.code,{children:"bandwidth"})," strategy with a starting bitrate of 1.2 Mbps."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"player.abr.strategy = {\n  type: 'bandwidth',\n  metadata: {\n    bitrate: 1200000,\n  },\n};\n"})}),"\n",(0,a.jsx)(i.h3,{id:"additional-player-configuration",children:"Additional Player Configuration"}),"\n",(0,a.jsxs)(i.p,{children:["Optionally, you can provide additional configuration to the source, specific for working with Millicast streams. To\nconfigure these settings, add a ",(0,a.jsx)(i.code,{children:"connectOptions"})," property to the source object and specify the options."]}),"\n",(0,a.jsxs)(i.p,{children:["In the example below, the configuration is used to disable any audio from the Millicast stream.\nFor an exhaustive list of these options, visit the\n",(0,a.jsx)(i.a,{href:"https://millicast.github.io/millicast-sdk/View.html#connect",children:"documentation"}),"."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"player.source = {\n  sources: {\n    type: 'millicast',\n    /* ... */\n    connectOptions: {\n      disableAudio: true,\n      /* ... */\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(i.h3,{id:"recommended-connection-configurations",children:"Recommended Connection Configurations"}),"\n",(0,a.jsx)(i.h4,{id:"abr-range-control",children:"ABR Range Control"}),"\n",(0,a.jsxs)(i.p,{children:["For users viewing streams with multiple quality layers available, you may want to limit the maximum resolution of the stream they can consume. This could be to reduce egress traffic for certain users or to improve performance on low-end devices. The ABR range can be adjusted when connecting to a stream via the ",(0,a.jsx)(i.code,{children:"layer"})," parameter by specifying a ",(0,a.jsx)(i.code,{children:"maxHeight"})," or ",(0,a.jsx)(i.code,{children:"maxWidth"})," that the client can consume."]}),"\n",(0,a.jsxs)(i.p,{children:["For example, to limit a client to a maximum resolution of 720p, you would specify a ",(0,a.jsx)(i.code,{children:"maxHeight"})," of ",(0,a.jsx)(i.code,{children:"720"}),":"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"connectOptions: {\n   layer: {\n      maxHeight: 720,\n   },\n}\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Setting a ",(0,a.jsx)(i.code,{children:"maxHeight"})," of ",(0,a.jsx)(i.code,{children:"0"})," will use the full ABR range available. Setting the ",(0,a.jsx)(i.code,{children:"maxHeight"})," to an arbitrarily low value, such as ",(0,a.jsx)(i.code,{children:"20"}),", will force the user onto the layer with the lowest resolution."]}),"\n",(0,a.jsx)(i.h4,{id:"playout-delay",children:"Playout Delay"}),"\n",(0,a.jsxs)(i.p,{children:["Because of the complexities of last-mile delivery, some packets for video playback may arrive late. In higher-latency streaming protocols such as HESP or HLS, a client buffer helps smooth out playback so that these minor fluctuations are unnoticeable. Dolby's real-time streaming solution supports adding a playout buffer, which can similarly assist with these fluctuations. The ",(0,a.jsx)(i.code,{children:"forcePlayoutDelay"})," buffer uses a ",(0,a.jsx)(i.code,{children:"min"})," and a ",(0,a.jsx)(i.code,{children:"max"})," value measured in milliseconds (ms) to specify the range the playout buffer should occupy. The player buffer will then dynamically shift between the ",(0,a.jsx)(i.code,{children:"min"})," and ",(0,a.jsx)(i.code,{children:"max"})," values depending on client conditions."]}),"\n",(0,a.jsxs)(i.p,{children:["You can determine how many frames of buffer you are using by dividing 1 second by your frame rate. For example, if your frame rate is 30fps, you would divide ",(0,a.jsx)(i.code,{children:"1s/30fps"}),", showing that each frame has a duration of ",(0,a.jsx)(i.code,{children:"0.0333"})," or ",(0,a.jsx)(i.code,{children:"33"})," milliseconds."]}),"\n",(0,a.jsx)(i.p,{children:"This buffer is specified when connecting to a stream as shown below:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-javascript",children:"connectOptions: {\n   forcePlayoutDelay: {\n      min: 50,\n      max: 120,\n   },\n}\n"})}),"\n",(0,a.jsx)(i.p,{children:"The performance gains of the buffer diminish significantly beyond a buffer of 300ms. Typically, the team recommends a buffer between 0 and 5 frames for smooth playback."}),"\n",(0,a.jsx)(i.h2,{id:"more-information",children:"More information"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:(0,a.jsx)(i.a,{href:"pathname:///theoplayer/v9/api-reference/web/interfaces/MillicastSource.html",children:"API references"})}),"\n"]})]})}function h(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453(e,i,t){t.d(i,{R:()=>r,x:()=>l});var n=t(296540);let a={},s=n.createContext(a);function r(e){let i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:i},e.children)}},353850(e){e.exports=JSON.parse('{"id":"playback/players-sdks/web/player/index","title":"OptiView Player SDK","description":"Usage","source":"@site/millicast/playback/players-sdks/web/player/index.mdx","sourceDirName":"playback/players-sdks/web/player","slug":"/playback/players-sdks/web/player/","permalink":"/documentation/pr-preview/pr-507/millicast/playback/players-sdks/web/player/","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/millicast/playback/players-sdks/web/player/index.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"OptiView Player SDK","sidebar_position":1},"sidebar":"millicast","previous":{"title":"Players and SDKs","permalink":"/documentation/pr-preview/pr-507/millicast/playback/players-sdks/"},"next":{"title":"Millicast diagnostics","permalink":"/documentation/pr-preview/pr-507/millicast/web-player-diagnostics"}}')}}]);