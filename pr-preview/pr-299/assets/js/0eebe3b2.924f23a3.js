"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["82716"],{98867:function(e,t,i){i.d(t,{ZP:function(){return o},d$:function(){return s}});var n=i(85893),r=i(50065);let s=[];function a(e){let t={a:"a",admonition:"admonition",code:"code",p:"p",...(0,r.a)(),...e.components};return(0,n.jsx)(t.admonition,{title:"Getting Started with REST APIs",type:"tip",children:(0,n.jsxs)(t.p,{children:["Review the REST API ",(0,n.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/getting-started/using-rest-apis",children:"Getting Started"})," tutorial for details on retrieving your API Key for authenticating your API calls. The examples included here use the ",(0,n.jsx)(t.code,{children:"cURL"})," command-line utility. Alternatively, there are ",(0,n.jsx)(t.a,{href:"https://www.postman.com/dolbyio/dolby-io-streaming-apis/",children:"Postman Collections"})," and a ",(0,n.jsx)(t.a,{href:"https://github.com/DolbyIO/dolbyio-rest-apis-client-node",children:"REST Client for Node"})," that may be helpful for your project."]})})}function o(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},83599:function(e,t,i){i.r(t),i.d(t,{default:()=>x,frontMatter:()=>d,metadata:()=>n,assets:()=>u,toc:()=>p,contentTitle:()=>h});var n=JSON.parse('{"id":"distribution/drm","title":"DRM","description":"Digital Rights Management (DRM) is a security mechanism that helps protect premium content or intellectual property within a stream from being shared without permission. This mechanism prevents bad actors from screen sharing, taking screenshots, and other unauthorized distribution.","source":"@site/millicast/distribution/drm.mdx","sourceDirName":"distribution","slug":"/distribution/drm","permalink":"/documentation/pr-preview/pr-299/millicast/distribution/drm","draft":false,"unlisted":true,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/millicast/distribution/drm.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"DRM","sidebar_position":3,"unlisted":true},"sidebar":"millicast"}'),r=i("85893"),s=i("50065");function a(e){let t={a:"a",admonition:"admonition",p:"p",...(0,s.a)(),...e.components};return(0,r.jsx)(t.admonition,{title:"Premium Feature",type:"warning",children:(0,r.jsxs)(t.p,{children:["This feature is a premium option that must be enabled on your plan. If you would like to use this capability on your project, please ",(0,r.jsx)(t.a,{href:"https://support.dolby.io/hc/en-au",children:"submit a support ticket"})," or reach out to your ",(0,r.jsx)(t.a,{href:"https://dolby.io/contact/",children:"sales/solutions"})," contact."]})})}function o(e={}){let{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}let l=i.p+"assets/images/9fa71d5693c8953b167e73d4ce9ff8cab0275b3b54744eed0373c0128dfc37df-image-9e1d048b132884e14a0412ef96fc9b5c.png";var c=i("98867");let d={title:"DRM",sidebar_position:3,unlisted:!0},h=void 0,u={},p=[{value:"How It Works",id:"how-it-works",level:2},{value:"Enabling DRM on a Stream",id:"enabling-drm-on-a-stream",level:3},{value:"Using the REST API",id:"using-the-rest-api",level:4},...c.d$,{value:"Viewing a DRM Stream",id:"viewing-a-drm-stream",level:3},{value:"Using the Hosted Player",id:"using-the-hosted-player",level:4},{value:"Using the Web SDK",id:"using-the-web-sdk",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Device Compatibility",id:"device-compatibility",level:3},{value:"Feature Compatibility",id:"feature-compatibility",level:3},{value:"OBS Broadcast Failing to Playback",id:"obs-broadcast-failing-to-playback",level:3},{value:"Green Video Playback",id:"green-video-playback",level:3}];function m(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Digital Rights Management (DRM)"})," is a security mechanism that helps protect premium content or intellectual property within a stream from being shared without permission. This mechanism prevents bad actors from screen sharing, taking screenshots, and other unauthorized distribution."]}),"\n",(0,r.jsxs)(t.p,{children:["DRM is accomplished through an extra layer of encryption before distributing content for playback. When configuring your ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/managing-your-tokens",children:"Publish Tokens"})," you enable DRM for any associated streams. The video player will contact a licensing server to retrieve a key to decrypt the audio and video."]}),"\n",(0,r.jsx)(t.p,{children:"Support is available for:"}),"\n",(0,r.jsxs)("ul",{className:"checkBoxList",children:[(0,r.jsx)("li",{children:"Video codecs including H.264"}),(0,r.jsx)("li",{children:"Broadcast protocols including SRT, RTMP"}),(0,r.jsx)("li",{children:"DRM standards including Widevine, Fairplay"})]}),"\n",(0,r.jsx)(t.p,{children:"Without authorized access, viewers will typically only observe a black or green screen without any audio."}),"\n","\n",(0,r.jsx)(o,{}),"\n",(0,r.jsx)(t.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsx)(t.p,{children:"When streaming with DRM enabled, the content is distributed with an additional level of encryption. To decrypt and view the media, the player and platform must enforce protections and be able to fetch a license that is used to decrypt."}),"\n","\n",(0,r.jsx)("div",{class:"center-container",children:(0,r.jsx)("img",{src:l,width:"500"})}),"\n",(0,r.jsx)(t.p,{children:"In order to enable DRM, you will need to follow a few steps:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Use the ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/about-dash",children:"Streaming Dashboard"})," or ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/api/publish-token-v-1-create-token",children:"/api/publish_token"})," REST API to set the ",(0,r.jsx)(t.code,{children:"drm"})," parameter to ",(0,r.jsx)(t.strong,{children:"true"}),". You should also be sure to use a ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/subscribe-tokens",children:"Subscribe Token"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Use the ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/playback/players-sdks/web/sdk/",children:"Web"})," SDK or ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/playback/hosted-viewer",children:"Hosted Millicast Player"})," with the appropriate DRM setting enabled."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Dolby will manage the Customer Right Tokens (CRT) aka licenses for your account."}),"\n",(0,r.jsx)(t.admonition,{title:"Additional Charges - Licenses",type:"danger",children:(0,r.jsxs)(t.p,{children:["This feature will incur additional charges for licenses. If you would like to use this capability on your projects, please be aware of the pricing impact or reach out to your ",(0,r.jsx)(t.a,{href:"https://dolby.io/contact/",children:"sales/solutions"})," contact with any questions."]})}),"\n",(0,r.jsx)(t.h3,{id:"enabling-drm-on-a-stream",children:"Enabling DRM on a Stream"}),"\n",(0,r.jsx)(t.h4,{id:"using-the-rest-api",children:"Using the REST API"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/api/publish-token-v-1-create-token",children:"/api/publish_token"})," endpoint can be used to create or modify existing publish tokens. The ",(0,r.jsx)(t.code,{children:"drm"})," parameter is used to indicate whether or not a stream should be protected with DRM."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",metastring:'title="Create New Token with DRM"',children:'POST https://api.millicast.com/api/publish_token\n{\n  "label": "drm-test",\n  "streams": [{\n    "streamName": "drm-test"\n  }],\n  "drm": true,\n  "subscribeRequiresAuth": true\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",metastring:'title="Update Token with DRM"',children:'PUT https://api.millicast.com/api/publish_token\n{\n  "drm": true,\n  "subscriberRequiresAuth": true\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["When updating an existing token, you should also enable the ",(0,r.jsx)(t.code,{children:"subscriberRequiresAuth"})," setting."]}),"\n","\n",(0,r.jsx)(c.ZP,{}),"\n",(0,r.jsx)(t.h3,{id:"viewing-a-drm-stream",children:"Viewing a DRM Stream"}),"\n",(0,r.jsx)(t.h4,{id:"using-the-hosted-player",children:"Using the Hosted Player"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/playback/hosted-viewer",children:"Hosted Player"})," has an option to enable DRM. Whether it is a standalone web application or embedded in an iframe within your site you will need to add the ",(0,r.jsx)(t.code,{children:"&drm"})," query parameter to the URL."]}),"\n",(0,r.jsx)(t.p,{children:"For example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"https://viewer.millicast.com?streamId={accountId/streamName}&token={subscriberToken}&drm\n"})}),"\n",(0,r.jsx)(t.h4,{id:"using-the-web-sdk",children:"Using the Web SDK"}),"\n",(0,r.jsx)(t.p,{children:"There are a few things to know when setting up playback."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The HTML must have discrete ",(0,r.jsx)(t.strong,{children:"Video"})," and ",(0,r.jsx)(t.strong,{children:"Audio"})," elements."]}),"\n",(0,r.jsxs)(t.li,{children:["The subscribe token should be in the ",(0,r.jsx)(t.code,{children:"getSubscriber"})," request."]}),"\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.code,{children:"enableDRM"})," parameter should be provided to the connection options."]}),"\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.code,{children:"active"})," broadcast event should be enabled."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Here is an example of initializing the subscriber for a DRM stream:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"const tokenGenerator = () => Director.getSubscriber(streamName, accountId, subscriberToken, enableDRM);\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You should listen for the ",(0,r.jsx)(t.code,{children:"active"})," broadcast event when you connect in order to verify the DRM credentials with the ",(0,r.jsx)(t.strong,{children:"initial value (IV)"})," and ",(0,r.jsx)(t.strong,{children:"key"})," for decrypting the content."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"await viewer.connect({\n  drm: true,\n  events: ['active', 'inactive', 'layers'],\n});\n\nviewer.on('broadcastEvent', (event) => {\n  const { name, data } = event;\n  switch (name) {\n    case 'active':\n      if (event.data.encryption) {\n        const drmOptions = {\n          videoElement: document.querySelector('video'),\n          audioElement: document.querySelector('audio'),\n          videoEncryptionParams: event.data.encryption,\n          videoMid: '0',\n        };\n        // if there are audio tracks in your stream, add the next two lines\n\n        const audioTrackInfo = event.data.tracks.find((track) => track.type === 'audio');\n        if (audioTrackInfo) {\n          drmOptions.audioMid = audioTrackInfo.mediaId;\n        }\n        viewer.configureDRM(drmOptions);\n      }\n  }\n});\n"})}),"\n",(0,r.jsx)(t.p,{children:"You then can project the source onto your media elements on a web app."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"await viewer.project(sourceId, tracksMapping);\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"Sample Code and Reference",type:"tip",children:(0,r.jsxs)(t.p,{children:["For a full reference implementation sample, please review the ",(0,r.jsx)(t.a,{href:"https://github.com/millicast/millicast-sdk/blob/main/packages/millicast-multiview-demo/src/multiviewer.js",children:"millicast-multiview-demo"})," which demonstrates the use of DRM."]})}),"\n",(0,r.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(t.p,{children:"To diagnose DRM issues such as unauthorized sharing or an inability to view content, review the details of the publishing settings, such as:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Protocol: RTMP or SRT"}),"\n",(0,r.jsx)(t.li,{children:"Settings: Bitrate, FPS, Resolution, or Simulcast setting"}),"\n",(0,r.jsx)(t.li,{children:"Licenses: An account in good standing with enough licenses for each player instance"}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"device-compatibility",children:"Device Compatibility"}),"\n",(0,r.jsx)(t.p,{children:"Support for most popular browsers is available on both desktop and mobile devices."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Device / Browser"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Desktop"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Mobile"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Safari"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Chrome"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Edge"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u2705"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Firefox"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u26A0\uFE0F"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u26A0\uFE0F"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Native Android"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"N/A"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u26A0\uFE0F"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Native iOS"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"N/A"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"\u274C"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"There are some specific scenarios that limit compatibility with Firefox. Similarly, L3 Widevine is the default configuration due to browser limitations. Please reach out to your account team to discuss the latest status and impact this will have on your plans."}),"\n",(0,r.jsx)(t.h3,{id:"feature-compatibility",children:"Feature Compatibility"}),"\n",(0,r.jsx)(t.p,{children:"The use of DRM will limit some of the other platform features."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/distribution/cloud-transcoder",children:"Cloud Transcoder"})," for ABR broadcasts are not compatible with DRM at this time."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/broadcast/multi-source-broadcasting",children:"Multi-Source Broadcasting"})," with multiple contribution ingests will not use DRM for each layer."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/analytics-api",children:"Analytics"})," around video stats are not available from encrypted content."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-299/millicast/live-monitoring",children:"Live Monitoring"})," dashboard will be unable to allow a preview of streams without consuming a license so is unavailable."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Please reach out to your account team to discuss the latest status if this will impact your production plans."}),"\n",(0,r.jsx)(t.h3,{id:"obs-broadcast-failing-to-playback",children:"OBS Broadcast Failing to Playback"}),"\n",(0,r.jsx)(t.p,{children:"If you are sending a source from OBS and playback doesn't appear to be working as expected, please ensure that you do not have an Active Scene in OBS that could be doing a screen capture or screen recording. Even if that is not the scene being used to stream for this particular event, if a screen capture is happening in the background DRM will still block playback."}),"\n",(0,r.jsx)(t.h3,{id:"green-video-playback",children:"Green Video Playback"}),"\n",(0,r.jsx)(t.p,{children:"Typically when a license check fails, content will be presented as a black screen. In some cases, a green screen may appear instead and could also indicate video decoding is not working properly. Contact support if that is the case and you need additional help troubleshooting."})]})}function x(e={}){let{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},50065:function(e,t,i){i.d(t,{Z:function(){return o},a:function(){return a}});var n=i(67294);let r={},s=n.createContext(r);function a(e){let t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);