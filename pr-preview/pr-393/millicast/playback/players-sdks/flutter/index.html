<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-millicast docs-version-current docs-doc-page docs-doc-id-playback/players-sdks/flutter/index" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Flutter | Dolby OptiView Documentation</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=robots content="noindex, nofollow"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter/><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-millicast-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-millicast-current><meta data-rh=true property=og:title content="Flutter | Dolby OptiView Documentation"><meta data-rh=true name=description content="Dolby.io Streaming APIs support creating iOS and Android applications using the Flutter SDK."><meta data-rh=true property=og:description content="Dolby.io Streaming APIs support creating iOS and Android applications using the Flutter SDK."><link data-rh=true rel=icon href=/documentation/pr-preview/pr-393/img/favicon.ico><link data-rh=true rel=canonical href=https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter/><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter/ hreflang=en><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter/ hreflang=x-default><link data-rh=true rel=preconnect href=https://7HRS9V6FEL-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/","name":"Real-time Streaming","position":1},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback","name":"Playback","position":2},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/","name":"Players and SDKs","position":3},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter","name":"Flutter","position":4}]}</script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-VCRXHMHS4M"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VCRXHMHS4M",{})</script><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-TVR6CV9")</script><link rel=search type=application/opensearchdescription+xml title="Dolby OptiView Documentation" href=/documentation/pr-preview/pr-393/opensearch.xml><link rel=stylesheet href=/documentation/pr-preview/pr-393/assets/css/styles.35911a1c.css><script src=/documentation/pr-preview/pr-393/assets/js/runtime~main.7c060d5e.js defer></script><script src=/documentation/pr-preview/pr-393/assets/js/main.19f057af.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TVR6CV9" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/documentation/pr-preview/pr-393/img/dolby-optiview-white.svg><link rel=preload as=image href=/documentation/pr-preview/pr-393/img/github.svg><link rel=preload as=image href=/documentation/pr-preview/pr-393/img/github_dark.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#9cb9c9;color:#344a5e role=banner><div class="content_knG7 announcementBarContent_xLdY">This is a preview of the documentation website from <a target=_blank rel="noopener noreferrer" href=https://github.com/THEOplayer/documentation/pull/393>pull request #393</a>.</div></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/documentation/pr-preview/pr-393/><div class=navbar__logo><img src=/documentation/pr-preview/pr-393/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/documentation/pr-preview/pr-393/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup=true aria-expanded=false role=button class=navbar__link href=/documentation/pr-preview/pr-393/theoplayer/>Player</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-393/theoplayer/>THEOplayer</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-393/open-video-ui/>Open Video UI</a></ul></div><a class="navbar__item navbar__link" href=/documentation/pr-preview/pr-393/ads/>Ads</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link dropdown--active">Streaming</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-393/theolive/>Live (THEOlive)</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/documentation/pr-preview/pr-393/millicast/>Real-time (Millicast)</a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/>Introduction to Streaming APIs</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/documentation/pr-preview/pr-393/millicast/getting-started/>Getting started</a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/documentation/pr-preview/pr-393/millicast/capture/>Capture</a><button aria-label="Expand sidebar category 'Capture'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/documentation/pr-preview/pr-393/millicast/broadcast/>Broadcast</a><button aria-label="Expand sidebar category 'Broadcast'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/documentation/pr-preview/pr-393/millicast/distribution/>Distribution</a><button aria-label="Expand sidebar category 'Distribution'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/documentation/pr-preview/pr-393/millicast/playback/>Playback</a><button aria-label="Collapse sidebar category 'Playback'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/>Players and SDKs</a><button aria-label="Collapse sidebar category 'Players and SDKs'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/web/player/>Web</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/android/player/>Android</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/ios/player/>iOS</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/react-native/>React Native</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/flutter/>Flutter</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/desktop/>Desktop</a><button aria-label="Expand sidebar category 'Desktop'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/viewer-events/>Broadcast Events</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/hosted-viewer/>Hosted Player</a><button aria-label="Expand sidebar category 'Hosted Player'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/securing-stream-playback/>Securing Stream Playback</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/source-and-layer-selection/>Source and Layer Selection</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/multiview/>Multi-view</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/audio-multiplexing/>Audio Multiplexing</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/frame-metadata/>Frame Metadata</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/client-analytics/>Client Analytics</a><button aria-label="Expand sidebar category 'Client Analytics'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-393/millicast/playback/devices/amino/>Playback Devices</a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/documentation/pr-preview/pr-393/millicast/network-requirements/>Platform guides</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><hr><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/hardware-encoders/>Hardware Encoders</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/software-encoders/>Software Encoders</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/>Players and SDKs</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/api/millicast-api/>Millicast REST API</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-393/millicast/changelog/>Release Notes</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_xLCN"><div class=docItemContainer_jfFK><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/documentation/pr-preview/pr-393/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_xK9p><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-393/millicast/><span>Real-time Streaming</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-393/millicast/playback/><span>Playback</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/><span>Players and SDKs</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Flutter</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Flutter</h1></header><div class=row><div class="col col--12 markdown"><p>Dolby.io Streaming APIs support creating iOS and Android applications using the Flutter SDK.</p>
<!-- -->
<section class=row><article class="col col--4 margin-bottom--lg"><a href=https://github.com/millicast/flutter-sdk/releases target=_blank rel="noopener noreferrer" class="card padding--lg cardContainer_S8oU"><h2 class="text--truncate cardTitle_HoSo" title=GitHub><img src=/documentation/pr-preview/pr-393/img/github.svg class="icon_qj0s cardIcon_whke themedComponent_mlkZ themedComponent--light_NVdE"><img src=/documentation/pr-preview/pr-393/img/github_dark.svg class="icon_qj0s cardIcon_whke themedComponent_mlkZ themedComponent--dark_xIcU"> <!-- -->GitHub</h2><p class=cardDescription_c27F>Access the SDK releases</p></a></article><article class="col col--4 margin-bottom--lg"><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/index.html target=_blank rel="noopener noreferrer" class="card padding--lg cardContainer_S8oU"><h2 class="text--truncate cardTitle_HoSo" title=Reference><span class="icon_qj0s cardIcon_whke">📖</span> <!-- -->Reference</h2><p class=cardDescription_c27F>Class and object reference</p></a></article><article class="col col--4 margin-bottom--lg"><a href=https://github.com/millicast/flutter-sdk/tree/develop/example target=_blank rel="noopener noreferrer" class="card padding--lg cardContainer_S8oU"><h2 class="text--truncate cardTitle_HoSo" title="Sample app"><span class="icon_qj0s cardIcon_whke">📱</span> <!-- -->Sample app</h2><p class=cardDescription_c27F>Test features and capabilities</p></a></article></section>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=getting-started>Getting started<a href=#getting-started class=hash-link aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=importing-the-library>Importing the library<a href=#importing-the-library class=hash-link aria-label="Direct link to Importing the library" title="Direct link to Importing the library">​</a></h3>
<p>You can import the SDK through flutter pub dev.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=import-as-a-dependency>Import as a dependency<a href=#import-as-a-dependency class=hash-link aria-label="Direct link to Import as a dependency" title="Direct link to Import as a dependency">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>install sdk</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">flutter pub </span><span class="token function" style="color:hsl(221, 87%, 60%)">add</span><span class="token plain"> millicast_flutter_sdk</span><br></span></code></pre></div></div>
<p>For windows you may need to allow installing apps from any source:</p>
<p>You should now see the follwing information in pubspec.yaml file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token key atrule" style="color:hsl(35, 99%, 36%)">dependencies</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">	</span><span class="token comment" style="color:hsl(230, 4%, 64%)"># ...</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># More dependencies</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(35, 99%, 36%)">millicast_flutter_sdk</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> ^1.1.x</span><br></span></code></pre></div></div>
<p>And then using it with the <code>import</code> statement.</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Import SDK</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=publish-a-stream>Publish a stream<a href=#publish-a-stream class=hash-link aria-label="Direct link to Publish a stream" title="Direct link to Publish a stream">​</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Getting started</div><div class=admonitionContent_BuS1><p>You will need to find or create a new stream name with a token in your Dolby.io dashboard. You can do that following this <a href=/documentation/pr-preview/pr-393/millicast/managing-your-tokens/>link</a>.</div></div>
<p>The main module to publish a stream is the <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish-class.html target=_blank rel="noopener noreferrer">Publish module</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=instance-the-publish-module>Instance the Publish module<a href=#instance-the-publish-module class=hash-link aria-label="Direct link to Instance the Publish module" title="Direct link to Instance the Publish module">​</a></h4>
<p>To create a new publisher, you have to instance the Publish class:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Setting subscriber options</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">DirectorPublisherOptions</span><span class="token plain"> directorPublisherOptions </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">DirectorPublisherOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  token</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-publishing-token'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Define callback for generate new token`</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token operator" style="color:hsl(221, 87%, 60%)">></span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Director</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">getPublisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">directorPublisherOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Create a new instance</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Publish</span><span class="token plain"> millicastPublish </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Publish</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<p>In order to create a Publish instance, you have to send two params.</p>
<ul>
<li>The first one is the stream name ('my-stream-name') and it is used to set where do you want to publish your stream.</li>
<li>The second param is a callback (tokenGenerator) and it is used to get the necessary data of the stream name where you want to stream. Also, it is used to set auto reconnection if you are streaming and then lose connection. In order for the Director class to be able to call the getPublisher method for the tokenGenerator, you must first set the stream name ('my-stream-name') and token('my-publishing-token').</li>
</ul>
<p>More information here:</p>
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish-class.html target=_blank rel="noopener noreferrer">Publish</a></li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Director/getPublisher.html target=_blank rel="noopener noreferrer">.getPublisher()</a></li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish/tokenGenerator.html target=_blank rel="noopener noreferrer">Token generator .callback()</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=get-your-media-information>Get your media information<a href=#get-your-media-information class=hash-link aria-label="Direct link to Get your media information" title="Direct link to Get your media information">​</a></h4>
<p>You should get the media information (camera/microphone) you want to stream with. To do that, the SDK uses MediaStream object.</p>
<p>In this example, we are going to get the default user camera and microphone:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:flutter_webrtc/flutter_webrtc.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Get User camera and microphone</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">final</span><span class="token plain"> _localRenderer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RTCVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MediaStream</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> mediaStream </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> navigator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">mediaDevices</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">getUserMedia</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'audio'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'video'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<p>This will ask permission in the mobile device to get the camera and microphone usage and will save the mediaStream information if the user accepts.</p>
<p>More information about using user media here:</p>
<ul>
<li><a href=https://pub.dev/documentation/webrtc_interface/latest/webrtc_interface/MediaDevices/getUserMedia.html target=_blank rel="noopener noreferrer">.getUserMedia()</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=initialize-the-stream>Initialize the stream<a href=#initialize-the-stream class=hash-link aria-label="Direct link to Initialize the stream" title="Direct link to Initialize the stream">​</a></h4>
<p>After all previous steps are completed, you can now initialize the stream using the <code>.connect()</code> method inside the Publish module.</p>
<p>Using the instanced Publisher and mediaStream, add the connect method:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">// Publishing Options</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Map</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token generics class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token generics"> </span><span class="token generics keyword" style="color:hsl(301, 63%, 40%)">dynamic</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">></span><span class="token plain"> broadcastOptions </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'mediaStream'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> mediaStream</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">_localRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">srcObject </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> mediaStream</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Start connection to publisher</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> millicastPublish</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> broadcastOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">throw</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Exception</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<p>Once the <code>.connect()</code> Future resolves, the stream is initialized correctly; otherwise it'll throw an error.</p>
<p>The <code>.connect()</code> can optionally receive more params, all of which are described in the <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish/connect.html target=_blank rel="noopener noreferrer">.connect()</a> method.</p>
<p>For example:</p>
<ul>
<li>If you want to start your stream with a bitrate limit, you can use the <code>bandwidth</code> option.</li>
<li>If your stream token in Millicast has the recording enabled, you can enable it with the <code>record</code> option. Once you have finished your stream, you can see the recording in the <a href=/documentation/pr-preview/pr-393/millicast/distribution/stream-recordings/>Dashboard Recordings section</a>.</li>
<li>You can start a stream without audio or video setting the <code>disableAudio</code> or <code>disableVideo</code> respectively.</li>
<li>You can select which codec you want to stream with using the <code>codec</code> option.</li>
<li>More information here:<!-- -->
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish/connect.html target=_blank rel="noopener noreferrer">.connect()</a></li>
<li><a href=/documentation/pr-preview/pr-393/millicast/distribution/stream-recordings/>Dashboard Recordings section</a></li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=managing-your-active-stream>Managing your active stream<a href=#managing-your-active-stream class=hash-link aria-label="Direct link to Managing your active stream" title="Direct link to Managing your active stream">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>The next samples use the <code>publisher</code> variable we created in the past steps. Please follow the tutorial.</div></div>
<p>The Publish instance internally uses most of the classes described in the <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/millicast_flutter_sdk-library.html target=_blank rel="noopener noreferrer">documentation</a>.</p>
<p>If the method is not static (which means you can access it without a Publish instance), you can access it through the Publish instance.</p>
<p>Example:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">publisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">signaling   </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Corresponds to the Signaling module.</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">publisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Corresponds to the Peerconnection module.</span><br></span></code></pre></div></div>
<p>Most of the important methods are located directly in the Publisher module but some are not, like updating the bitrate or getting the WebRTC stats.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=change-bitrate>Change bitrate<a href=#change-bitrate class=hash-link aria-label="Direct link to Change bitrate" title="Direct link to Change bitrate">​</a></h4>
<p>During an active stream, you can limit the maximum bitrate in kbps.
To do that, you have to use the <code>.updateBitrate()</code> method of your Publish instance that is located inside a subclass called <code>webRTCPeer</code>.</p>
<p>Example:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">publisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">updateBitrate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">2000</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Set the active stream with 2000 kbps limit.</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">publisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">updateBitrate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Set the active stream with no limit.</span><br></span></code></pre></div></div>
<p>More information here:</p>
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/PeerConnection/updateBitrate.html target=_blank rel="noopener noreferrer">.updateBitrate()</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=stop-stream>Stop stream<a href=#stop-stream class=hash-link aria-label="Direct link to Stop stream" title="Direct link to Stop stream">​</a></h4>
<p>If you want to stop an active stream, you can use the <code>.stop()</code> method of your Publish instance.</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">publisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">stop</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br></span></code></pre></div></div>
<p>More information here:</p>
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish/stop.html target=_blank rel="noopener noreferrer">.stop()</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=viewer>Viewer<a href=#viewer class=hash-link aria-label="Direct link to Viewer" title="Direct link to Viewer">​</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>In order to connect to a stream you'll need the account id and stream name of the broadcast. This information must be provided by the publish owner. For more information, see <a href=/documentation/pr-preview/pr-393/millicast/managing-your-tokens/>Publishing API</a>.</div></div>
<p>The main module to view a stream is the <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View-class.html target=_blank rel="noopener noreferrer">View module</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=instance-the-view-module>Instance the View module<a href=#instance-the-view-module class=hash-link aria-label="Direct link to Instance the View module" title="Direct link to Instance the View module">​</a></h4>
<p>Creating a new View instance:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'dart:convert'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:flutter_webrtc/flutter_webrtc.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Define callback for generate new token</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">DirectorSubscriberOptions</span><span class="token plain"> directorSubscriberOptions </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">DirectorSubscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  streamAccountId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-accountId'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token operator" style="color:hsl(221, 87%, 60%)">></span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Director</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">getSubscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">directorSubscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RTCVideoRenderer</span><span class="token plain"> mediaStream </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RTCVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">/// Create a new instance</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token plain"> view </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<p>Just like in the case of creating a Publish instance, in order to create a View instance you need two params and there's also an optional param.
The first one is the stream name (<code>'my-stream-name'</code>) and it is used to set the stream you want to connect.</p>
<ul>
<li>The second parameter is a callback (<code>tokenGenerator</code>) and it is used to get the necessary data of the stream name where you want to connect. Also, it is used to set auto reconnection if you are streaming and then lose connection. You have to set the stream name('my-stream-name') and the token('my-subscriber-token') for the function to be able to be called correctly to generate the token.</li>
<li>(Optional) <code>mediaElement</code>. This is the HTML media element where you want to mount the stream; for example a <code>video</code> element.</li>
<li>(Optional) <code>autoReconnect</code>. The Default value is true, enabling auto reconnect to stream.</li>
</ul>
<p>More information here:</p>
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View-class.html target=_blank rel="noopener noreferrer">View</a></li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Director/getSubscriber.html target=_blank rel="noopener noreferrer">.getSubscriber()</a></li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View/tokenGenerator.html target=_blank rel="noopener noreferrer">Token generator .callback()</a></li>
</ul>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">mediaStream </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RTCVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">/// Start connection to publisher</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">initStats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">throw</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Excpetion</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=track-event>Track event<a href=#track-event class=hash-link aria-label="Direct link to Track event" title="Direct link to Track event">​</a></h4>
<p>In case the mediaElement param is not specified when creating a View instance, a track event containing the media track will be emitted when the stream starts.</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">on</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'stats'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MediaStream</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> stream </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> ev</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">eventData </span><span class="token operator" style="color:hsl(221, 87%, 60%)">as</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MediaStream</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Manage the track event.</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=connecting-to-a-stream>Connecting to a stream<a href=#connecting-to-a-stream class=hash-link aria-label="Direct link to Connecting to a stream" title="Direct link to Connecting to a stream">​</a></h4>
<p>After the previous steps are done then you can connect to the stream using the <code>.connect()</code> method from the View instance.</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">print</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'Connection failed, handle error </span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token string-literal interpolation expression">e</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">reconnect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<p>We recommend using the <code>.reconnect()</code> method in the catch clause to make sure the View instance keeps trying to reconnect until the stream is live even when an error in the connect occurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=reconnect>Reconnect<a href=#reconnect class=hash-link aria-label="Direct link to Reconnect" title="Direct link to Reconnect">​</a></h3>
<p>Both the instances of Publish and View have a reconnect event. This event emits when the connection is lost with a timeout and error message in the callback. This event is emitted by the .reconnect() method, this method is automatically called by default except specified with the <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View/autoReconnect.html target=_blank rel="noopener noreferrer">autoReconnect</a> flag of the constructor. <a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View/setReconnect.html target=_blank rel="noopener noreferrer">SDK Reconnect event</a></p>
<p>Example of a reconnect event in the View instance:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token plain"> view </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'my-stream-name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    mediaElement</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> localRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">on</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'reconnect'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">print</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">eventData</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">toString</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<ul>
<li>The timeout is the time, in milliseconds, informing on when it will retry to establish the connection. It starts at <code>2000 ms</code> and then <code>4000 ms</code> ... until <code>32000 ms</code> (<code>32 s</code>). After it reaches <code>32 s</code> it starts retrying at <code>32 s</code> intervals.</li>
<li>The error message contains the cause of failure.
More information here:</li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/Publish/reconnect.html target=_blank rel="noopener noreferrer">Publish reconnect</a></li>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/View/reconnect.html target=_blank rel="noopener noreferrer">View reconnect</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=logger>Logger<a href=#logger class=hash-link aria-label="Direct link to Logger" title="Direct link to Logger">​</a></h3>
<p>You can get the logs of the connection, SDP, errors, and more. It can be enabled through the Logger module and you can activate it at any time (before/after a new connection).</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:logger/logger.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Logger</span><span class="token plain"> _logger </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">getLogger</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'main'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">print</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">memory</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">getBuffer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<p>Where memory is a global variable in which all logs gets stored.</p>
<p>More information and examples here:</p>
<ul>
<li><a href=https://pub.dev/documentation/logger/latest/logger/Logger-class.html target=_blank rel="noopener noreferrer">Logger</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=webrtc-stats>WebRTC Stats<a href=#webrtc-stats class=hash-link aria-label="Direct link to WebRTC Stats" title="Direct link to WebRTC Stats">​</a></h3>
<p>Stream stats can be accessed by both Publish and View instances. In order to capture them, you have to initialize the stats and then listen for the event through the <code>webRTCPeer</code> attribute.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>WebRTC Statistics</div><div class=admonitionContent_BuS1><p>Stats might defer between different mobile devices.</div></div>
<p>Example of usage:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Initialize and connect your Viewer</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token plain"> view </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Constants</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">streamName</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> tokenGenerator</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  mediaElement</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> localRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Start connection to publisher</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">initStats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">on</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'stats'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">stats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">stats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">eventData </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">null</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> report </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> stats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">eventData </span><span class="token operator" style="color:hsl(221, 87%, 60%)">as</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">List</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token generics class-name" style="color:hsl(35, 99%, 36%)">StatsReport</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">report</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">type </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!=</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'codec'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">          _logger</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">d</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'</span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token string-literal interpolation expression">report</span><span class="token string-literal interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token string-literal interpolation expression">id</span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">, </span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token string-literal interpolation expression">report</span><span class="token string-literal interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token string-literal interpolation expression">type</span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">, </span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token string-literal interpolation expression">report</span><span class="token string-literal interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token string-literal interpolation expression">timestamp</span><span class="token string-literal interpolation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">rethrow</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<p>We highly recommend stopping the stats when they're not being used.</p>
<p>Example of stopping stats:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">//...</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">webRTCPeer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">stopStats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div>
<p>More information here:</p>
<ul>
<li><a href=https://pub.dev/documentation/millicast_flutter_sdk/latest/millicast_flutter_sdk/PeerConnection/initStats.html target=_blank rel="noopener noreferrer">PeerConnection initStats</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=user-count>User count<a href=#user-count class=hash-link aria-label="Direct link to User count" title="Direct link to User count">​</a></h3>
<p>The Dolby.io Real-time Streaming server provides the number of current viewers through broadcast events. To start listening to different broadcast events you have to add which events you want to listen to in the Publisher/Subscriber options.</p>
<p>Both Publisher and Subscriber follow the same workflow.</p>
<p>Example of usage:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockTitle_OeMC>Dart</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'package:millicast_flutter_sdk/millicast_flutter_sdk.dart'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'dart:convert'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">//...</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">int _viewers</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Add viewercount to events list</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Map</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token generics class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token generics"> </span><span class="token generics keyword" style="color:hsl(301, 63%, 40%)">dynamic</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">></span><span class="token plain"> options </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'events'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'active'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'inactive'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'layers'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'viewercount'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> publish</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Add listener of broacastEvent to get UserCount</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">_publisherMedia</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">on</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'broadcastEvent'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">this</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> data </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">jsonEncode</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">eventData</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Map</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token generics class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token generics"> </span><span class="token generics keyword" style="color:hsl(301, 63%, 40%)">dynamic</span><span class="token generics punctuation" style="color:hsl(119, 34%, 47%)">></span><span class="token plain"> dataMap </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">jsonDecode</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">dataMap</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'name'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'viewercount'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    _viewers </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> dataMap</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'data'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">'viewercount'</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Use _viewers value as needed</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><br></span></code></pre></div></div></div></div></div><div class=row><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/THEOplayer/documentation/blob/-/millicast/playback/players-sdks/flutter/index.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></div></div></article><div class=row><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/react-native/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>React Native</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/documentation/pr-preview/pr-393/millicast/playback/players-sdks/desktop/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Desktop</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#getting-started class="table-of-contents__link toc-highlight">Getting started</a><ul><li><a href=#importing-the-library class="table-of-contents__link toc-highlight">Importing the library</a><ul><li><a href=#import-as-a-dependency class="table-of-contents__link toc-highlight">Import as a dependency</a></ul><li><a href=#publish-a-stream class="table-of-contents__link toc-highlight">Publish a stream</a><ul><li><a href=#instance-the-publish-module class="table-of-contents__link toc-highlight">Instance the Publish module</a><li><a href=#get-your-media-information class="table-of-contents__link toc-highlight">Get your media information</a><li><a href=#initialize-the-stream class="table-of-contents__link toc-highlight">Initialize the stream</a><li><a href=#managing-your-active-stream class="table-of-contents__link toc-highlight">Managing your active stream</a><li><a href=#change-bitrate class="table-of-contents__link toc-highlight">Change bitrate</a><li><a href=#stop-stream class="table-of-contents__link toc-highlight">Stop stream</a></ul><li><a href=#viewer class="table-of-contents__link toc-highlight">Viewer</a><ul><li><a href=#instance-the-view-module class="table-of-contents__link toc-highlight">Instance the View module</a><li><a href=#track-event class="table-of-contents__link toc-highlight">Track event</a><li><a href=#connecting-to-a-stream class="table-of-contents__link toc-highlight">Connecting to a stream</a></ul><li><a href=#reconnect class="table-of-contents__link toc-highlight">Reconnect</a><li><a href=#logger class="table-of-contents__link toc-highlight">Logger</a><li><a href=#webrtc-stats class="table-of-contents__link toc-highlight">WebRTC Stats</a><li><a href=#user-count class="table-of-contents__link toc-highlight">User count</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 <a href=https://www.dolby.com/>Dolby Laboratories, Inc. All rights reserved.</a></div></div></div></footer></div>