"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["33839"],{441510:function(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var i=t(132388),s=t(785893),o=t(250065);let r={},a="Token based security",l={},c=[{value:"How it works",id:"how-it-works",level:2},{value:"Enable or disable token security for an alias",id:"enable-or-disable-token-security-for-an-alias",level:2},{value:"Configuring THEOplayer to pass the necessary headers",id:"configuring-theoplayer-to-pass-the-necessary-headers",level:2}];function h(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"token-based-security",children:"Token based security"})}),"\n",(0,s.jsx)(n.p,{children:"THEOlive offers the option to enable JWT token security for channels (including channel aliases). This can be interesting if you only want valid users to access your stream."}),"\n",(0,s.jsx)(n.p,{children:"In this document, we will"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"explain how it works"}),"\n",(0,s.jsx)(n.li,{children:"how to enable/disable it via the console and API"}),"\n",(0,s.jsx)(n.li,{children:"how to configure your THEOplayer to pass the mandatory headers"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,s.jsxs)(n.p,{children:["When enabling token security on a channel, we expect you to share the shared (private) key in case of HS256/HS512 or the public key in case of RS256/RS512 encryption. This will be used on CDN level to determine if a request (with a Bearer token passed in the ",(0,s.jsx)(n.code,{children:"Authorization"})," header) is valid or not. It's up to you to configure this header correctly through our player. Later in this document we will explain how."]}),"\n",(0,s.jsxs)(n.p,{children:["In the bearer token that gets sent to us, we ",(0,s.jsx)(n.em,{children:"require"})," the following properties to be provided in the ",(0,s.jsx)(n.code,{children:"payload"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exp"}),": date in epoch format until which the JWT token is valid"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nbf"}),': optional date in epoch format. Stands for "not before" and acts as a "start date" of the JWT to be valid.']}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When not passing a bearer token for a secured channel, the request will be rejected. If the channel is not secured, you may still pass a token but it is not required."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"token based security",src:t(26259).Z+"",width:"720",height:"306"})}),"\n",(0,s.jsxs)(n.p,{children:["Putting it all together, here is an example of a token ",(0,s.jsx)(n.code,{children:"payload"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "nbf": 1750786626 // optional, viewers attempting to connect before this time will not be permitted\n  "exp": 1750796626 // required, must be a valid time in the future to allow viewer access\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["To view an example token, you can paste the following token into the ",(0,s.jsx)(n.a,{href:"https://jwt.io/#token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTA4MTM5NDAsImV4cCI6MTc1MDgxNDU0MH0.hGnLRGO09AXNzMHgHLLz1HJ-9mRfDf-PnOd20w9CQmI",children:"jwt.io debugger"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTA4MTM5NDAsImV4cCI6MTc1MDgxNDU0MH0.hGnLRGO09AXNzMHgHLLz1HJ-9mRfDf-PnOd20w9CQmI\n"})}),"\n",(0,s.jsxs)(n.p,{children:["It was signed with the following random secret: ",(0,s.jsx)(n.code,{children:"d2e166fdda89824a6c493d8a2af7a0754199eff9e38c579cba8783767a44039c"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"enable-or-disable-token-security-for-an-alias",children:"Enable or disable token security for an alias"}),"\n",(0,s.jsxs)(n.p,{children:["Please refer to the ",(0,s.jsx)(n.a,{href:"/theolive/api/channels/enable-token-security-for-alias",children:"Enable token security for alias"})," and ",(0,s.jsx)(n.a,{href:"/theolive/api/channels/disable-token-security-for-alias",children:"Disable token security for alias"})," API endpoints to manage the token security settings for an alias."]}),"\n",(0,s.jsxs)(n.p,{children:["When enabling for the first time, you have to pass the ",(0,s.jsx)(n.code,{children:"key"})," property in the body. If you disable token security later on, and make it active again, you can omit this property if it should stay the same."]}),"\n",(0,s.jsxs)(n.p,{children:["If you're using the ",(0,s.jsx)(n.a,{href:"https://console.theo.live",children:"THEOlive management console"}),", you can navigate to the player details page and select the alias you want to enable/disable token security for. When enabling, please pass the correct shared or public key to use. ",(0,s.jsx)(n.strong,{children:"Don't forget to confirm your changes by hitting the save button!"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Managing token security in the console",src:t(885667).Z+"",width:"1323",height:"770"})}),"\n",(0,s.jsx)(n.h2,{id:"configuring-theoplayer-to-pass-the-necessary-headers",children:"Configuring THEOplayer to pass the necessary headers"}),"\n",(0,s.jsx)(n.p,{children:"Refer to our platform specific guides for details on how to setup JWT security for your channels and information on any known limitations."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/documentation/pr-preview/pr-373/theolive/playback/web/token-based-security",children:"Web"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/documentation/pr-preview/pr-373/theolive/playback/android/token-based-security",children:"Android"})}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},885667:function(e,n,t){t.d(n,{Z:()=>i});let i=t.p+"assets/images/51376b6-token-d85cdc1dbfb111642fa9b7f764b921e6.png"},26259:function(e,n,t){t.d(n,{Z:()=>i});let i=t.p+"assets/images/dcdfc37-token_security-198f04847aec73ad4f237ac1e8c7c650.png"},250065:function(e,n,t){t.d(n,{Z:()=>a,a:()=>r});var i=t(667294);let s={},o=i.createContext(s);function r(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},132388:function(e){e.exports=JSON.parse('{"id":"platform/security/token-based-security","title":"Token based security","description":"THEOlive offers the option to enable JWT token security for channels (including channel aliases). This can be interesting if you only want valid users to access your stream.","source":"@site/theolive/platform/security/token-based-security.mdx","sourceDirName":"platform/security","slug":"/platform/security/token-based-security","permalink":"/documentation/pr-preview/pr-373/theolive/platform/security/token-based-security","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/theolive/platform/security/token-based-security.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"theolive","previous":{"title":"Geo-blocking","permalink":"/documentation/pr-preview/pr-373/theolive/platform/security/geo-blocking"},"next":{"title":"Playback","permalink":"/documentation/pr-preview/pr-373/theolive/playback"}}')}}]);