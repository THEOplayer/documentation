"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["18513"],{995027(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var i=n(108596),r=n(474848),o=n(28453);let s={},a="Token based security",l={},c=[{value:"How it works",id:"how-it-works",level:2},{value:"Enable or disable token security for an alias",id:"enable-or-disable-token-security-for-an-alias",level:2},{value:"Configuring THEOplayer to pass the necessary headers",id:"configuring-theoplayer-to-pass-the-necessary-headers",level:2}];function d(e){let t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"token-based-security",children:"Token based security"})}),"\n",(0,r.jsx)(t.p,{children:"THEOlive offers the option to enable JWT token security for your distribution (formerly referred to as an alias). This can be interesting if you only want valid users to access your stream."}),"\n",(0,r.jsx)(t.p,{children:"In this document, we will"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"explain how it works"}),"\n",(0,r.jsx)(t.li,{children:"how to enable/disable it via the console and API"}),"\n",(0,r.jsx)(t.li,{children:"how to configure your THEOplayer to pass the mandatory headers"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,r.jsxs)(t.p,{children:["When enabling token security on a distribution, we expect you to share the shared (private) key in case of HS256/HS512 or the public key in case of RS256/RS512 encryption. This will be used on CDN level to determine if a request (with a Bearer token passed in the ",(0,r.jsx)(t.code,{children:"Authorization"})," header) is valid or not. It's up to you to configure this header correctly through our player. Later in this document we will explain how."]}),"\n",(0,r.jsxs)(t.p,{children:["In the bearer token that gets sent to us, we ",(0,r.jsx)(t.em,{children:"require"})," the following properties to be provided in the ",(0,r.jsx)(t.code,{children:"payload"}),":"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"exp"}),": date in epoch format until which the JWT token is valid"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"nbf"}),': optional date in epoch format. Stands for "not before" and acts as a "start date" of the JWT to be valid.']}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"When not passing a bearer token for a secured distribution, the request will be rejected. If the distribution is not secured, you may still pass a token but it is not required."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"token based security",src:n(386840).A+"",width:"720",height:"306"})}),"\n",(0,r.jsxs)(t.p,{children:["Putting it all together, here is an example of a token ",(0,r.jsx)(t.code,{children:"payload"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "nbf": 1750786626 // optional, viewers attempting to connect before this time will not be permitted\n  "exp": 1750796626 // required, must be a valid time in the future to allow viewer access\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["To view an example token, you can paste the following token into the ",(0,r.jsx)(t.a,{href:"https://jwt.io/#token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTA4MTM5NDAsImV4cCI6MTc1MDgxNDU0MH0.hGnLRGO09AXNzMHgHLLz1HJ-9mRfDf-PnOd20w9CQmI",children:"jwt.io debugger"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTA4MTM5NDAsImV4cCI6MTc1MDgxNDU0MH0.hGnLRGO09AXNzMHgHLLz1HJ-9mRfDf-PnOd20w9CQmI\n"})}),"\n",(0,r.jsxs)(t.p,{children:["It was signed with the following random secret: ",(0,r.jsx)(t.code,{children:"d2e166fdda89824a6c493d8a2af7a0754199eff9e38c579cba8783767a44039c"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"enable-or-disable-token-security-for-an-alias",children:"Enable or disable token security for an alias"}),"\n",(0,r.jsxs)(t.p,{children:["Please refer to the ",(0,r.jsx)(t.a,{href:"/theolive/api/channels/enable-token-security-for-alias",children:"Enable token security for alias"})," and ",(0,r.jsx)(t.a,{href:"/theolive/api/channels/disable-token-security-for-alias",children:"Disable token security for alias"})," API endpoints to manage the token security settings for an alias."]}),"\n",(0,r.jsxs)(t.p,{children:["When enabling for the first time, you have to pass the ",(0,r.jsx)(t.code,{children:"key"})," property in the body. If you disable token security later on, and make it active again, you can omit this property if it should stay the same."]}),"\n",(0,r.jsxs)(t.p,{children:["If you're using the ",(0,r.jsx)(t.a,{href:"https://console.theo.live",children:"THEOlive management console"}),", you can navigate to the player details page and select the alias you want to enable/disable token security for. When enabling, please pass the correct shared or public key to use. ",(0,r.jsx)(t.strong,{children:"Don't forget to confirm your changes by hitting the save button!"})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Managing token security in the console",src:n(667101).A+"",width:"1323",height:"770"})}),"\n",(0,r.jsx)(t.h2,{id:"configuring-theoplayer-to-pass-the-necessary-headers",children:"Configuring THEOplayer to pass the necessary headers"}),"\n",(0,r.jsx)(t.p,{children:"Refer to our platform specific guides for details on how to setup JWT security for your channels and information on any known limitations."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-479/theolive/playback/react-native/token-based-security",children:"React Native"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-479/theolive/playback/web/token-based-security",children:"Web"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-479/theolive/playback/android/token-based-security",children:"Android"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-479/theolive/playback/roku/token-based-security",children:"Roku"})}),"\n"]})]})}function h(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},667101(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/51376b6-token-d85cdc1dbfb111642fa9b7f764b921e6.png"},386840(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/dcdfc37-token_security-198f04847aec73ad4f237ac1e8c7c650.png"},28453(e,t,n){n.d(t,{R:()=>s,x:()=>a});var i=n(296540);let r={},o=i.createContext(r);function s(e){let t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:t},e.children)}},108596(e){e.exports=JSON.parse('{"id":"platform/security/token-based-security","title":"Token based security","description":"THEOlive offers the option to enable JWT token security for your distribution (formerly referred to as an alias). This can be interesting if you only want valid users to access your stream.","source":"@site/theolive/platform/security/token-based-security.mdx","sourceDirName":"platform/security","slug":"/platform/security/token-based-security","permalink":"/documentation/pr-preview/pr-479/theolive/platform/security/token-based-security","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/theolive/platform/security/token-based-security.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"theolive","previous":{"title":"IP-blocking","permalink":"/documentation/pr-preview/pr-479/theolive/platform/security/ip-blocking"},"next":{"title":"Playback","permalink":"/documentation/pr-preview/pr-479/theolive/playback"}}')}}]);