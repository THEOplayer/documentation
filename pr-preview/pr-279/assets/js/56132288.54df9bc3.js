"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["44223"],{96825:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>a,metadata:()=>s,assets:()=>r,toc:()=>l,contentTitle:()=>o});var s=JSON.parse('{"id":"webhooks/feeds-webhooks","title":"Feed Hooks","description":"The feeds type of webhook allows you to receive an activity feed for platform events such as when a stream has started or stopped publishing.","source":"@site/millicast/webhooks/feeds-webhooks.md","sourceDirName":"webhooks","slug":"/feeds-webhooks","permalink":"/documentation/pr-preview/pr-279/millicast/feeds-webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/millicast/webhooks/feeds-webhooks.md","tags":[],"version":"current","frontMatter":{"title":"Feed Hooks","slug":"/feeds-webhooks"},"sidebar":"millicast","previous":{"title":"Webhooks","permalink":"/documentation/pr-preview/pr-279/millicast/webhooks"},"next":{"title":"Media Hooks","permalink":"/documentation/pr-preview/pr-279/millicast/media-hooks"}}'),i=t("85893"),d=t("50065");let a={title:"Feed Hooks",slug:"/feeds-webhooks"},o=void 0,r={},l=[{value:"Event",id:"event",level:2},{value:"Data",id:"data",level:2},{value:"Examples",id:"examples",level:2},{value:"Feed Started",id:"feed-started",level:3},{value:"Feed Ended",id:"feed-ended",level:3}];function c(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"feeds"})," ",(0,i.jsx)(n.em,{children:"type"})," of ",(0,i.jsx)(n.a,{href:"/documentation/pr-preview/pr-279/millicast/webhooks",children:"webhook"})," allows you to receive an activity feed for platform events such as when a stream has started or stopped publishing."]}),"\n",(0,i.jsx)(n.admonition,{title:"Setting up Webhooks",type:"tip",children:(0,i.jsxs)(n.p,{children:["Review the ",(0,i.jsx)(n.a,{href:"/documentation/pr-preview/pr-279/millicast/webhooks",children:"Webhooks"})," guide for additional details on creating and receiving webhooks."]})}),"\n",(0,i.jsx)(n.h2,{id:"event",children:"Event"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"event"})," will be one of the following values:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"started"})," is sent when a broadcast has been started."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ended"})," is sent when a broadcast has been terminated either by the publisher or due to timeout."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each individual stream will send started and ended events."}),"\n",(0,i.jsx)(n.h2,{id:"data",children:"Data"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"data"})," payload will contain the following details:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"feedId"})," is the unique identifier for the source feed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"accountId"})," is the account id associated with the publishing token used."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"name"})," is the stream name for the broadcast."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"streamId"})," is the combination of account and stream name to identify the playback url."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"started"})," is the epoch time for when the stream was started."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"active"})," is a boolean flag indicating if the feed is still currently active when the hook fired."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Optionally the webhook may include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ended"})," is an epoch time for when the publishing feed was ended (only included when the stream has ended)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"priority"})," is a numeric value identifying the priority of an ingest when using ",(0,i.jsx)(n.a,{href:"/documentation/pr-preview/pr-279/millicast/redundant-ingest",children:"redundant streams"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"feed-started",children:"Feed Started"}),"\n",(0,i.jsx)(n.p,{children:"Event callback for when a publishing token begins broadcasting."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="started feed webhook body"',children:'{\n  "type": "feeds",\n  "event": "started",\n  "timestamp": 1638463486489,\n  "data": {\n    "feedId": "369e4a86-f937-4254-bd9f-99dc484d2bd6",\n    "accountId": "ZG6NWV",\n    "name": "sample_stream",\n    "streamId": "ZG6NWV/sample_stream",\n    "started": 1638463486359,\n    "active": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"feed-ended",children:"Feed Ended"}),"\n",(0,i.jsx)(n.p,{children:"Event callback for when a publishing token stops broadcasting."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="ended feed webhook body"',children:'{\n  "type": "feeds",\n  "event": "ended",\n  "timestamp": 1638463501075,\n  "data": {\n    "feedId": "369e4a86-f937-4254-bd9f-99dc484d2bd6",\n    "accountId": "ZG6NWV",\n    "name": "sample_stream",\n    "streamId": "ZG6NWV/sample_stream",\n    "active": false,\n    "ended": 1638463500963\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here is an example of the webhook body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="ended feed webhook body"',children:'{\n  "type": "feeds",\n  "event": "ended",\n  "timestamp": 1638463501075,\n  "data": {\n    "feedId": "369e4a86-f937-4254-bd9f-99dc484d2bd6",\n    "accountId": "ZG6NWV",\n    "name": "sample_stream",\n    "streamId": "ZG6NWV/sample_stream",\n    "active": false,\n    "ended": 1638463500963\n  }\n}\n'})})]})}function h(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},50065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return a}});var s=t(67294);let i={},d=s.createContext(i);function a(e){let n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);