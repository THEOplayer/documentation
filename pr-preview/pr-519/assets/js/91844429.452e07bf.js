"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["17527"],{522777(e,i,n){n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var t=n(101591),a=n(474848),s=n(28453);let r={sidebar_position:0,sidebar_label:"Introduction"},o="Dolby OptiView Ad Engine",l={},d=[{value:"RASP",id:"rasp",level:3},{value:"Galaxies",id:"galaxies",level:3},{value:"API-Less JIT Operation",id:"api-less-jit-operation",level:3},{value:"Conformance Operations",id:"conformance-operations",level:3},{value:"Ad Profiles",id:"ad-profiles",level:3},{value:"VAST Files",id:"vast-files",level:3},{value:"OptiView Ecosystem",id:"optiview-ecosystem",level:3},{value:"Cloud Preview Capabilities",id:"cloud-preview-capabilities",level:3}];function c(e){let i={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"dolby-optiview-ad-engine",children:"Dolby OptiView Ad Engine"})}),"\n",(0,a.jsx)(i.p,{children:"The OptiView Ad Engine is a just-in-time, serverless conformance service that transforms ads from their original master format into a streaming format that matches the primary content stream. This ensures smooth, consistent ad playback, improving the overall viewing experience and enhancing audience satisfaction. Because the Ad Engine operates just-in-time, it can prepare ads for playback within the span of an Early Ad Break Notification (EABN). The Ad Engine is compatible with any ad server, streaming engine, or player. Beyond transforming ads, it can also be used to integrate other types of content, such as editorial segments."}),"\n",(0,a.jsxs)(i.p,{children:["A key capability of the Ad Engine is its ability to rapidly perform ",(0,a.jsx)(i.strong,{children:"quality control"})," checks on the ad master during the conformance process. These checks confirm that the ad meets required specifications such as duration, bitrate, and resolution, while also identifying failures such as mismatched audio/video lengths or missing tracks. The verification process is fast enough to allow time for fallback to an alternate ad if needed."]}),"\n",(0,a.jsxs)(i.p,{children:["In addition to video conformance, the Ad Engine performs ",(0,a.jsx)(i.strong,{children:"audio normalization"})," to ensure ad volume matches the primary content. This prevents sudden shifts in loudness that can disrupt the viewing experience. The Ad Engine can also upconvert SDR/stereo ads into Dolby Vision and Dolby Atmos, improving overall ad quality and enabling seamless playback alongside premium Dolby-formatted content."]}),"\n",(0,a.jsx)(i.p,{children:"Here is an outline of how the Ad Engine would be integrated into a typical Server-Side Ad Insertion workflow:"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"OptiView Ad Engine Architecture",src:n(263589).A+"",width:"1007",height:"453"})}),"\n",(0,a.jsx)(i.h3,{id:"rasp",children:"RASP"}),"\n",(0,a.jsx)(i.p,{children:"The OptiView Ad Engine uses an underlying processing system called Dolby RASP - Resource Agnostic Swarm Processing. RASP manages tens of thousands of computing units spread across the major web services like Amazon AWS, Microsoft Azure, Google GCP, and Oracle OCI. You will see the RASP name show up in endpoints and in some schema values."}),"\n",(0,a.jsx)(i.h3,{id:"galaxies",children:"Galaxies"}),"\n",(0,a.jsx)(i.p,{children:'A "galaxy" is a specific endpoint assigned to a specific customer. Each galaxy is independent of another. All content is unique to the galaxy it was created in. For example, if you created an Ad Profile in one galaxy, that profile will not exist in another. The API endpoint you are assigned will look like:'}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.code,{children:"https://api.galaxy.dolbyrasp.com"})}),"\n",(0,a.jsxs)(i.p,{children:["In the API documentation, any reference to ",(0,a.jsx)(i.code,{children:"galaxy"})," is a placeholder for the galaxy you have been assisgned."]}),"\n",(0,a.jsx)(i.h3,{id:"api-less-jit-operation",children:"API-Less JIT Operation"}),"\n",(0,a.jsx)(i.p,{children:"The OptiView Ad Engine can convert ads synchronously, eliminating the need for job submission or scheduling. This avoids the common \u201CCreative Not Available\u201D errors when ads are not ready for playback. Once ad profiles are defined, you simply \u201Cwrap\u201D the location of an ad master with the Ad Engine service, which acts as a virtual proxy and delivers the ad in the desired format."}),"\n",(0,a.jsx)(i.p,{children:"For example, if your original ad file is located at:"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.code,{children:"https://ad_server.com/ad123.mp4"})}),"\n",(0,a.jsx)(i.p,{children:"Wrapping it with the Ad Engine entry point provides the converted HLS stream at:"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.code,{children:"https://api.galaxy.dolbyrasp.com/ad_engine/conform?profile=my_ad_profile&url=https://ad_server.com/ad123.mp4&output_format=media"})}),"\n",(0,a.jsxs)(i.p,{children:["This is a synchronous ",(0,a.jsx)(i.code,{children:"GET"})," operation, making integration into existing workflows seamless. The resulting HLS output can be streamed directly from the Ad Engine origin or transferred to the same origin as the primary content and distributed through your CDN. This approach also makes ad blocking more difficult since both primary and ad content originate from the same source."]}),"\n",(0,a.jsx)(i.h3,{id:"conformance-operations",children:"Conformance Operations"}),"\n",(0,a.jsx)(i.p,{children:"The OptiView Ad Engine supports the following conversions:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"Media \u2192 MP4"}),"\n",(0,a.jsx)(i.li,{children:"Media \u2192 HLS"}),"\n",(0,a.jsx)(i.li,{children:"Media \u2192 VAST"}),"\n",(0,a.jsx)(i.li,{children:"VAST \u2192 HLS"}),"\n",(0,a.jsx)(i.li,{children:"VAST \u2192 VAST"}),"\n"]}),"\n",(0,a.jsx)(i.h3,{id:"ad-profiles",children:"Ad Profiles"}),"\n",(0,a.jsxs)(i.p,{children:["You configure the Ad Engine using ",(0,a.jsx)(i.strong,{children:"ad profiles"}),", which define encoding parameters such as the number of video/audio layers, bitrates, codecs, and more. Different profiles can be created for different content or regions. For example, one region might support a maximum bitrate of 12 Mbps, while another supports only 6 Mbps. A single ad can be processed with multiple profiles to ensure it matches the source stream perfectly in each region."]}),"\n",(0,a.jsx)(i.h3,{id:"vast-files",children:"VAST Files"}),"\n",(0,a.jsxs)(i.p,{children:["The Ad Engine supports ",(0,a.jsx)(i.strong,{children:"VAST (Video Ad Serving Template) files"}),", which are XML documents that enable video players to communicate with ad servers. A VAST file includes details such as:"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"Ad type (linear, non-linear, companion)"}),"\n",(0,a.jsx)(i.li,{children:"Media file location (e.g., MP4 URLs)"}),"\n",(0,a.jsx)(i.li,{children:"Duration and click-through URLs"}),"\n",(0,a.jsx)(i.li,{children:"Tracking events (start, quartiles, complete, mute, pause, etc.)"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"VAST files typically reference the ad master stored on the ad server. The OptiView Ad Engine can take a VAST file as input and generate a new VAST file that points to the processed HLS output. This allows for seamless integration with existing ad bidding and playback workflows. If the VAST file is pointing to another VAST file (a VAST reference), then the Ad Engine will replace the reference with a encoded HLS location."}),"\n",(0,a.jsx)(i.h3,{id:"optiview-ecosystem",children:"OptiView Ecosystem"}),"\n",(0,a.jsx)(i.p,{children:"The Ad Engine can be used as part of the OptiView suite of services, including the OptiView Player, Streaming, and Ads. The Ad Engine facilitates preparing ads for any scenario, including Server-Guided Ad Insertion (SGAI). The low latency of the Ad Engine is particularly important when the OptiView Player is getting ads directly without them being stitched into the stream by the streaming engine. OptiView Ads manages the ad signaling and coordination between the various components. Here is an outline of the architecture in this scenario:"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"OptiView Ad Engine Architecture",src:n(288838).A+"",width:"816",height:"533"})}),"\n",(0,a.jsx)(i.h3,{id:"cloud-preview-capabilities",children:"Cloud Preview Capabilities"}),"\n",(0,a.jsxs)(i.p,{children:["In addition to rapid ad processing, the Ad Engine can generate ",(0,a.jsx)(i.strong,{children:"cloud-based previews"})," of media assets that are not natively streamable. A common use case is previewing high-quality master files encoded in formats such as Dolby Vision and Dolby Atmos. These master assets often have extremely high bitrates (for example, 800 Mbps or more) and are therefore unsuitable for direct streaming."]}),"\n",(0,a.jsxs)(i.p,{children:["The Ad Engine addresses this by ",(0,a.jsx)(i.strong,{children:"transcoding master files on-the-fly into streamable formats"}),", enabling immediate playback in a web browser. This allows customers to perform quality control directly in the cloud, without the need to generate or store intermediate proxy files."]}),"\n",(0,a.jsx)(i.p,{children:"Cloud Preview output is compatible with any HLS-capable player. In addition, Dolby provides built-in support for the following multi-track players:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Codemill Accurate Player"})," \u2014 ",(0,a.jsx)(i.a,{href:"https://www.codemill.com",children:"https://www.codemill.com"})]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Omakase Player"})," \u2014 ",(0,a.jsx)(i.a,{href:"https://player.byomakase.org",children:"https://player.byomakase.org"})]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"These multi-track players allow you to view multiple video, audio, and sub-title files in a single timeline with video thumbnails and audio waveforms."})]})}function h(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},288838(e,i,n){n.d(i,{A:()=>t});let t=n.p+"assets/images/ad-engine-sgai-ad-insertion-8284025ce028c1df1593cd9e532bbba0.svg"},263589(e,i,n){n.d(i,{A:()=>t});let t=n.p+"assets/images/ad_engine_server_side_ad_insertion-d3a81dee9e722e13808d4f2a06a8589b.svg"},28453(e,i,n){n.d(i,{R:()=>r,x:()=>o});var t=n(296540);let a={},s=t.createContext(a);function r(e){let i=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:i},e.children)}},101591(e){e.exports=JSON.parse('{"id":"index","title":"Dolby OptiView Ad Engine","description":"The OptiView Ad Engine is a just-in-time, serverless conformance service that transforms ads from their original master format into a streaming format that matches the primary content stream. This ensures smooth, consistent ad playback, improving the overall viewing experience and enhancing audience satisfaction. Because the Ad Engine operates just-in-time, it can prepare ads for playback within the span of an Early Ad Break Notification (EABN). The Ad Engine is compatible with any ad server, streaming engine, or player. Beyond transforming ads, it can also be used to integrate other types of content, such as editorial segments.","source":"@site/adengine/index.mdx","sourceDirName":".","slug":"/","permalink":"/documentation/pr-preview/pr-519/ad-engine/","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/adengine/index.mdx","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0,"sidebar_label":"Introduction"},"sidebar":"adengine","next":{"title":"Ad Profiles","permalink":"/documentation/pr-preview/pr-519/ad-engine/how-to/ad-profile-creation"}}')}}]);