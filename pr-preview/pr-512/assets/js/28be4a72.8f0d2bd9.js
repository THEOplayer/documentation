"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["3293"],{849823(e,i,t){t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var s=t(910667),a=t(474848),n=t(28453);let r={title:"How-to Upload Media Assets"},o,l={},d=[{value:"Generate Upload Credentials",id:"generate-upload-credentials",level:2},{value:"Upload to AWS",id:"upload-to-aws",level:2},{value:"Register Media Asset",id:"register-media-asset",level:2},{value:"Example Usage 1 - Upload A Single File Asset",id:"example-usage-1---upload-a-single-file-asset",level:3},{value:"Example Usage 2 - Upload A Multi File Asset",id:"example-usage-2---upload-a-multi-file-asset",level:3}];function c(e){let i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.p,{children:"You can upload your own media assets to OptiView storage to be played back via the OptiView CDN."}),"\n",(0,a.jsx)(i.h2,{id:"generate-upload-credentials",children:"Generate Upload Credentials"}),"\n",(0,a.jsxs)(i.p,{children:["Use the ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-get-upload-credentials",children:"Generate Upload Credentials"})," endpoint to generate AWS credentials and an S3 upload location.\nThese credentials will last for 1 hour. Please upload and register media assets within the hour."]}),"\n",(0,a.jsx)(i.p,{children:"This is an example response."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:'{\n  "status": "success",\n  "data": {\n    "path": "string",\n    "bucketName": "string",\n    "objectPrefix": "string",\n    "accessKeyId": "string",\n    "secretAccessKey": "string",\n    "sessionToken": "string",\n    "expiration": "2026-01-12T01:27:13Z"\n  }\n}\n'})}),"\n",(0,a.jsx)(i.h2,{id:"upload-to-aws",children:"Upload to AWS"}),"\n",(0,a.jsx)(i.p,{children:"Using the response fields from the previous API call, upload the media asset files to the specified S3 location."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:"$ AWS_ACCESS_KEY_ID=<from-above> AWS_SECRET_ACCESS_KEY=<from-above> AWS_SESSION_TOKEN=<from-above> \\ aws s3 cp <filepath> s3://<bucketName>/<objectPrefix>\n"})}),"\n",(0,a.jsx)(i.h2,{id:"register-media-asset",children:"Register Media Asset"}),"\n",(0,a.jsxs)(i.p,{children:["After completing upload make a ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-register-media-asset",children:"registration call"}),"."]}),"\n",(0,a.jsxs)(i.p,{children:["The ",(0,a.jsx)(i.code,{children:"mediaAssetId"})," returned in the response body can be used for inspecting, retrieving and deleting the media asset."]}),"\n",(0,a.jsxs)(i.p,{children:["This endpoint does not give immediate feedback on whether the media asset has been successfully created. Please use the ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-read-media-asset",children:"Read Media Asset"})," endpoint to inspect the outcome of registration and retrieve the download url."]}),"\n",(0,a.jsx)(i.h3,{id:"example-usage-1---upload-a-single-file-asset",children:"Example Usage 1 - Upload A Single File Asset"}),"\n",(0,a.jsxs)(i.p,{children:["If your asset has a single file such as an mp4 file, append the filename to the ",(0,a.jsx)(i.code,{children:"objectPrefix"})," obtained from the ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-get-upload-credentials",children:"Generate Upload Credentials"})," response.\nThe ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-register-media-asset",children:"Register Media Asset"})," request would look like"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:'{\n  "objectPrefix": <object-prefix-from-above>/user-file.mp4\n}\n'})}),"\n",(0,a.jsxs)(i.p,{children:["Assuming on inspection our service finds an object key that is an exact match of ",(0,a.jsx)(i.code,{children:"objectPrefix"}),", OptiView will obtain and serve that single file.\nIf there are any additional files uploaded to ",(0,a.jsx)(i.code,{children:"s3://<bucketName>/<objectPrefix>/*"})," they will be ignored."]}),"\n",(0,a.jsx)(i.h3,{id:"example-usage-2---upload-a-multi-file-asset",children:"Example Usage 2 - Upload A Multi File Asset"}),"\n",(0,a.jsxs)(i.p,{children:["If your asset has multiple files such as an HLS asset, the ",(0,a.jsx)(i.a,{href:"/documentation/pr-preview/pr-512/millicast/api/media-assets-register-media-asset",children:"Register Media Asset"})," request should look like this."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:'{\n  "objectPrefix": <object-prefix-from-above>,\n  "entrypoint": "main.m3u8"\n}\n'})}),"\n",(0,a.jsxs)(i.p,{children:["Assuming on inspection our service ",(0,a.jsx)(i.em,{children:"does not"})," find an object key which exactly matches the ",(0,a.jsx)(i.code,{children:"objectPrefix"}),", OptiView will obtain and serve all the contents uploaded to ",(0,a.jsx)(i.code,{children:"s3://<bucketName>/<objectPrefix>/*"}),".\nSince the ",(0,a.jsx)(i.code,{children:"entrypoint"})," is specified, the discovery url for downloading the media asset via the CDN will be a link to a copy of ",(0,a.jsx)(i.code,{children:"main.m3u8"}),"."]})]})}function p(e={}){let{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453(e,i,t){t.d(i,{R:()=>r,x:()=>o});var s=t(296540);let a={},n=s.createContext(a);function r(e){let i=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(n.Provider,{value:i},e.children)}},910667(e){e.exports=JSON.parse('{"id":"distribution/stream-recordings/how-to-upload-media-assets","title":"How-to Upload Media Assets","description":"You can upload your own media assets to OptiView storage to be played back via the OptiView CDN.","source":"@site/millicast/distribution/stream-recordings/how-to-upload-media-assets.mdx","sourceDirName":"distribution/stream-recordings","slug":"/distribution/stream-recordings/how-to-upload-media-assets","permalink":"/documentation/pr-preview/pr-512/millicast/distribution/stream-recordings/how-to-upload-media-assets","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/millicast/distribution/stream-recordings/how-to-upload-media-assets.mdx","tags":[],"version":"current","frontMatter":{"title":"How-to Upload Media Assets"},"sidebar":"millicast","previous":{"title":"How-to Setup Storage Profiles","permalink":"/documentation/pr-preview/pr-512/millicast/distribution/stream-recordings/how-to-setup-media-storage"},"next":{"title":"How-to Start Live Clipping","permalink":"/documentation/pr-preview/pr-512/millicast/distribution/stream-recordings/live-clipping"}}')}}]);