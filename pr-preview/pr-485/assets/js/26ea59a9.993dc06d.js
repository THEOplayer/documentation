"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["33038"],{802080(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});var t=i(160385),o=i(474848),s=i(28453);let r={sidebar_position:6},d="Scheduling overlays",a={},l=[{value:"Using the OptiView Ads service REST API",id:"using-the-optiview-ads-service-rest-api",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"scheduling-overlays",children:"Scheduling overlays"})}),"\n",(0,o.jsx)(n.p,{children:"OptiView Ads can insert overlays into your content, but it requires placement information to do so. This page will outline the various options for scheduling overlays."}),"\n",(0,o.jsx)(n.h2,{id:"using-the-optiview-ads-service-rest-api",children:"Using the OptiView Ads service REST API"}),"\n",(0,o.jsx)(n.p,{children:"The recommended way to schedule overlays is through the OptiView Ads service API."}),"\n",(0,o.jsxs)(n.p,{children:["This can be done by a POST request to ",(0,o.jsx)(n.code,{children:"{path}/overlay"})," where path is the usual url to interact with the OptiView Ads service for a specific monetized stream: ",(0,o.jsx)(n.code,{children:"{optiview-ads-host}/ads-client/api/v1/monetized-streams/:monetizedStreamId"}),". Please see ",(0,o.jsx)(n.a,{href:"/ads/api/signaling/create-monetized-stream-overlay/",children:"CreateMonetizedStreamOverlay"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"The body of the post request can have the following properties:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"{\n  id: string;\n  name: string | undefined;\n  startDate: string;\n  duration: string;\n  type: string;\n  position: {\n    left: number | undefined;\n    right: number | undefined;\n    top: number | undefined;\n    bottom: number | undefined;\n  };\n  size: {\n    width: number;\n    height: number;\n  };\n  opacity: number | undefined;\n  gamProperties: {\n    iu: string;\n    sz: {\n      default: string;\n      phone: string | undefined;\n      tv: string | undefined;\n    }\n  } | undefined;\n  resourceURI: {\n    type: string;\n    default: string;\n    phone: string | undefined;\n    tv: string | undefined;\n  }[] | undefined;\n  clickThroughURI: string | undefined;\n}\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"id"})," uniquely identifies the overlay inside the monetized stream."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"name"})," is used to optionally identify the overlay presentation with a human-friendly name."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"startDate"})," denotes when the overlay presentation should start. It should be in a Program Date Time format such as ",(0,o.jsx)(n.code,{children:"YYYY-MM-DDThh:mm:ss.SSSZ"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"duration"})," is the total duration of the overlay presentation (in seconds)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"type"})," can only be 'image' for now. In the future we might extend this."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"position"})," is required to know where the overlay needs to be presented on top of the video content. It requires a combination of either one of ",(0,o.jsx)(n.code,{children:"left"})," or ",(0,o.jsx)(n.code,{children:"right"})," and ",(0,o.jsx)(n.code,{children:"top"})," or ",(0,o.jsx)(n.code,{children:"bottom"}),". All values are percentage based and non-zero. The values denote the location from the specified side. For example: ",(0,o.jsx)(n.code,{children:"left: 10"})," denotes ",(0,o.jsx)(n.code,{children:"10% from the left edge of the video"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"size"})," is required to know what the overlay presentation's width and height need to be relative to the video content display size. All values are percentage based and non-zero. For example: ",(0,o.jsx)(n.code,{children:"width: 20"})," denotes 20% of the current video display width."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"opacity"})," can optionally be used to make the overlay less opaque. This value is percentage based and non-zero. The default is ",(0,o.jsx)(n.code,{children:"100"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"gamProperties"})," can optionally be used to specify the values required for requesting a pre-configured custom creative from GAM (See below). It follows the ",(0,o.jsx)(n.a,{href:"https://support.google.com/admanager/answer/2623168#zippy=%2Crequired-parameters",children:"specifications"})," for a tagless request to load a creative. If ",(0,o.jsx)(n.code,{children:"gamProperties"})," is not defined, you need to specify at least one ",(0,o.jsx)(n.code,{children:"resourceURI"}),".","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"iu"})," specifies the Google Ad Manager ad unit code, including your Google Ad Manager network code."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sz"})," specifies the creative size configured in GAM. Aside from the required ",(0,o.jsx)(n.code,{children:"default"})," value, you can optionally specify alternative values for either ",(0,o.jsx)(n.code,{children:"phone"})," or ",(0,o.jsx)(n.code,{children:"tv"})," devices."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"resourceURI"})," can optionally be used to specify one or more types required for requesting a custom overlay via a URI. If ",(0,o.jsx)(n.code,{children:"resourceURI"})," is not defined, you need to specify ",(0,o.jsx)(n.code,{children:"gamProperties"}),".","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"type"})," is used to specify the resource type. Currently, only ",(0,o.jsx)(n.code,{children:"png"})," and ",(0,o.jsx)(n.code,{children:"svg"})," are supported. Based on the underlying platform, the suitable format will be chosen."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"default"}),", ",(0,o.jsx)(n.code,{children:"phone"})," and ",(0,o.jsx)(n.code,{children:"tv"})," can be used to specify the corresponding resource URI to load when presenting the overlay. While ",(0,o.jsx)(n.code,{children:"default"})," is required, ",(0,o.jsx)(n.code,{children:"phone"})," and ",(0,o.jsx)(n.code,{children:"tv"})," are optional."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"clickThroughURI"})," is an optional field used to enable the clickthrough function on the overlay for both the ",(0,o.jsx)(n.code,{children:"gamProperties"})," and ",(0,o.jsx)(n.code,{children:"resourceURI"})," options."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"An example of a schedule overlay request body for a GAM based image overlay can be found below:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1",\n  "name": "Test overlay 1",\n  "startDate": "2024-12-09T07:30:11.274Z",\n  "duration": "30",\n  "type": "image",\n  "position": {\n    "left": 5,\n    "top": 5\n  },\n  "size": {\n    "width": 10,\n    "height": 10\n  },\n  "opacity": 50,\n  "gamProperties": {\n    "iu": "/12345678/overlay_1",\n    "sz": {\n      "default": "400x225",\n      "phone": "400x225",\n      "tv": "400x225"\n    }\n  },\n  "clickThroughURI": "https://optiview.dolby.com"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"An example of a schedule overlay request body for a custom image overlay can be found below:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "id": "2",\n  "name": "Test overlay 2",\n  "startDate": "2024-12-09T07:30:11.274Z",\n  "duration": "30",\n  "type": "image",\n  "position": {\n    "left": 5,\n    "top": 5\n  },\n  "size": {\n    "width": 10,\n    "height": 10\n  },\n  "opacity": 50,\n  "resourceURI": [\n    {\n      "type": "svg",\n      "default": "https://<PATH_TO_IMAGE>/image.svg",\n      "phone": "https://<PATH_TO_IMAGE>/image_phone.svg",\n      "tv": "https://<PATH_TO_IMAGE>/image_tv.svg"\n    },\n    {\n      "type": "png",\n      "default": "https://<PATH_TO_IMAGE>/image.png",\n      "phone": "https://<PATH_TO_IMAGE>/image_phone.png",\n      "tv": "https://<PATH_TO_IMAGE>/image_tv.png"\n    }\n  ],\n  "clickThroughURI": "https://optiview.dolby.com"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Please refer to ",(0,o.jsx)(n.a,{href:"../gam-custom-creatives",children:"Custom GAM Creatives"})," for information on how to setup your own custom creatives in GAM."]}),"\n",(0,o.jsx)(n.p,{children:"That's it! You should now be able to add image overlays which should show up inside the player at the appropriate time and location."})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>d});var t=i(296540);let o={},s=t.createContext(o);function r(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},160385(e){e.exports=JSON.parse('{"id":"how-to-guides/scheduling-overlays","title":"Scheduling overlays","description":"OptiView Ads can insert overlays into your content, but it requires placement information to do so. This page will outline the various options for scheduling overlays.","source":"@site/ads/how-to-guides/scheduling-overlays.md","sourceDirName":"how-to-guides","slug":"/how-to-guides/scheduling-overlays","permalink":"/documentation/pr-preview/pr-485/ads/how-to-guides/scheduling-overlays","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/ads/how-to-guides/scheduling-overlays.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"ads","previous":{"title":"Scheduling breaks","permalink":"/documentation/pr-preview/pr-485/ads/how-to-guides/scheduling-breaks"},"next":{"title":"Create backdrop images","permalink":"/documentation/pr-preview/pr-485/ads/how-to-guides/create-backdrop-layout"}}')}}]);