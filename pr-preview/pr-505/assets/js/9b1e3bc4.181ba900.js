"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["41915"],{623132(e,t,r){r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});var n=r(546348),a=r(474848),i=r(28453);let o={},s="How to apply accurate buffering strategy",d={},c=[{value:"Proactive strategy",id:"proactive-strategy",level:2},{value:"Resources",id:"resources",level:2}];function l(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"how-to-apply-accurate-buffering-strategy",children:"How to apply accurate buffering strategy"})}),"\n",(0,a.jsxs)(t.p,{children:["By default, THEOplayer buffers 20 seconds of video including audio/subtitles in order to guarantee smooth playout.\nTHEOplayer (alike other Web players) is relying on ",(0,a.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer",children:"HTML SourceBuffer API"})," for buffering purposes.\nUnfortunately there is no method which informs you how big the buffer size of given browser/device is. Of course, it can be different for device, and even browser.\nIn consequence in edge circumstances might happen that the following error is encountered:\n",(0,a.jsx)(t.code,{children:"Player error: Failed to execute 'appendBuffer' on 'SourceBuffer': The SourceBuffer is full, and cannot free space to append additional buffers."})]}),"\n",(0,a.jsx)(t.h2,{id:"proactive-strategy",children:"Proactive strategy"}),"\n",(0,a.jsxs)(t.p,{children:["One of the approach to deal with above issue is to apply proactive strategy which adjust ",(0,a.jsx)(t.code,{children:"player.abr.targetBuffer"})," depending on what quality is currently used.\nThe below table presents what approximately bandwidth is required for video streaming:"]}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Resolutions"}),(0,a.jsx)(t.th,{children:"Required Bandwidth (H264)"}),(0,a.jsx)(t.th,{children:"Required Bandwidth (H265)"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"1280x720 (HD)"}),(0,a.jsx)(t.td,{children:"3Mbps"}),(0,a.jsx)(t.td,{children:"1.5Mbps"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"1920x1080 (FHD)"}),(0,a.jsx)(t.td,{children:"6Mbps"}),(0,a.jsx)(t.td,{children:"3Mbps"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"3840x2160 (UHD)"}),(0,a.jsx)(t.td,{children:"25Mbps"}),(0,a.jsx)(t.td,{children:"12Mbps"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"4096x2160 (4K)"}),(0,a.jsx)(t.td,{children:"32Mbps"}),(0,a.jsx)(t.td,{children:"15Mbps"})]})]})]}),"\n",(0,a.jsx)(t.p,{children:"Taking above table into account, the logic responsible for the proactive strategy can look like:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"player.addEventListener('representationchange', function (event) {\n  // specifies how big bandwidth is required for the current quality\n  var representationBandwidth = event.representation.bandwidth;\n  // player.abr.targetBuffer is 20 by default\n  var targetBuffer = player.abr.targetBuffer;\n\n  // SD\n  if (representationBandwidth < 3000000) {\n    targetBuffer = 20;\n  } else if (representationBandwidth > 3000000 && representationBandwidth < 6000000) {\n    // HD\n    targetBuffer = 10;\n  } else if (representationBandwidth > 6000000) {\n    //FHD, UHD, 4K\n    targetBuffer = 5;\n  }\n\n  player.abr.targetBuffer = targetBuffer;\n  console.log('representationchange - updated player.abr.targetBuffer: ' + player.abr.targetBuffer);\n});\n"})}),"\n",(0,a.jsx)(t.p,{children:"Please note that the above numbers should be adjusted depending on the video content used."}),"\n",(0,a.jsx)(t.h2,{id:"resources",children:"Resources"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://www.synopi.com/bandwidth-required-for-hd-fhd-4k-video/",children:"Bandwidth Required For HD FHD 4K Video Streaming"})}),"\n"]})]})}function u(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453(e,t,r){r.d(t,{R:()=>o,x:()=>s});var n=r(296540);let a={},i=n.createContext(a);function o(e){let t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:t},e.children)}},546348(e){e.exports=JSON.parse('{"id":"faq/how-to-apply-accurate-buffering-strategy","title":"How to apply accurate buffering strategy","description":"By default, THEOplayer buffers 20 seconds of video including audio/subtitles in order to guarantee smooth playout.","source":"@site/theoplayer_versioned_docs/version-v8/faq/58-how-to-apply-accurate-buffering-strategy.md","sourceDirName":"faq","slug":"/faq/how-to-apply-accurate-buffering-strategy","permalink":"/documentation/pr-preview/pr-505/theoplayer/v8/faq/how-to-apply-accurate-buffering-strategy","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/theoplayer_versioned_docs/version-v8/faq/58-how-to-apply-accurate-buffering-strategy.md","tags":[],"version":"v8","sidebarPosition":58,"frontMatter":{},"sidebar":"faq","previous":{"title":"How to use the CDN fallback/backup stream feature","permalink":"/documentation/pr-preview/pr-505/theoplayer/v8/faq/cdn-fallback-backup-stream-feature"},"next":{"title":"How can I distribute 4K content?","permalink":"/documentation/pr-preview/pr-505/theoplayer/v8/faq/how-can-i-distribute-4k-content"}}')}}]);