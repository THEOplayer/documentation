<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-millicast docs-version-current docs-doc-page docs-doc-id-playback/players-sdks/ios/sdk/getting-started-with-subscribing" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Getting Started with Subscribing | Dolby OptiView Documentation</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=robots content="noindex, nofollow"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-millicast-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-millicast-current /><meta data-rh=true property=og:title content="Getting Started with Subscribing | Dolby OptiView Documentation"/><meta data-rh=true name=description content="Follow these steps to add the subscribing capability to your application."/><meta data-rh=true property=og:description content="Follow these steps to add the subscribing capability to your application."/><link data-rh=true rel=icon href=/documentation/pr-preview/pr-487/img/favicon.ico /><link data-rh=true rel=canonical href=https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing/ /><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing/ hreflang=en /><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://7HRS9V6FEL-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/","name":"Real-time Streaming","position":1},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback","name":"Playback","position":2},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/","name":"Players and SDKs","position":3},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/","name":"Millicast SDK","position":4},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing","name":"Getting Started with Subscribing","position":5}]}</script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-VCRXHMHS4M"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VCRXHMHS4M",{})</script><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-TVR6CV9")</script><link rel=search type=application/opensearchdescription+xml title="Dolby OptiView Documentation" href=/documentation/pr-preview/pr-487/opensearch.xml><link rel=stylesheet href=/documentation/pr-preview/pr-487/assets/css/styles.342ef26b.css /><script src=/documentation/pr-preview/pr-487/assets/js/runtime~main.f713ba23.js defer></script><script src=/documentation/pr-preview/pr-487/assets/js/main.78006cdb.js defer></script></head><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TVR6CV9" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#9cb9c9;color:#344a5e role=banner><div class="content_knG7 announcementBarContent_xLdY">This is a preview of the documentation website from <a target=_blank rel="noopener noreferrer" href=https://github.com/THEOplayer/documentation/pull/487>pull request #487</a>.</div></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/documentation/pr-preview/pr-487/><div class=navbar__logo><img src=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup=true aria-expanded=false role=button class=navbar__link href=/documentation/pr-preview/pr-487/theoplayer/>Player</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theoplayer/>THEOplayer</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/open-video-ui/>Open Video UI</a></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Ads</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/ads/>OptiView Ads</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/ad-engine/>OptiView Ad Engine</a></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link dropdown--active">Streaming</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theolive/>Live (THEOlive)</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/documentation/pr-preview/pr-487/millicast/>Real-time (Millicast)</a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/><span title="Introduction to Streaming APIs" class=linkLabel_WmDU>Introduction to Streaming APIs</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/millicast/getting-started/><span title="Getting started" class=categoryLinkLabel_W154>Getting started</span></a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/millicast/capture/><span title=Capture class=categoryLinkLabel_W154>Capture</span></a><button aria-label="Expand sidebar category 'Capture'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/millicast/broadcast/><span title=Broadcast class=categoryLinkLabel_W154>Broadcast</span></a><button aria-label="Expand sidebar category 'Broadcast'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/millicast/distribution/><span title=Distribution class=categoryLinkLabel_W154>Distribution</span></a><button aria-label="Expand sidebar category 'Distribution'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/documentation/pr-preview/pr-487/millicast/playback/><span title=Playback class=categoryLinkLabel_W154>Playback</span></a><button aria-label="Collapse sidebar category 'Playback'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/><span title="Players and SDKs" class=categoryLinkLabel_W154>Players and SDKs</span></a><button aria-label="Collapse sidebar category 'Players and SDKs'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/web/player/><span title=Web class=categoryLinkLabel_W154>Web</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/android/player/><span title=Android class=categoryLinkLabel_W154>Android</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/player/><span title=iOS class=categoryLinkLabel_W154>iOS</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/player/><span title="OptiView Player SDK" class=linkLabel_WmDU>OptiView Player SDK</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/><span title="Millicast SDK" class=categoryLinkLabel_W154>Millicast SDK</span></a><button aria-label="Collapse sidebar category 'Millicast SDK'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-publishing/><span title="Getting Started with Publishing" class=linkLabel_WmDU>Getting Started with Publishing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing/><span title="Getting Started with Subscribing" class=linkLabel_WmDU>Getting Started with Subscribing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/how-to-add-picture-in-picture/><span title="How-to Add Picture in Picture" class=linkLabel_WmDU>How-to Add Picture in Picture</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/sdk-migration-guide/><span title="Migration Guide" class=linkLabel_WmDU>Migration Guide</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/samples/sample-apps-ios-viewer/><span title="Sample apps" class=categoryLinkLabel_W154>Sample apps</span></a></div></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/react-native/><span title="React Native" class=linkLabel_WmDU>React Native</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/flutter/><span title=Flutter class=linkLabel_WmDU>Flutter</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/desktop/><span title=Desktop class=categoryLinkLabel_W154>Desktop</span></a><button aria-label="Expand sidebar category 'Desktop'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/viewer-events/><span title="Broadcast Events" class=linkLabel_WmDU>Broadcast Events</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/hosted-viewer/><span title="Hosted Player" class=categoryLinkLabel_W154>Hosted Player</span></a><button aria-label="Expand sidebar category 'Hosted Player'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/securing-stream-playback/><span title="Securing Stream Playback" class=linkLabel_WmDU>Securing Stream Playback</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/source-and-layer-selection/><span title="Source and Layer Selection" class=linkLabel_WmDU>Source and Layer Selection</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/multiview/><span title=Multi-view class=linkLabel_WmDU>Multi-view</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/audio-multiplexing/><span title="Audio Multiplexing" class=linkLabel_WmDU>Audio Multiplexing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/frame-metadata/><span title="Frame Metadata" class=linkLabel_WmDU>Frame Metadata</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/client-analytics/><span title="Client Analytics" class=categoryLinkLabel_W154>Client Analytics</span></a><button aria-label="Expand sidebar category 'Client Analytics'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/documentation/pr-preview/pr-487/millicast/playback/devices/amino/><span title="Playback Devices" class=categoryLinkLabel_W154>Playback Devices</span></a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/documentation/pr-preview/pr-487/millicast/network-requirements/><span title="Platform guides" class=categoryLinkLabel_W154>Platform guides</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><hr/><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/hardware-encoders/><span title="Hardware Encoders" class=linkLabel_WmDU>Hardware Encoders</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/software-encoders/><span title="Software Encoders" class=linkLabel_WmDU>Software Encoders</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/><span title="Players and SDKs" class=linkLabel_WmDU>Players and SDKs</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/api/millicast-api/><span title="Millicast REST API" class=linkLabel_WmDU>Millicast REST API</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/millicast/changelog/><span title="Release Notes" class=linkLabel_WmDU>Release Notes</span></a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_xLCN"><div class=docItemContainer_jfFK><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/documentation/pr-preview/pr-487/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_xK9p><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/millicast/><span>Real-time Streaming</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/millicast/playback/><span>Playback</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/><span>Players and SDKs</span></a><li class=breadcrumbs__item><span class=breadcrumbs__link>iOS</span><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/><span>Millicast SDK</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Getting Started with Subscribing</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Getting Started with Subscribing</h1></header><div class=row><div class="col col--12 markdown"><p>Follow these steps to add the subscribing capability to your application.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=1-import-the-sdk>1. Import the SDK<a href=#1-import-the-sdk class=hash-link aria-label="Direct link to 1. Import the SDK" title="Direct link to 1. Import the SDK" translate=no>​</a></h2>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MillicastSDK</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=2-configure-the-audio-session-for-playback>2. Configure the audio session for playback.<a href=#2-configure-the-audio-session-for-playback class=hash-link aria-label="Direct link to 2. Configure the audio session for playback." title="Direct link to 2. Configure the audio session for playback." translate=no>​</a></h2>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> session </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">AVAudioSession</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">sharedInstance</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> session</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setCategory</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">playback</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    mode</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">videoChat</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    options</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">mixWithOthers</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">allowBluetooth</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">allowBluetoothA2DP</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> session</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setActive</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=3-create-a-subscriber>3. Create a subscriber<a href=#3-create-a-subscriber class=hash-link aria-label="Direct link to 3. Create a subscriber" title="Direct link to 3. Create a subscriber" translate=no>​</a></h2>
<p>Create a subscriber of type <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber target=_blank rel="noopener noreferrer" class="">MCSubscriber</a>.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> subscriber </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCSubscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>Optionally implement the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriberdelegate target=_blank rel="noopener noreferrer" class="">MCSubscriberDelegate</a> to receive callbacks. Set this delegate during the initialization of <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber target=_blank rel="noopener noreferrer" class="">MCSubscriber</a>. Ensure to keep the delegate alive throughout the lifetime of the subscriber, since it does not retain its reference.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> subscriberDelegate </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">YourSubscriberDelegate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// where the `YourSubscriberDelegate` is a type that you implement, that conforms to `MCSubscriberDelegate`</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> subscriber </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCSubscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">delegate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> subscriberDelegate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=4-setup-your-credentials>4. Setup your credentials<a href=#4-setup-your-credentials class=hash-link aria-label="Direct link to 4. Setup your credentials" title="Direct link to 4. Setup your credentials" translate=no>​</a></h2>
<p>Get your <strong>stream name</strong> and <strong>stream ID</strong> from the dashboard and set them up in the SDK using the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/setcredentials(_:completionhandler:) target=_blank rel="noopener noreferrer" class="">setCredentials</a> method.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> credentials </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCSubscriberCredentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">credentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">streamName </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">  </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"STREAM_NAME"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The name of the stream you want to subscribe to</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">credentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">accountId </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"ACCOUNT_ID"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The ID of your Dolby.io Real-time Streaming account</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">credentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">apiUrl </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://director.millicast.com/api/director/subscribe"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The subscribe API URL</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setCredentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=5-subscribe-to-a-stream>5. Subscribe to a stream<a href=#5-subscribe-to-a-stream class=hash-link aria-label="Direct link to 5. Subscribe to a stream" title="Direct link to 5. Subscribe to a stream" translate=no>​</a></h2>
<p>Subscribing a stream includes two steps.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=51-connect-to-the-millicast-service>5.1. Connect to the Millicast service<a href=#51-connect-to-the-millicast-service class=hash-link aria-label="Direct link to 5.1. Connect to the Millicast service" title="Direct link to 5.1. Connect to the Millicast service" translate=no>​</a></h3>
<p>Define your connection preferences and <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcclient/connect(completionhandler:) target=_blank rel="noopener noreferrer" class="">connect</a> to the Millicast platform.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> connectionOptions </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCConnectionOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Set to `true` if you would like the SDK to reconnect to stream on a connection error; for example - when the network is lost and later restored.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">connectionOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">autoReconnect </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">connect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">with</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> connectionOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=52-subscribe-with-the-preferences>5.2. Subscribe with the preferences<a href=#52-subscribe-with-the-preferences class=hash-link aria-label="Direct link to 5.2. Subscribe with the preferences" title="Direct link to 5.2. Subscribe with the preferences" translate=no>​</a></h3>
<p>Call the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/subscribe(completionhandler:) target=_blank rel="noopener noreferrer" class="">subscribe(with:)</a> method passing your preferred subscribe options.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> subscriberOptions </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCClientOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The main source that will be received by the default media stream</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">pinnedSourceId </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"MySource"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Enables audio multiplexing and denotes the number of audio tracks to receive</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// as Voice Activity Detection (VAD) multiplexed audio</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">multiplexedAudioTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Audio streams that should not be included in the multiplex, for</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// example your own audio stream</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">excludedSourceId </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"excluded"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Delay in milliseconds to configure how frequently would you like to receive the</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// stream statistics</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">statsDelayMs </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">5000</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">subscribe</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">with</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> subscriberOptions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>Refer <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcclientoptions target=_blank rel="noopener noreferrer" class="">MCClientOptions</a> for more subscriber options.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=6-manage-broadcast-events>6. Manage broadcast events<a href=#6-manage-broadcast-events class=hash-link aria-label="Direct link to 6. Manage broadcast events" title="Direct link to 6. Manage broadcast events" translate=no>​</a></h2>
<p>When broadcast events occur, the SDK emits the appropriate event. There are multiple ways to receive those events, using AsyncStream's or by subscribing to Combine Publisher's. Those events can also be received by conforming to <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriberdelegate target=_blank rel="noopener noreferrer" class="">MCSubscriberDelegate</a> delegate methods.
Note: This listener has to be setup before calling the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/subscribe(completionhandler:) target=_blank rel="noopener noreferrer" class="">subscribe(with:)</a> method.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=61-receive-audio-and-video-tracks>6.1. Receive Audio and Video tracks<a href=#61-receive-audio-and-video-tracks class=hash-link aria-label="Direct link to 6.1. Receive Audio and Video tracks" title="Direct link to 6.1. Receive Audio and Video tracks" translate=no>​</a></h3>
<p><a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack target=_blank rel="noopener noreferrer" class="">MCRTSRemoteTrack</a> is a fundamental entity that enables us to view a stream. It can either be a video track or an audio track.</p>
<p>Receive newly added tracks by listening to subscriber's <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/rtsremotetrackadded target=_blank rel="noopener noreferrer" class="">rtsRemoteTrackAdded()</a> stream.
Newly added tracks can alternatively be received using <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/rtsremotetrackaddedpublisher target=_blank rel="noopener noreferrer" class="">rtsRemoteTrackAddedPublisher</a> or the delegate method <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriberdelegate/subscriber(_:didreceivertsremotetrack:) target=_blank rel="noopener noreferrer" class="">subscriber(_:didReceiveRTSRemoteTrack:)</a></p>
<p>Define variables to store the tracks and renderers.
Important: Audio and Video tracks of the same source will have the same <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack/sourceid target=_blank rel="noopener noreferrer" class="">sourceId</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">// `sourceIdToVideoTrackDictionary` is used to retain the video tracks returned by the SDK. This helps setup listeners on track or to enable/disable tracks at a later point in time.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceIdToVideoTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCRTSRemoteVideoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// `sourceIdToAudioTrackDictionary` is used to retain the audio tracks returned by the SDK. This helps setup listeners on track or to enable/disable tracks at a later point in time.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceIdToAudioTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCRTSRemoteAudioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// `sourceIdToRendererDictionary` is used to retain renderer used to enable a video track. The renderers can later be used to display video views on the user interface.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceIdToRendererDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCRTSRemoteAudioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><br/></span></code></pre></div></div>
<p>Setup listeners to receive audio and video tracks.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> track </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">rtsRemoteTrackAdded</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> videoTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> track</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">asVideo</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Each video track has a one to one relationship to each renderer.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Multiview scenarios require instantiating multiple renderers, one for each track.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> renderer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCCMSampleBufferVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Save the renderer and video track</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    sourceIdToRendererDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> renderer</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    sourceIdToVideoTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> videoTrack</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> audioTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> track</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">asAudio</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Enable an audio track.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    sourceIdToVideoTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> audioTrack</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>(or)</p>
<p>Using the combine publisher:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">rtsRemoteTrackAddedPublisher</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sink </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> track </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Task</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> videoTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> track</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">asVideo</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Each video track has a one to one relationship to each renderer.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Multiview scenarios require instantiating multiple renderers, one for each track.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> renderer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCCMSampleBufferVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Save the renderer and video track</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        sourceIdToRendererDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> renderer</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        sourceIdToVideoTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> videoTrack</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> audioTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> track</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">asAudio</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Enable an audio track.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        sourceIdToAudioTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sourceId</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> audioTrack</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=62-listen-to-activeinactive-state-of-tracks>6.2. Listen to active/inactive state of tracks<a href=#62-listen-to-activeinactive-state-of-tracks class=hash-link aria-label="Direct link to 6.2. Listen to active/inactive state of tracks" title="Direct link to 6.2. Listen to active/inactive state of tracks" translate=no>​</a></h3>
<p>Listen to the active and inactive state of a <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack target=_blank rel="noopener noreferrer" class="">MCRTSRemoteTrack</a> using <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack/activity target=_blank rel="noopener noreferrer" class="">activity()</a> stream.
Alternatively receive this event using the combine publisher <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack/activitypublisher target=_blank rel="noopener noreferrer" class="">activityPublisher()</a></p>
<p>If you prefer delegates, conform to [MCRTSRemoteTrackDelegate] of a MCRTSRemoteTrack and the use the delegate methods <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrackdelegate/rtsremotetrackactive(_:) target=_blank rel="noopener noreferrer" class="">rtsRemoteTrackActive(_:)</a> and <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrackdelegate/rtsremotetrackinactive(_:) target=_blank rel="noopener noreferrer" class="">rtsRemoteTrackInactive(_:)</a>.</p>
<p>Note: A video track receives video frames only when its enabled.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> activity </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">activity</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">switch</span><span class="token plain"> activity </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">inactive</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Optional.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The SDK automatically restores the state of the track when it transitions to `active` from an `inactive` state.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// You can optionally disable the video track when it becomes inactive. This step is optional. This gives you control on when to enable the track when it comes back active.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">disable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">active</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Optional.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// If you choose to disable a track when it became inactive, you have to enable the video track back after it is active again.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// At any point in time when you wish to start receive video from the track, call -</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>Similarly you can listen to active/inactive events of an audio track as below.
Note: An audio track plays audio only when its enabled.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> activity </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">activity</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">switch</span><span class="token plain"> activity </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">inactive</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Optional.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// The SDK automatically restores the state of the track when it transitions to `active` from an `inactive` state. You can optionally disable the audio track when it becomes inactive, so that the responsibility is on you to enable the track when it becomes active.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">disable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">case</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">active</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Optional.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// At any point in time where you wish to play audio from the track, call -</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> audioTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=63-receive-layer-information>6.3. Receive layer information<a href=#63-receive-layer-information class=hash-link aria-label="Direct link to 6.3. Receive layer information" title="Direct link to 6.3. Receive layer information" translate=no>​</a></h3>
<p>If your video track has multiple layers(spatial or temporal), use the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack/layers target=_blank rel="noopener noreferrer" class="">layers()</a> event to receive the list of active layers. The combine alternative for this event is <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrack/layerspublisher target=_blank rel="noopener noreferrer" class="">layersPublisher()</a></p>
<p>To receive layers from a delegate method, conform to [MCRTSRemoteTrackDelegate], set the delegate of an MCRTSRemoteTrack and then use the delegate method <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcrtsremotetrackdelegate/rtsremotetrack(_:didupdatelayers:) target=_blank rel="noopener noreferrer" class="">rtsRemoteTrack(_:didUpdateLayers:)</a>.</p>
<p>To select a particular layer, re-enable the track by passing the layer that you would like to select.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> layerEvent </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">layers</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// If your application requires to select a specific layer based on an application logic -</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Re-enable the track by passing in the layer that you want to select from the list.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> selectedLayer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> layerEvent</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">layers</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> videoTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> layer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> selectedLayer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=7-listen-to-websocket-and-peer-connection-state-changes>7. Listen to Websocket and Peer connection state changes<a href=#7-listen-to-websocket-and-peer-connection-state-changes class=hash-link aria-label="Direct link to 7. Listen to Websocket and Peer connection state changes" title="Direct link to 7. Listen to Websocket and Peer connection state changes" translate=no>​</a></h2>
<p>To monitor the state of the websocket connection of the subscriber, use the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/websocketstate target=_blank rel="noopener noreferrer" class="">websocketState()</a></p>
<p>List of possible states are defined in the enum <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcconnectionstate target=_blank rel="noopener noreferrer" class="">MCConnectionState</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> state </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">websocketState</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Log or handle the state change</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>To check whether you are subscribed successfully to a stream or to listen to other states of a subscription; use <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/peerconnectionstate target=_blank rel="noopener noreferrer" class="">peerConnectionState()</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> state </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">peerConnectionState</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Log or handle the state change</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>The delegate method equivalents of these events are defined in <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate target=_blank rel="noopener noreferrer" class="">MCDelegate</a></p>
<p>See <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate/client(_:didreceivertcpeerconnectionstate:) target=_blank rel="noopener noreferrer" class="">client(_:didReceiveRTCPeerConnectionState:)</a> and <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate/client(_:didreceivewebsocketconnectionstate:) target=_blank rel="noopener noreferrer" class="">client(_:didReceiveWebsocketConnectionState:)</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=8-render-video-on-the-ui>8. Render video on the UI<a href=#8-render-video-on-the-ui class=hash-link aria-label="Direct link to 8. Render video on the UI" title="Direct link to 8. Render video on the UI" translate=no>​</a></h2>
<p>The SDK provides SwiftUI Views for rendering a video track. Use <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcvideoswiftuiview target=_blank rel="noopener noreferrer" class="">MCVideoSwiftUIView</a> as in the example below:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">VideoView</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">private</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCCMSampleBufferVideoRenderer</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Important: The renderer passed in for display should be the one that is used to enable a video track.</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCCMSampleBufferVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">self</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">renderer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> renderer</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> body</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">some</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">View</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCVideoSwiftUIView</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">sampleBuffer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>If your application uses UIKit; use <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcacceleratedvideouiview target=_blank rel="noopener noreferrer" class="">MCAcceleratedVideoUIView</a> or <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsamplebuffervideouiview target=_blank rel="noopener noreferrer" class="">MCSampleBufferVideoUIView</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> renderer </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCAcceleratedVideoRenderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> videoView </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">MCAcceleratedVideoUIView</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">bounds</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> renderer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">view</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">addSubview</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">videoView</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=9-collecting-rtc-statistics>9. Collecting RTC statistics<a href=#9-collecting-rtc-statistics class=hash-link aria-label="Direct link to 9. Collecting RTC statistics" title="Direct link to 9. Collecting RTC statistics" translate=no>​</a></h2>
<p>You can periodically collect the WebRTC peer connection statistics if you enable them through the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcclient/enablestats(_:completionhandler:) target=_blank rel="noopener noreferrer" class="">enableStats</a> method of the subscriber. After enabling the statistics, you will get a report every second through the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/statsreport target=_blank rel="noopener noreferrer" class="">statsReport()</a> async stream or the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/statsreportpublisher target=_blank rel="noopener noreferrer" class="">statsReportPublisher</a> publisher.</p>
<p>Alternatively use the delegate method<a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate/client(_:didreceivestatsreport:) target=_blank rel="noopener noreferrer" class="">client(_:didreceivestatsreport:)</a></p>
<p>The identifiers and way to browse the stats are following the <a href=https://www.w3.org/TR/webrtc-stats/ target=_blank rel="noopener noreferrer" class="">RTC specification</a>.
The report contains the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcstatsreport target=_blank rel="noopener noreferrer" class="">MCStatsReport</a> object, which is a collection of several <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcstats target=_blank rel="noopener noreferrer" class="">MCStats</a> objects. They all have a specific type, whether it is inbound, outbound, codec, or media. Inbound is the statistics of incoming transport for the viewer and outbound is a type of outgoing statistics for the publisher.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">enableStats</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> statsReport </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">statsReport</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Parse the stats report for logging or display on to the user interface</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=10-error-handling>10. Error handling<a href=#10-error-handling class=hash-link aria-label="Direct link to 10. Error handling" title="Direct link to 10. Error handling" translate=no>​</a></h2>
<p>To listen to the http errors emitted by the subscriber instance, use the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/httperror target=_blank rel="noopener noreferrer" class="">httpError()</a> or it's equivalent combine publisher - <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/httperrorpublisher target=_blank rel="noopener noreferrer" class="">httpErrorPublisher()</a></p>
<p>The emitted error will be of type <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mchttpconnectionerror target=_blank rel="noopener noreferrer" class="">MCHttpConnectionError</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> error </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">httpError</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Handle http error</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>(or)</p>
<p>Using the combine publisher:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">httpErrorPublisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sink </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> error </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Handle http error</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>To listen to the signalling errors emitted by the subscriber or publisher instance, use the <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/signalingerror target=_blank rel="noopener noreferrer" class="">signalingError()</a> or it's equivalent combine publisher - <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/signalingerrorpublisher target=_blank rel="noopener noreferrer" class="">signalingErrorPublisher()</a></p>
<p>The emitted error will be of type <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsignalingerror target=_blank rel="noopener noreferrer" class="">MCSignalingError</a></p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> error </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">signalingError</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Handle signalling error</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>(or)</p>
<p>Using the combine publisher:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">signalingErrorPublisher</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">sink </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> error </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Handle signalling error</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>The delegate methods to receive http and signalling errors are <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate/client(_:didreceivehttpconnectionerror:) target=_blank rel="noopener noreferrer" class="">client(_:didreceivehttpconnectionerror:)</a> and <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcdelegate/client(_:didreceivesignalingerror:) target=_blank rel="noopener noreferrer" class="">client(_:didreceivesignalingerror:)</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=11-unsubscribe-the-session>11. Unsubscribe the session<a href=#11-unsubscribe-the-session class=hash-link aria-label="Direct link to 11. Unsubscribe the session" title="Direct link to 11. Unsubscribe the session" translate=no>​</a></h2>
<p>And finally, when you have finished viewing the stream, stop the subscription by calling <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcsubscriber/unsubscribe(completionhandler:) target=_blank rel="noopener noreferrer" class="">unsubscribe()</a> which tell the streaming server that the subscriber is no longer interested in receiving audio and video content. Then disconnect the websocket connection with the server by calling <a href=https://millicast.github.io/doc/latest/apple/documentation/millicastsdk/mcclient/disconnect(completionhandler:) target=_blank rel="noopener noreferrer" class="">disconnect()</a> method.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">unsubscribe</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">try</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">await</span><span class="token plain"> subscriber</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">disconnect</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// Clear the stored tracks and renderers</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">sourceIdToVideoTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">removeAll</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">sourceIdToAudioTrackDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">removeAll</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">sourceIdToRendererDictionary</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">removeAll</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div></div></div></div><div class=row><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/THEOplayer/documentation/blob/-/millicast/playback/players-sdks/ios/sdk/getting-started-with-subscribing.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></div></div></article><div class=row><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/getting-started-with-publishing/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Getting Started with Publishing</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/documentation/pr-preview/pr-487/millicast/playback/players-sdks/ios/sdk/how-to-add-picture-in-picture/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>How-to Add Picture in Picture</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-import-the-sdk class="table-of-contents__link toc-highlight">1. Import the SDK</a><li><a href=#2-configure-the-audio-session-for-playback class="table-of-contents__link toc-highlight">2. Configure the audio session for playback.</a><li><a href=#3-create-a-subscriber class="table-of-contents__link toc-highlight">3. Create a subscriber</a><li><a href=#4-setup-your-credentials class="table-of-contents__link toc-highlight">4. Setup your credentials</a><li><a href=#5-subscribe-to-a-stream class="table-of-contents__link toc-highlight">5. Subscribe to a stream</a><ul><li><a href=#51-connect-to-the-millicast-service class="table-of-contents__link toc-highlight">5.1. Connect to the Millicast service</a><li><a href=#52-subscribe-with-the-preferences class="table-of-contents__link toc-highlight">5.2. Subscribe with the preferences</a></ul><li><a href=#6-manage-broadcast-events class="table-of-contents__link toc-highlight">6. Manage broadcast events</a><ul><li><a href=#61-receive-audio-and-video-tracks class="table-of-contents__link toc-highlight">6.1. Receive Audio and Video tracks</a><li><a href=#62-listen-to-activeinactive-state-of-tracks class="table-of-contents__link toc-highlight">6.2. Listen to active/inactive state of tracks</a><li><a href=#63-receive-layer-information class="table-of-contents__link toc-highlight">6.3. Receive layer information</a></ul><li><a href=#7-listen-to-websocket-and-peer-connection-state-changes class="table-of-contents__link toc-highlight">7. Listen to Websocket and Peer connection state changes</a><li><a href=#8-render-video-on-the-ui class="table-of-contents__link toc-highlight">8. Render video on the UI</a><li><a href=#9-collecting-rtc-statistics class="table-of-contents__link toc-highlight">9. Collecting RTC statistics</a><li><a href=#10-error-handling class="table-of-contents__link toc-highlight">10. Error handling</a><li><a href=#11-unsubscribe-the-session class="table-of-contents__link toc-highlight">11. Unsubscribe the session</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 <a href=https://www.dolby.com/>Dolby Laboratories, Inc. All rights reserved.</a></div></div></div></footer></div></body>