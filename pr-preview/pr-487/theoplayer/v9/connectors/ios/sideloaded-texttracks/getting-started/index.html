<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-theoplayer docs-version-v9 docs-doc-page docs-doc-id-external/iOS-Connector/Code/Sideloaded-TextTracks/README" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Getting started | Dolby OptiView Documentation</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=v9 /><meta data-rh=true name=docusaurus_tag content=docs-theoplayer-v9 /><meta data-rh=true name=docsearch:version content=v9 /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-theoplayer-v9 /><meta data-rh=true name=robots content="noindex, nofollow"/><meta data-rh=true property=og:title content="Getting started | Dolby OptiView Documentation"/><meta data-rh=true name=description content="Set up your connector in just a few minutes!"/><meta data-rh=true property=og:description content="Set up your connector in just a few minutes!"/><link data-rh=true rel=icon href=/documentation/pr-preview/pr-487/img/favicon.ico /><link data-rh=true rel=canonical href=https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/ /><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/ hreflang=en /><link data-rh=true rel=alternate href=https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://7HRS9V6FEL-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/","name":"Player","position":1},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/","name":"Connectors","position":2},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks","name":"Sideloaded Subtitles","position":3},{"@type":"ListItem","item":"https://optiview.dolby.com/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started","name":"Getting started","position":4}]}</script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-VCRXHMHS4M"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VCRXHMHS4M",{})</script><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-TVR6CV9")</script><link rel=search type=application/opensearchdescription+xml title="Dolby OptiView Documentation" href=/documentation/pr-preview/pr-487/opensearch.xml><link rel=stylesheet href=/documentation/pr-preview/pr-487/assets/css/styles.342ef26b.css /><script src=/documentation/pr-preview/pr-487/assets/js/runtime~main.299e6ec3.js defer></script><script src=/documentation/pr-preview/pr-487/assets/js/main.78006cdb.js defer></script></head><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TVR6CV9" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#9cb9c9;color:#344a5e role=banner><div class="content_knG7 announcementBarContent_xLdY">This is a preview of the documentation website from <a target=_blank rel="noopener noreferrer" href=https://github.com/THEOplayer/documentation/pull/487>pull request #487</a>.</div></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/documentation/pr-preview/pr-487/><div class=navbar__logo><img src=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/documentation/pr-preview/pr-487/img/dolby-optiview-white.svg alt="Dolby OptiView" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup=true aria-expanded=false role=button class="navbar__link dropdown--active" href=/documentation/pr-preview/pr-487/theoplayer/>Player</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/documentation/pr-preview/pr-487/theoplayer/v9/ios/>THEOplayer</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/open-video-ui/>Open Video UI</a></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Ads</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/ads/>OptiView Ads</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/ad-engine/>OptiView Ad Engine</a></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Streaming</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theolive/>Live (THEOlive)</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/millicast/>Real-time (Millicast)</a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/>9.12.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theoplayer/connectors/ios/sideloaded-texttracks/getting-started/>10.8.0</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/>9.12.0</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theoplayer/v8/connectors/ios/sideloaded-texttracks/getting-started/>8.14.0</a><li><a class=dropdown__link href=/documentation/pr-preview/pr-487/theoplayer/v4/>4.12.7</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><template data-react-aria-hidden=true></template><div class=select_KFGv data-rac=""><span class=react-aria-Label id=react-aria-_R_15imlbahH3_></span><button id=react-aria-_R_15imlbahH2_ class=button_TUsg data-rac="" type=button tabindex=0 data-react-aria-pressable=true aria-labelledby="react-aria-_R_15imlbahH7_ react-aria-_R_15imlbahH3_" aria-describedby="react-aria-_R_15imlbahH5_ react-aria-_R_15imlbahH6_" aria-haspopup=listbox aria-expanded=false><span id=react-aria-_R_15imlbahH7_ class=selectValue_MQvg data-rac=""><span class=platformValue_t173><svg xmlns=http://www.w3.org/2000/svg xml:space=preserve width=20 height=20 viewBox="0 0 20 20" class="icon_qj0s platformIcon_dK7z"><path d="M17.85 14.227q-.159.46-.335.881a10.3 10.3 0 0 1-1.022 1.836q-.805 1.149-1.315 1.59-.787.725-1.691.744-.65 0-1.562-.372-.913-.373-1.681-.372-.805 0-1.729.372-.925.374-1.494.392-.867.038-1.729-.764-.55-.48-1.376-1.646-.885-1.244-1.455-2.891-.61-1.778-.611-3.444 0-1.91.826-3.291a4.85 4.85 0 0 1 1.73-1.75 4.65 4.65 0 0 1 2.339-.66q.688.001 1.809.421 1.12.421 1.435.422.237 0 1.591-.497 1.279-.46 2.163-.384 2.398.192 3.597 1.894-2.143 1.3-2.122 3.635.02 1.82 1.316 3.022.587.556 1.316.862M13.83.305q.02.19.019.38 0 1.426-1.038 2.658c-.835.976-1.845 1.54-2.94 1.451a3 3 0 0 1-.022-.36c0-.912.397-1.888 1.102-2.686q.529-.606 1.342-1.008.813-.397 1.537-.435"/></svg><span class=platformLabel_ZFgJ>iOS & tvOS SDK</span></span></span></button><div style="border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:fixed;width:1px;white-space:nowrap;top:0;left:0" aria-hidden=true data-react-aria-prevent-focus=true data-a11y-ignore=aria-hidden-focus data-testid=hidden-select-container><label><select tabindex=-1><option><option value=web>THEOplayer Web SDK<option value=android>THEOplayer Android SDK<option value=ios selected>THEOplayer iOS & tvOS SDK<option value=react-native>THEOplayer React Native SDK<option value=flutter>THEOplayer Flutter SDK<option value=chromecast>THEOplayer Chromecast SDK<option value=roku>THEOplayer Roku SDK</select></label></div></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/theoplayer/v9/ios/><span title=Introduction class=linkLabel_WmDU>Introduction</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/theoplayer/v9/getting-started/sdks/ios/getting-started/><span title="Getting started" class=categoryLinkLabel_W154>Getting started</span></a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/theoplayer/v9/how-to-guides/><span title="How-to guides" class=categoryLinkLabel_W154>How-to guides</span></a><button aria-label="Expand sidebar category 'How-to guides'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/><span title=Connectors class=categoryLinkLabel_W154>Connectors</span></a><button aria-label="Collapse sidebar category 'Connectors'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/comscore/><span title=Comscore class=categoryLinkLabel_W154>Comscore</span></a><button aria-label="Expand sidebar category 'Comscore'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/conviva/><span title=Conviva class=categoryLinkLabel_W154>Conviva</span></a><button aria-label="Expand sidebar category 'Conviva'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/conviva-verizonmedia/><span title="Conviva with Verizon Media" class=categoryLinkLabel_W154>Conviva with Verizon Media</span></a><button aria-label="Expand sidebar category 'Conviva with Verizon Media'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/nielsen/><span title=Nielsen class=categoryLinkLabel_W154>Nielsen</span></a><button aria-label="Expand sidebar category 'Nielsen'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/yospace/><span title=Yospace class=categoryLinkLabel_W154>Yospace</span></a><button aria-label="Expand sidebar category 'Yospace'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/><span title="Sideloaded Subtitles" class=categoryLinkLabel_W154>Sideloaded Subtitles</span></a><button aria-label="Collapse sidebar category 'Sideloaded Subtitles'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/getting-started/><span title="Getting started" class=linkLabel_WmDU>Getting started</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href=https://github.com/THEOplayer/iOS-Connector/tree/main/Code/Sideloaded-TextTracks target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex=0><span title=GitHub class=linkLabel_WmDU>GitHub</span><svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/uplynk/><span title=Uplynk class=categoryLinkLabel_W154>Uplynk</span></a><button aria-label="Expand sidebar category 'Uplynk'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/changelog/><span title=Changelog class=linkLabel_WmDU>Changelog</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/theoplayer/v9/changelog/><span title=Changelog class=linkLabel_WmDU>Changelog</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href=/documentation/pr-preview/pr-487/theoplayer/v9/api-reference/ios/ target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="API references" class=linkLabel_WmDU>API references</span><svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/documentation/pr-preview/pr-487/theoplayer/v9/knowledge-base/><span title="Knowledge base" class=categoryLinkLabel_W154>Knowledge base</span></a><button aria-label="Expand sidebar category 'Knowledge base'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/documentation/pr-preview/pr-487/theoplayer/faq/><span title=FAQ class=linkLabel_WmDU>FAQ</span></a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/documentation/pr-preview/pr-487/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_xK9p><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/theoplayer/v9/><span>Player</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/><span>Connectors</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/><span>Sideloaded Subtitles</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Getting started</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 9.12.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>THEOplayer ❤️ Sideloaded Subtitles</h1></header>
<p>THEOplayer-Connector-SideloadedSubtitle brings sideloaded subtitle support to THEOplayer's iOS SDK.</p>
<p>By using an experimental API from THEOplayer, this library aims to achieve sideloaded TextTrack support across all Apple devices and all media playback scenarios.</p>
<p>The presented technique is superior to any other similar options as it brings sideloading support to Airplay, Picture-in-Picture and DRM playback (and their combinations) and is out-of-the-box compatible with the TextTrackStyling API from THEOplayer.</p>
<p>This connector is intended to be used for subtitle text tracks. For metadata text tracks, such as WebVTT thumbnails, starting from v7.10 the core THEOplayerSDK will handle the sideloading without the help of this connector.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=installation>Installation<a href=#installation class=hash-link aria-label="Direct link to Installation" title="Direct link to Installation" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=cocoapods><a href=https://guides.cocoapods.org/using/getting-started.html#getting-started target=_blank rel="noopener noreferrer" class="">Cocoapods</a><a href=#cocoapods class=hash-link aria-label="Direct link to cocoapods" title="Direct link to cocoapods" translate=no>​</a></h3>
<ol>
<li class="">Create a Podfile if you don't already have one. From the root of your project directory, run the following command: <code>pod init</code></li>
<li class="">To your Podfile, add links to the registry of Cocoapods: <code>source 'https://cdn.cocoapods.org/'</code>. If this fails, bypass their CDN by using <code>source 'https://github.com/CocoaPods/Specs.git'</code></li>
<li class="">To your Podfile, add the connector pods that you want to use in your app: <code>pod 'THEOplayer-Connector-SideloadedSubtitle'</code></li>
<li class="">Install the pods using <code>pod install</code>, then open your <code>.xcworkspace</code> file to see the project in Xcode.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=usage>Usage<a href=#usage class=hash-link aria-label="Direct link to Usage" title="Direct link to Usage" translate=no>​</a></h2>
<p>Import the <code>THEOplayerConnectorSideloadedSubtitle</code> module.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">THEOplayerConnectorSideloadedSubtitle</span><br/></span></code></pre></div></div>
<p>After importing the module, a new API will be available on the THEOplayer instance called <code>setSourceWithSubtitles(source: SourceDescription?)</code></p>
<p>If you use this method to set a source, THEOplayer will be able to present sideloaded subtitles (via the <code>TextTrackDescription</code> already known from THEOplayer 4.x) configured with your <code>SourceDescription</code>, e.g.:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">static</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceWithSideloadedTextTrack </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> typedSource </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TypedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sourceURL.com/manifest.m3u8, type: "</span><span class="token plain">application</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">x</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain">mpegurl"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> typedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> textTracks </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">theoplayer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setSourceWithSubtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> sourceWithSideloadedTextTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p><strong>NOTE:</strong> Replace every <code>theopalyer.source = newSource</code> call with <code>theoplayer.setSourceWithSubtitles(source: newSource)</code> in your application if you intend to use (at least once) subtitle sideloading. Even if you don't have sideloaded subtitles on some of your sources. <strong>Combining both approaches could lead to unexpected behavior.</strong></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=limitations>Limitations<a href=#limitations class=hash-link aria-label="Direct link to Limitations" title="Direct link to Limitations" translate=no>​</a></h2>
<ol>
<li class="">THEOplayer-Connector-SideloadedSubtitle relies on an experimental API from THEOplayer which is subject to change. <strong>Always use matching THEOplayer and Connector versions.</strong></li>
<li class=""><strong>Supported formats are: iOS-compatible <code>WebVTT</code> subtitles and SRT</strong> via this connector today.</li>
<li class="">The presented <strong>label within THEOplayer is auto-generated by the operating system</strong> based on the language code and <strong>the configured label will be disregarded</strong>. (e.g. "eng" --> "English" (if the device language is English; "eng" --> "Engels", if the device language is Dutch). If an invalid language code is specified, the system will use that one as label. (e.g. "MyCustomLanguageCode" --> "MyCustomLanguageCode")</li>
<li class="">The <code>isDefault: true</code> setting will be not taken into account on sideloaded TextTracks as it could lead to invalid source (if the stream already contains default subtitles). Enabling the desired sideloaded subtitle can be achieved via <code>ADD_TRACK</code> listener.</li>
</ol>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">theoplayer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">textTracks</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">addEventListener</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">type</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TextTrackListEventTypes</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">ADD_TRACK</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> ev </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> texttrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> ev</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">track </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">as</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TextTrack</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> texttrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">language </span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"sideloaded_language_code"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">        tt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">mode </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">showing</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<ol start=5>
<li class="">Loading thumbnail metadata through sideloaded WebVTT subtitles is not supported.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=setting-a-time-offset>Setting a time offset<a href=#setting-a-time-offset class=hash-link aria-label="Direct link to Setting a time offset" title="Direct link to Setting a time offset" translate=no>​</a></h2>
<p>It is possible to shift the presentation of the cues by using the extended <code>SSTextTrackDescription</code> class instead of <code>TextTrackDescription</code>. It will provide an additional property <code>vttTimestamp</code> which allows to specify a <a href=https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-22#section-3.5 target=_blank rel="noopener noreferrer" class="">X-TIMESTAMP-MAP</a>.</p>
<p>The X-TIMESTAMP-MAP is optional and can be omitted from the WebVTT file and in general, it is not required. It is <strong>only necessary if you use a WEBVTT file inside an HLS subtitle rendition</strong> and you try to achieve subtitle synchronization.
And this is exactly the way how this connector operates.</p>
<p>The APIs below provide a way of adding or modifying the timestamp in case it is required by <strong>mapping the PTS</strong> (e.g. from a video rendition) <strong>to a local time within the WEBVTT</strong> file.</p>
<p>When converting different formats to WebVTT, this module does not add the timestamp by default.</p>
<p>The API usage remains mostly the same, with the exception of adding the timestamp:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">static</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceWithSideloadedTextTrack </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> typedSource </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TypedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sourceURL.com/manifest.m3u8, type: "</span><span class="token plain">application</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">x</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain">mpegurl"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"900000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:00.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> typedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> textTracks </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">theoplayer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setSourceWithSubtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> sourceWithSideloadedTextTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>If the source WebVTT file specified in the <code>SSTextTrackDescription</code> already contains the X-TIMESTAMP-MAP timestamp, then it can be accessed by using the <code>extractSourceTimestamp</code> method:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">extractSourceTimestamp </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> timestamp</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> error </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function" style="color:hsl(221, 87%, 60%)">print</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> timestamp</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">   </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// outputs the values from "https://sideloadedurl.com/subtitle.vtt"</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p><strong>Note:</strong> The <code>extractSourceTimestamp</code> method does not set the <code>vttTimestamp</code> property, but only reads the timestamp value from the source. You will need this if you want to modify the timestamp according to the initial values.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=more-examples>More examples:<a href=#more-examples class=hash-link aria-label="Direct link to More examples:" title="Direct link to More examples:" translate=no>​</a></h3>
<p>A sample WEBVTT file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">WEBVTT</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">1</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">00:00:11.000 --> 00:00:12.000</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">- Never drink liquid nitrogen.</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">2</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">00:00:13.000 --> 00:15:00.000</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">- It will perforate your stomach.</span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">- You could die.</span><br/></span></code></pre></div></div>
<p>Using the sample file mentioned above, if your PTS is <code>900000</code> in the video rendition, then mapping <code>900000</code> to <code>00:00:00.000</code> will show the first subtitle cue exactly when you would expect it, at 11 seconds in the movie.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"900000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:00.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=experimental-shifting-the-presentation-of-the-cues-forward-later-by-5-seconds>(Experimental) Shifting the presentation of the cues forward (later) by 5 seconds.<a href=#experimental-shifting-the-presentation-of-the-cues-forward-later-by-5-seconds class=hash-link aria-label="Direct link to (Experimental) Shifting the presentation of the cues forward (later) by 5 seconds." title="Direct link to (Experimental) Shifting the presentation of the cues forward (later) by 5 seconds." translate=no>​</a></h4>
<p>You can achieve this by adding values to the first digit of the PTS timestamp with localTime set to 0:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// we assume here that the PTS in the video rendition is 900000, so 900000 + 500000 = 1400000</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"1400000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:00.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>The timestamp is relative to the localTime, so the following settings will cancel each other out:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"1400000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:05.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=experimental-shifting-the-presentation-of-the-cues-backwards-earlier-by-5-seconds>(Experimental) Shifting the presentation of the cues backwards (earlier) by 5 seconds.<a href=#experimental-shifting-the-presentation-of-the-cues-backwards-earlier-by-5-seconds class=hash-link aria-label="Direct link to (Experimental) Shifting the presentation of the cues backwards (earlier) by 5 seconds." title="Direct link to (Experimental) Shifting the presentation of the cues backwards (earlier) by 5 seconds." translate=no>​</a></h4>
<p>You can achieve this by subtracting values to the first digit of the PTS timestamp with localTime set to 0:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// we assume here that the PTS in the video rendition is 900000, so 900000 - 500000 = 400000</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"400000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:00.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>or set the localTime to 5 seconds while keeping the timestamp value the same:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SSTextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// we assume here that the PTS in the video rendition is 900000</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">vttTimestamp </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token keyword" style="color:hsl(301, 63%, 40%)">init</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">pts</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"900000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> localTime</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"00:00:05.000"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p><strong>Note:</strong> Every 100000 of PTS timestamp results in roughly 1 second in time mapping. Use this carefully as it is not officially documented.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=warnings>Warnings<a href=#warnings class=hash-link aria-label="Direct link to Warnings" title="Direct link to Warnings" translate=no>​</a></h4>
<ol>
<li class="">You should always use HLS subtitle rendition-compliant WEBVTT files which are in sync with your streams and you should not be using the time-shifting functionality.</li>
<li class="">Shifting cues backwards is only possible until the timestamp of the first cue (e.g. if your first cue has to be rendered at 10 sec, you should not shift the subtitle by 15 sec).</li>
<li class="">Shifting forward is possible, but considered as hack, and it is not a specification-compliant manifest entry. Use it at your own risk!</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=automatic-synchronization>Automatic synchronization<a href=#automatic-synchronization class=hash-link aria-label="Direct link to Automatic synchronization" title="Direct link to Automatic synchronization" translate=no>​</a></h2>
<p>In case the presentation timestamp is not known, or it cannot be obtained, the <code>automaticTimestampSyncEnabled</code> property can be enabled to estimate the value of the PTS and automatically set the X-TIMESTAMP-MAP in the WEBVTT file.
This property is defined on the class <code>SSTextTrackDescription</code>.
Since the value is calculated retrospectively, it will cause a re-toggle of the enabled text track. This might cause a brief flash when a cue is present while the syncing takes effect.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=caching>Caching<a href=#caching class=hash-link aria-label="Direct link to Caching" title="Direct link to Caching" translate=no>​</a></h2>
<p>The caching feature of this connector allows you to download a source alongside a sideloaded subtitle to store it locally on the device and play it offline. To make this happen, the connector provides an API extension.</p>
<p>All that is needed is a source with a text track description:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">static</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token plain"> sourceWithSideloadedTextTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> typedSource </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TypedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sourceURL.com/manifest.m3u8, type: "</span><span class="token plain">application</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">x</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain">mpegurl"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> textTrack </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">TextTrackDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">src</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"https://sideloadedurl.com/subtitle.vtt"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> srclang</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"language_code"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> isDefault</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">subtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:hsl(119, 34%, 47%)">"Label"</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> format</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">WebVTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">SourceDescription</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> typedSource</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> textTracks</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">textTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br/></span></code></pre></div></div>
<p>and to call the aforementioned API which creates a new caching task, and finally calling the start method:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> parameters </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">CachingParameters</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">expirationDate</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">distantFuture</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> task </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">THEOplayer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">cache</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">createTaskWithSubtitles</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> sourceWithSideloadedTextTrack</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br/></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">task</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">start</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br/></span></code></pre></div></div>
<p>For more information on how to implement offline playback with caching, please refer <a href=https://github.com/THEOplayer/samples-ios-sdk/tree/master/Offline-Playback/Guides/howto-offline-stream-caching target=_blank rel="noopener noreferrer" class="">to our guide</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=limitations-1>Limitations<a href=#limitations-1 class=hash-link aria-label="Direct link to Limitations" title="Direct link to Limitations" translate=no>​</a></h3>
<ol>
<li class="">Caching sources with sideloaded subtitles can only be done one task at a time. This is due to some technical complexities in the underlying implementation. This limitation may be addressed in future releases.</li>
<li class="">Caching is only available on iOS.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/THEOplayer/iOS-Connector/blob/-/Code/Sideloaded-TextTracks/README.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/sideloaded-texttracks/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Sideloaded Subtitles</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/documentation/pr-preview/pr-487/theoplayer/v9/connectors/ios/uplynk/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Uplynk</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#installation class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href=#cocoapods class="table-of-contents__link toc-highlight">Cocoapods</a></ul><li><a href=#usage class="table-of-contents__link toc-highlight">Usage</a><li><a href=#limitations class="table-of-contents__link toc-highlight">Limitations</a><li><a href=#setting-a-time-offset class="table-of-contents__link toc-highlight">Setting a time offset</a><ul><li><a href=#more-examples class="table-of-contents__link toc-highlight">More examples:</a><ul><li><a href=#experimental-shifting-the-presentation-of-the-cues-forward-later-by-5-seconds class="table-of-contents__link toc-highlight">(Experimental) Shifting the presentation of the cues forward (later) by 5 seconds.</a><li><a href=#experimental-shifting-the-presentation-of-the-cues-backwards-earlier-by-5-seconds class="table-of-contents__link toc-highlight">(Experimental) Shifting the presentation of the cues backwards (earlier) by 5 seconds.</a><li><a href=#warnings class="table-of-contents__link toc-highlight">Warnings</a></ul></ul><li><a href=#automatic-synchronization class="table-of-contents__link toc-highlight">Automatic synchronization</a><li><a href=#caching class="table-of-contents__link toc-highlight">Caching</a><ul><li><a href=#limitations-1 class="table-of-contents__link toc-highlight">Limitations</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 <a href=https://www.dolby.com/>Dolby Laboratories, Inc. All rights reserved.</a></div></div></div></footer></div></body>